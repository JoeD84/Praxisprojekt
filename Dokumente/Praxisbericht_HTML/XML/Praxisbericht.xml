<?xml version="1.0" encoding="UTF-8"?>
<?latexml searchpaths="/home/joe/Praxisbericht"?>
<!-- %__ -->
<!-- %Formatvorlage für Diplomarbeiten der FHWT -->
<!-- %__ -->
<!-- %Angelehnt an die Word-Vorlage von Herrn Stührenberg -->
<!-- %Download unter http://www.atlando.de/fhwt.htm -->
<!-- %erstellt von Stefan Macke. 22.10.2007 -->
<!-- %http://blog.stefan-macke.de -->
<!-- %Genutzt und angepasst auf utf8 von Johannes Dielmann -->
<!-- %Dokumentenkopf __ -->
<!-- %Diese Vorlage basiert auf "scrreprt" aus dem koma-script. -->
<!-- %Die Option draft sollte beim fertigen Dokument ausgeschaltet werden. -->
<!-- %__ -->
<?latexml options="11pt,%Schriftgröße%DIV10,ngerman,%fürUmlaute,Silbentrennungetc.a4paper,%Papierformatoneside,%einseitigesDokumenttitlepage,%eswirdeineTitelseiteverwendetfinal%StatusdesDokuments(final/draft)" class="report"?>
<!-- %Meta-Informationen __ -->
<!-- %Informationen über das Dokument, wie z.B. Titel, Autor, Matrikelnr. etc -->
<!-- %werden in der Datei _Meta.tex definiert und können danach global -->
<!-- %verwendet werden. -->
<!-- %__ -->
<!-- %Informationen __ -->
<!-- %Definition von globalen Parametern, die im gesamten Dokument verwendet -->
<!-- %werden können (z.B auf dem Deckblatt etc.). -->
<!-- %__ -->
<!-- %Eigene Befehle und typographische Auszeichnungen für diese -->
<!-- %**** _Meta.tex Line 25 **** -->
<!-- %Abkürzungen mit korrektem Leerraum -->
<!-- %Benötigte Packages __ -->
<!-- %Weitere Packages, die benötigt werden, sind in die Datei Packages.tex -->
<!-- %"ausgelagert", um die Vorlage möglichst übersichtlich zu halten. -->
<!-- %__ -->
<!-- %Anpassung des Seitenlayouts __ -->
<!-- %siehe Seitenstil.tex -->
<!-- %__ -->
<!-- %\textit{\usepackage[ -->
<!-- %automark,			% Kapitelangaben in Kopfzeile automatisch erstellen -->
<!-- %headsepline,		% Trennlinie unter Kopfzeile -->
<!-- %ilines				% Trennlinie linksbündig ausrichten -->
<!-- %]{scrpage2}} -->
<!-- %Anpassung an Landessprache __ -->
<!-- %Verwendet globale Option german siehe \documentclass -->
<!-- %__ -->
<!-- %\usepackage{babel} -->
<?latexml options="ngerman" package="babel"?>
<!-- %Umlaute __ -->
<!-- %Umlaute/Sonderzeichen wie äüöß direkt im Quelltext verwenden (CodePage). -->
<!-- %Erlaubt automatische Trennung von Worten mit Umlauten. -->
<!-- %__ -->
<?latexml options="utf8" package="inputenc"?>
<?latexml options="T1" package="fontenc"?>
<?latexml package="textcomp"?>
<!-- %Euro-Zeichen etc. -->
<!-- %**** Packages.tex Line 25 **** -->
<!-- %Grafiken __ -->
<!-- %Einbinden von EPS-Grafiken [draft oder final] -->
<!-- %Option [draft] bindet Bilder nicht ein - auch globale Option -->
<!-- %__ -->
<?latexml options="dvips,final" package="graphicx"?>
<?latexml graphicspath="Bilder/"?>
<!-- %Dort liegen die Bilder des Dokuments -->
<!-- %Befehle aus AMSTeX für mathematische Symbole z.B. \boldsymbol \mathbb __ -->
<?latexml package="amsmath,amsfonts"?>
<!-- %Weitere Zeichen z.B. \textcelsius \textordmasculine \textsurd \textonehalf -->
<!-- %\texteuro \texttimes \textdiv ... aus textcomp.sty -->
<!-- %siehe >>Schnell ans Ziel mit \LaTeXe<< von Jörg Knappen -->
<!-- %(Oldenbourg, München und Wien 1997, ISBN 3-486-24199-0) -->
<!-- %\usepackage{tccompat} -->
<!-- %Für Index-Ausgabe; \printindex __ -->
<?latexml package="makeidx"?>
<!-- %Einfache Definition der Zeilenabstände und Seitenränder etc. __ -->
<!-- %\usepackage{setspace} -->
<!-- %\usepackage{geometry} -->
<!-- %**** Packages.tex Line 50 **** -->
<!-- %Symbolverzeichnis __ -->
<!-- %Symbolverzeichnisse bequem erstellen, beruht auf MakeIndex. -->
<!-- %makeindex.exe %Name%.nlo -s nomencl.ist -o %Name%.nls -->
<!-- %erzeugt dann das Verzeichnis. Dieser Befehl kann z.B. im TeXnicCenter -->
<!-- %als Postprozessor eingetragen werden, damit er nicht ständig manuell -->
<!-- %ausgeführt werden muss. -->
<!-- %Die Definitionen sind ausgegliedert in die Datei Abkuerzungen.tex. -->
<!-- %__ -->
<!-- %\usepackage[intoc]{nomencl} -->
<!-- %\let\abbrev\nomenclature -->
<!-- %\renewcommand{\nomname}{Abkürzungsverzeichnis} -->
<!-- %\setlength{\nomlabelwidth}{.25\hsize} -->
<!-- %\renewcommand{\nomlabel}[1]{#1 \dotfill} -->
<!-- %\setlength{\nomitemsep}{-\parsep} -->
<!-- %Zum Umfließen von Bildern __ -->
<?latexml package="floatflt"?>
<!-- %Zum Einbinden von Programmcode __ -->
<?latexml package="listings"?>
<?latexml package="color"?>
<!-- %**** Packages.tex Line 75 **** -->
<!-- %Lange URLs umbrechen etc. __ -->
<?latexml package="url"?>
<!-- %Wichtig für korrekte Zitierweise __ -->
<!-- %\usepackage[square,numbers]{natbib} -->
<?latexml options="numbers" package="natbib"?>
<!-- %\usepackage{biblatex} -->
<!-- %Quellenangaben in eckige Klammern fassen __ -->
<!-- %\bibpunct{[}{]}{;}{a}{}{,~} -->
<!-- %\usepackage{jurabib} -->
<!-- %\jurabibsetup{authorformat=smallcaps,% Autor in Kapitälchen -->
<!-- %%authorformat=year, -->
<!-- %authorformat=citationreversed,% Im Zitat Vorname vorne -->
<!-- %authorformat=indexed,% Autor in Index -->
<!-- %authorformat=and,% Autoren mit "," und "und" abgetrennt -->
<!-- %authorformat=firstnotreversed,% -->
<!-- %authorformat=reducedifibidem,% Bei Verweis nur Nachname. -->
<!-- %%superscriptedition=all,% Auflage hochgestellt -->
<!-- %%citefull=first,% Erstzitat voll -->
<!-- %titleformat=italic, -->
<!-- %**** Packages.tex Line 125 **** -->
<!-- %titleformat=all, -->
<!-- %titleformat=colonsep,% Doppelpunkt zwischen Aut. u. Titel -->
<!-- %ibidem=strict,% Ebenda pro Doppelseite -->
<!-- %see,% Das zweite Argument ist optional für "Vgl." etc. -->
<!-- %commabeforerest,% Komma vor Seitenzahl -->
<!-- %%howcited=compare,% -->
<!-- %%bibformat=ibidem,% Strich bei widerholtem Autor in BIB. -->
<!-- %commabeforerest, -->
<!-- %bibformat=compress, -->
<!-- %pages=always, -->
<!-- %%pages=format,% S. wird vorweggesetzt -->
<!-- %crossref=long,% Querverweise in voller Länge -->
<!-- %square,% eckige Klammern bei Zitaten -->
<!-- %%oxford, -->
<!-- %%chicago, -->
<!-- %} -->
<!-- %\AddTo\bibsgerman{% -->
<!-- %\jblookforgender% -->
<!-- %\renewcommand*{\ibidemname}{Ebenda}% -->
<!-- %\renewcommand*{\ibidemmidname}{ebenda}% -->
<!-- %\renewcommand*{\bibjtsep}{In: }% Vor Zeitschriften -->
<!-- %\renewcommand*{\bibbtsep}{In: }% Vor Buchtitel -->
<!-- %\renewcommand*{\incollinname}{In: }%Nicht so ganz sauber. -->
<!-- %\renewcommand*{\bibatsep}{.}% Nach Titel -->
<!-- %**** Packages.tex Line 150 **** -->
<!-- %\renewcommand*{\bibbdsep}{}%Vor Datum -->
<!-- %\renewcommand*{\jbaensep}{.}% -->
<!-- %\renewcommand*{\bibprdelim}{)}% Klammer bei Zeitschriftjahr rechts -->
<!-- %\renewcommand*{\bibpldelim}{(}% Klammer bei Zeitschriftjahr links -->
<!-- %\renewcommand*{\biblnfont}{\textsc}% Nachamen Autor im BIB -->
<!-- %\renewcommand*{\bibelnfont}{\textsc}% Nachamen Hg. im BIB -->
<!-- %\renewcommand*{\bibfnfont}{\textsc}% Vorn. Autor im BIB -->
<!-- %\renewcommand*{\bibefnfont}{\textsc}% Vorn. Hg. im BIB -->
<!-- %\renewcommand*{\jbcitationyearformat}[1]{#1}% Komma zwischen Autor und Jahr entfernen -->
<!-- %\def\herename{hier: }% -->
<!-- %\jbfirstcitepageranges% Format: S. x__z, hier y. -->
<!-- %\renewcommand\bibidemSfname{\raisebox{.2em}{\rule{2.em}{.2pt}}~}% -->
<!-- %\renewcommand\bibidemsfname{\raisebox{.2em}{\rule{2.em}{.2pt}}~}% -->
<!-- %\renewcommand\bibidemPfname{\raisebox{.2em}{\rule{2.em}{.2pt}}~}% -->
<!-- %\renewcommand\bibidempfname{\raisebox{.2em}{\rule{2.em}{.2pt}}~}% -->
<!-- %\renewcommand\bibidemSmname{\raisebox{.2em}{\rule{2.em}{.2pt}}~}% -->
<!-- %\renewcommand\bibidemsmname{\raisebox{.2em}{\rule{2.em}{.2pt}}~}% -->
<!-- %\renewcommand\bibidemPmname{\raisebox{.2em}{\rule{2.em}{.2pt}}~}% -->
<!-- %\renewcommand\bibidempmname{\raisebox{.2em}{\rule{2.em}{.2pt}}~}% -->
<!-- %\renewcommand\idemSfname{Dies.}% -->
<!-- %\renewcommand\idemsfname{dies.}% -->
<!-- %\renewcommand\idemPfname{Dies.}% -->
<!-- %\renewcommand\idempfname{dies.}% -->
<!-- %\renewcommand\idemSmname{Ders.}% -->
<!-- %\renewcommand\idemsmname{ders.}% -->
<!-- %**** Packages.tex Line 175 **** -->
<!-- %\renewcommand\idemPmname{Dies.}% -->
<!-- %\renewcommand\idempmname{dies.}% -->
<!-- %\renewcommand{\jbannoteformat}[1]{{\footnotesize\begin{quote}#1\end{quote}}} -->
<!-- %}% -->
<!-- %% PDF-Optionen __ -->
<?latexml options="bookmarks,bookmarksopen=true,pdftitle=ÜbersetzenvonSchrittmotorbefehlen,pdfauthor=JohannesDielmann,pdfcreator=JohannesDielmann,pdfsubject=ÜbersetzenvonSchrittmotorbefehlen,pdfkeywords=ÜbersetzenvonSchrittmotorbefehlen,colorlinks=true,linkcolor=blue,%einfacheinterneVerknüpfungenanchorcolor=black,%Ankertextcitecolor=blue,%VerweiseaufLiteraturverzeichniseinträgeimTextfilecolor=blue,%Verknüpfungen,dielokaleDateienöffnenmenucolor=red,%Acrobat-Menüpunkteurlcolor=blue,%linkcolor=black,%einfacheinterneVerknüpfungen%anchorcolor=black,%Ankertext%citecolor=black,%VerweiseaufLiteraturverzeichniseinträgeimText%filecolor=black,%Verknüpfungen,dielokaleDateienöffnen%menucolor=black,%Acrobat-Menüpunkte%urlcolor=black,backref,%pagebackref,plainpages=false,%zurkorrektenErstellungderBookmarkspdfpagelabels,%zurkorrektenErstellungderBookmarkshypertexnames=false,%zurkorrektenErstellungderBookmarks%linktocpage%SeitenzahlenanstattTextimInhaltsverzeichnisverlinken" package="hyperref"?>
<!-- %Zum fortlaufenden Durchnummerieren der Fußnoten __ -->
<!-- %\usepackage{chngcntr} -->
<!-- %Aliase für Zitate -->
<!-- %\defcitealias{WPProzess}{Wikipedia:~Prozess} -->
<!-- %\usepackage{minitoc} -->
<!-- %für lange Tabellen -->
<?latexml package="longtable"?>
<?latexml package="array"?>
<!-- %\usepackage{ragged2e} -->
<?latexml package="lscape"?>
<!-- %**** Packages.tex Line 225 **** -->
<!-- %Spaltendefinition rechtsbündig mit definierter Breite -->
<!-- %Formatierung von Listen ändern -->
<?latexml package="paralist"?>
<!-- %\setdefaultleftmargin{2.5em}{2.2em}{1.87em}{1.7em}{1em}{1em} -->
<!-- %Anhangsverzeichnis -->
<!-- %\makeatletter% __> De-TeX-FAQ -->
<!-- %\newcommand*{\maintoc}{% Hauptinhaltsverzeichnis -->
<!-- %\begingroup -->
<!-- %\@fileswfalse% kein neues Verzeichnis öffnen -->
<!-- %\renewcommand*{\appendixattoc}{% Trennanweisung im Inhaltsverzeichnis -->
<!-- %\value{tocdepth}=-10000 % lokal tocdepth auf sehr kleinen Wert setzen -->
<!-- %}% -->
<!-- %\tableofcontents% Verzeichnis ausgeben -->
<!-- %\endgroup -->
<!-- %} -->
<!-- %\newcommand*{\appendixtoc}{% Anhangsinhaltsverzeichnis -->
<!-- %\begingroup -->
<!-- %\edef\@alltocdepth{\the\value{tocdepth}}% tocdepth merken -->
<!-- %\setcounter{tocdepth}{-10000}% Keine Verzeichniseinträge -->
<!-- %\renewcommand*{\contentsname}{% Verzeichnisname ändern -->
<!-- %Verzeichnis der Anh\"ange}% -->
<!-- %**** Packages.tex Line 250 **** -->
<!-- %\renewcommand*{\appendixattoc}{% Trennanweisung im Inhaltsverzeichnis -->
<!-- %\setcounter{tocdepth}{\@alltocdepth}% tocdepth wiederherstellen -->
<!-- %}% -->
<!-- %\tableofcontents% Verzeichnis ausgeben -->
<!-- %\setcounter{tocdepth}{\@alltocdepth}% tocdepth wiederherstellen -->
<!-- %\endgroup -->
<!-- %} -->
<!-- %\newcommand*{\appendixattoc}{% Trennanweisung im Inhaltsverzeichnis -->
<!-- %} -->
<!-- %\g@addto@macro\appendix{% \appendix erweitern -->
<!-- %\if@openright\cleardoublepage\else\clearpage\fi% Neue Seite -->
<!-- %\addcontentsline{toc}{chapter}{\appendixname}% Eintrag ins Hauptverzeichnis -->
<!-- %\addtocontents{toc}{\protect\appendixattoc}% Trennanweisung in die toc-Datei -->
<!-- %} -->
<!-- %\makeatother -->
<!-- %Hinweis Box! -->
<!-- %\usepackage{xltxtra} -->
<!-- %\usepackage[biolinum,noamsmath,language]{xelibertine} -->
<!-- %**** Packages.tex Line 275 **** -->
<!-- %\setmonofont{Linux Biolinum O} -->
<!-- %\usepackage{calc} -->
<!-- %\usepackage{tabularx,multirow,dcolumn} -->
<!-- %\usepackage{colortbl} -->
<!-- %\usepackage{xcolor} -->
<!-- %\usepackage{showframe} -->
<!-- %**** Packages.tex Line 300 **** -->
<!-- %Erstellung eines Index und Abkürzungsverzeichnisses aktivieren __ -->
<!-- %\makeindex -->
<!-- %\makenomenclature -->
<!-- %Kopf- und Fußzeilen, Seitenränder etc. __ -->
<!-- %Zeilenabstand __ -->
<!-- %\onehalfspacing -->
<!-- %Seitenränder __ -->
<!-- %\geometry{paper=a4paper,left=30mm,right=40mm,top=10mm,bottom=65mm} -->
<!-- %\geometry{paper=a4paper,left=35mm,right=35mm,top=30mm,bottom=40mm} -->
<!-- %% Kopf- und Fußzeilen __ -->
<!-- %\pagestyle{scrheadings} -->
<!-- %% Kopf- und Fußzeile auch auf Kapitelanfangsseiten __ -->
<!-- %\renewcommand*{\chapterpagestyle}{scrheadings} -->
<!-- %% Schriftform der Kopfzeile __ -->
<!-- %\renewcommand{\headfont}{% -->
<!-- %\normalfont -->
<!-- %} -->
<!-- %% Kopfzeile __ -->
<!-- %\ihead{\large{\textsc{\titel}}\\ \small{\untertitel} \\[2ex] \textit{\headmark}} -->
<!-- %\chead{} -->
<!-- %\ohead{\includegraphics[scale=0.25]{RAC_Logo.jpg}} -->
<!-- %% -->
<!-- %**** Seitenstil.tex Line 25 **** -->
<!-- %\setlength{\headheight}{21mm} % Höhe der Kopfzeile -->
<!-- %\setheadwidth[0pt]{textwithmarginpar} % Kopfzeile über den Text hinaus verbreitern -->
<!-- %\setheadsepline[text]{0.4pt} % Trennlinie unter Kopfzeile -->
<!-- %% Fußzeile __ -->
<!-- %\ifoot{\autor} -->
<!-- %\cfoot{} -->
<!-- %\ofoot{\pagemark} -->
<!-- %erzeugt ein wenig mehr Platz hinter einem Punkt __ -->
<!-- %Schusterjungen und Hurenkinder vermeiden -->
<!-- %Quellcode-Ausgabe formatieren __ -->
<!-- %Fußnoten fortlaufend durchnummerieren __ -->
<!-- %\counterwithout{footnote}{chapter} -->
<!-- %**** Seitenstil.tex Line 50 **** -->
<!-- %Eigene Definitionen für Silbentrennung -->
<!-- %**** Praxisbericht.tex Line 50 **** -->
<!-- %Das eigentliche Dokument __ -->
<!-- %Der eigentliche Inhalt des Dokuments beginnt hier. Die einzelnen Seiten -->
<!-- %und Kapitel werden in eigene Dateien ausgelagert und hier nur inkludiert. -->
<!-- %__ -->
<?latexml RelaxNGSchema="LaTeXML"?>
<document xmlns="http://dlmf.nist.gov/LaTeXML">
  <title>Übersetzen von Schrittmotorbefehlen<break/>Entwurf eines Hardwareübersetzers</title>
  <!-- %auch subsubsection nummerieren 
     %\ofoot{}
     %\author{\autor}
     %\begin{titlepage}-->
  <para xml:id="p1">
    <!-- %\Huge{ -->
    <p align="center"><text fontsize="LARGE" font="bold">Praxisbericht<break/><text font="medium">
im Fachgebiet Mess- und Sensortechnik<break/>

<!-- %\LARGE{\textbf{\untertitel}}\\ 
     %\LARGE{\textbf{\textsc{\titel}}}\\
     %}
     %\includegraphics[scale=0.6]{RAC_Logo.jpg}\\[3ex]--><break/>
<tabular><tbody><tr><td align="justify" width="153.644882pt"/><td align="justify" width="170.716535pt"/></tr><tr><td align="justify" width="153.644882pt"><text fontsize="normal">vorgelegt von:</text></td><td align="justify" width="170.716535pt"><text fontsize="normal"> Johannes Dielmann</text></td></tr><tr><td align="justify" width="153.644882pt"><text fontsize="normal">Geburtsdatum:</text></td><td align="justify" width="170.716535pt"><text fontsize="normal"> 10. Januar 1984</text></td></tr><tr><td align="justify" width="153.644882pt"><text fontsize="normal">Geburtsort:</text></td><td align="justify" width="170.716535pt"><text fontsize="normal"> Kirchen</text></td></tr><tr><td align="justify" width="153.644882pt"><text fontsize="normal">Matrikelnummer:</text></td><td align="justify" width="170.716535pt"><text fontsize="normal"> 515956</text></td></tr><tr><td align="justify" width="153.644882pt"><text fontsize="normal">Erstgutachter:</text></td><td align="justify" width="170.716535pt"><text fontsize="normal"> Prof. Dr. Carstens-Behrens</text></td></tr></tbody></tabular></text></text>
<break/>
<!-- %**** Deckblatt.tex Line 25 **** -->© 2012<break/>

<break/></p>
  </para>
  <!-- %\singlespacing -->
  <para xml:id="p2">
    <p>
      <text fontsize="small">Dieses Werk einschließlich seiner Teile ist <text font="bold">urheberrechtlich geschützt</text>. Jede Verwertung außerhalb der engen Grenzen des Urheberrechtgesetzes ist ohne Zustimmung des Autors unzulässig und strafbar. Das gilt insbesondere für Vervielfältigungen, Übersetzungen, Mikroverfilmungen sowie die Einspeicherung und Verarbeitung in elektronischen Systemen.</text>
    </p>
  </para>
  <!-- %\end{titlepage} 
     %\include{Inhalt/Abstract}
     %\ofoot{\pagemark}
     %Seitennummerierung __
     %Vor dem Hauptteil werden die Seiten in großen römischen Ziffern
     %nummeriert...
     %__
     %\maintoc
     %**** Praxisbericht.tex Line 75 ****-->
  <TOC name="Inhaltsverzeichnis" role="contents" select="ltx:part | ltx:chapter | ltx:section | ltx:subsection | ltx:subsubsection | ltx:appendix | ltx:index | ltx:bibliography"/>
  <!-- %Inhaltsverzeichnis 
     %Abkürzungsverzeichnis __
     %\input{Inhalt/Glossar}
     %\label{sec:Glossar}
     %\printnomenclature-->
  <TOC name="Abbildungsverzeichnis" role="figures" select="ltx:figure"/>
  <!-- %Abbildungsverzeichnis -->
  <TOC name="Tabellenverzeichnis" role="tables" select="ltx:table"/>
  <!-- %Tabellenverzeichnis -->
  <TOC name="Codeverzeichnis" role="listings" select="ltx:listing"/>
  <!-- %Listings-Verzeichnis -->
  <chapter xml:id="Chx1">
    <title fontsize="small">Hinweise zum Dokument</title>
    <!-- %\begin{Tipp} -->
    <para xml:id="Chx1.p1">
      <p>
        <text fontsize="small">Hinweise werden durch diese Boxen gekennzeichnet
</text>
        <!-- %\end{Tipp} -->
      </p>
    </para>
    <para xml:id="Chx1.p2">
      <p>
        <text backgroundcolor="#D9D9FF" fontsize="small">Fachbegriffe</text>
        <text fontsize="small"> werden blau hinterlegt.</text>
        <break/>
      </p>
    </para>
    <para xml:id="Chx1.p3">
      <p>
        <emph>
          <text fontsize="small">Eigennamen</text>
        </emph>
        <text fontsize="small"> werden kursiv dargestellt.</text>
        <break/>
      </p>
    </para>
    <para xml:id="Chx1.p4">
      <p>
        <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">Code-Fragmente</text>
        <text fontsize="small"> werden gelb hinterlegt.</text>
        <break/>
      </p>
    </para>
    <!-- %**** Praxisbericht.tex Line 100 **** -->
    <listing class="ltx_lstlisting ltx_lst_language_C" xml:id="LSTx1">
      <toccaption>
        <text fontsize="small">Code/Hinweis.c</text>
      </toccaption>
      <tabular>
        <tr>
          <td class="ltx_lst_linenum">
            <text fontsize="tiny">1</text>
          </td>
          <td>
            <text class="ltx_lst_line" fontsize="footnote">//<text color="#008000">Quelltext<text class="ltx_lst_space"> </text>wird<text class="ltx_lst_space"> </text>in<text class="ltx_lst_space"> </text>diesen<text class="ltx_lst_space"> </text>Codelistings<text class="ltx_lst_space"> </text>dargestellt.</text></text>
          </td>
        </tr>
      </tabular>
    </listing>
    <para xml:id="Chx1.p5">
      <p>
        <text fontsize="small">Der komplette Quelltext für den Mikrocontroller, der Quelltext für diese Dokumentation, die Dokumentation selbst und weitere Bilder können unter </text>
        <ref class="url" href="https://github.com/JoeD84/Praxisprojekt">
          <text fontsize="small" font="typewriter">https://github.com/JoeD84/Praxisprojekt</text>
        </ref>
        <text fontsize="small"> abgerufen werden.
</text>
        <!-- %...danach in normalen arabischen Ziffern __ -->
        <text fontsize="small">
</text>
        <!-- %Inhalt __ 
     %Hier können jetzt die einzelnen Kapitel inkludiert werden. Sie müssen
     %in den entsprechenden .TEX-Dateien vorliegen. Die Dateinamen können
     %natürlich angepasst werden.
     %__-->
      </p>
    </para>
  </chapter>
  <chapter frefnum="Kapitel 1" refnum="1" xml:id="Ch1" labels="LABEL:cha:Einleitung">
    <title fontsize="small"><tag>Kapitel 1 </tag>Einleitung</title>
    <toctitle>
      <tag>
        <text fontsize="small">1 </text>
      </tag>
      <text fontsize="small">Einleitung</text>
    </toctitle>
    <para xml:id="Ch1.p1">
      <p>
        <text fontsize="small">Ein 3D-Laserscanner bietet vielfältige Möglichkeiten und Einsatzgebiete. Die Haupt-einsatzgebiete finden sich in der Bauteileprüfung, der Erstellung von Finite-Elemente-Daten in Verbindung mit Bauteilanalyse, der Erstellung von 3D-Daten, der Kontrolle von Zubehörteilen und dem Reverse-Engineering.</text>
        <break/>
        <text fontsize="small">Im Besitz der Fachhochschule Koblenz befindet sich ein komplettes 3D-Laserer-fassungssystem. Dazu gehören eine Erfassungssoftware, ein 3D-Laserscanner und ein Drehtisch. Bisher müssen für eine Aufnahme, alle Komponenten zueinander passen. Der Drehtisch in diesem System ist jedoch ein Eigenbau der Fachhochschule Koblenz und die darin verbaute Drehtischsteuerung nicht kompatibel zu denen, von der Erfassungssoftware unterstützten, Drehtischsteuerungen.</text>
        <break/>
        <text fontsize="small">Mittels eines Mikrocontrollers soll der vorhandene Aufbau so erweitert werden, dass der Drehtisch von der Software angesteuert werden kann und so der volle Umfang des Systems nutzbar gemacht werden. Dabei sind folgende Aufgaben zu realisieren. Die Höhenverstellung des Drehtisches soll genutzt werden können und die verbauten Endschalter ihre vorhergesehene Funktion erfüllen. Der Mikrocontroller soll sich mit mehreren Tastern bedienen lassen und über ein LC-Display verfügen, welches den aktuellen Status anzeigt. Mit einer Schritt-für-Schritt-Anleitung soll es auch für Studenten und Mitarbeiter der Fachhochschule möglich sein, schnell und einfach eine Aufnahme durchzuführen. Die Daten dieser Aufnahme sollen exportiert und in z.B. CAD-Anwendungen nutzbar sein. </text>
        <break/>
        <text fontsize="small">Der Aufbau der Arbeit gliedert sich im Wesentlichen in die Vorstellung der vorhandenen Hard- und Software, dem chronologischen Arbeitsablauf während des Projektes, ein Kapitel das Probleme und deren Lösungen aufzeigt, in ein Fazit und mögliche zukünftige Verbesserungen. Im Anhang befindet sich eine Schritt-für-Schritt-Anleitung die es Laien ermöglicht 3D-Modelle aufzunehmen und zu exportieren.
   </text>
        <!-- %Motivation und Ziel 
     %\include{Inhalt/Kapitel_Begriffe}	% Begriffe-->
      </p>
    </para>
  </chapter>
  <chapter frefnum="Kapitel 2" refnum="2" xml:id="Ch2" labels="LABEL:sec:Hardware">
    <title fontsize="small"><tag>Kapitel 2 </tag>Vorstellung der vorhandenen Hardware</title>
    <toctitle>
      <tag>
        <text fontsize="small">2 </text>
      </tag>
      <text fontsize="small">Vorstellung der vorhandenen Hardware</text>
    </toctitle>
    <para xml:id="Ch2.p1">
      <p>
        <text fontsize="small">Die Hardware besteht im Wesentlichen aus den Komponenten in Abbildung </text>
        <ref labelref="LABEL:fig:Übersicht"/>
        <text fontsize="small">.</text>
      </p>
    </para>
    <figure frefnum="Abbildung 2.1" placement="htb" refnum="2.1" xml:id="Ch2.F1" labels="LABEL:fig:Übersicht">
      <graphics graphic="Uebersicht_2.pdf" options="width=433.62pt" xml:id="Ch2.F1.g1" class="centering"/>
      <toccaption class="centering">
        <tag>
          <text fontsize="small">2.1 </text>
        </tag>
        <text fontsize="small">Blick auf den Arbeitsaufbau</text>
      </toccaption>
      <caption class="centering" fontsize="small"><tag>Abbildung 2.1: </tag>Blick auf den Arbeitsaufbau</caption>
    </figure>
    <table frefnum="Tabelle 2.1" placement="htb" refnum="2.1" xml:id="Ch2.T1" labels="LABEL:tbl:Aufbau">
      <toccaption>
        <tag>
          <text fontsize="small">2.1 </text>
        </tag>
        <text fontsize="small">Komponenten im Aufbau</text>
      </toccaption>
      <caption fontsize="small"><tag>Tabelle 2.1: </tag>Komponenten im Aufbau</caption>
      <tabular>
        <thead>
          <tr>
            <td align="center" border="l r t" thead="true">
              <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
              <text fontsize="small"> 1</text>
            </td>
            <td align="left" border="r t" thead="true">
              <text fontsize="small">Computer</text>
            </td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td align="center" border="l r t" thead="true">
              <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
              <text fontsize="small"> 2</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">3D-Laserscanner VI-900</text>
            </td>
          </tr>
          <tr>
            <td align="center" border="l r t" thead="true">
              <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
              <text fontsize="small"> 3</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Ansteuerung für den Drehtisch</text>
            </td>
          </tr>
          <tr>
            <td align="center" border="l r t" thead="true">
              <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
              <text fontsize="small"> 4</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Drehtisch</text>
            </td>
          </tr>
          <tr>
            <td align="center" border="b l r t" thead="true">
              <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
              <text fontsize="small"> 5</text>
            </td>
            <td align="left" border="b r t">
              <text fontsize="small">Zu scannendes Objekt (Kalibrierblech)</text>
            </td>
          </tr>
        </tbody>
      </tabular>
      <!-- %**** Inhalt/Kapitel_Hardware.tex Line 25 **** -->
    </table>
    <section refnum="2.1" xml:id="Ch2.S1" labels="LABEL:sec:Computer">
      <title fontsize="small"><tag>2.1 </tag>Computer</title>
      <para xml:id="Ch2.S1.p1">
        <p>
          <text fontsize="small">Zur Verfügung steht ein IBM kompatibler x86 Standard PC mit einer </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">SCSI-</text>
          <text fontsize="small"> und einer </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">RS-232-Schnittstelle</text>
          <text fontsize="small">. Auf diesem ist die Erfassungssoftware </text>
          <emph>
            <text fontsize="small">RapidForm2004</text>
          </emph>
          <text fontsize="small"> [</text>
          <ref labelref="LABEL:sec:V_Software"/>
          <text fontsize="small">] installiert. Die SCSI Schnittstelle wird zur Kommunikation mit dem 3D-Laserscanner und die RS-232-Schnittstelle zur Kommunikation mit einer Schrittmotorsteuerung genutzt.</text>
        </p>
      </para>
    </section>
    <section refnum="2.2" xml:id="Ch2.S2" labels="LABEL:sec:VI-900">
      <title fontsize="small"><tag>2.2 </tag>3D-Laserscanner VI-900</title>
      <para xml:id="Ch2.S2.p1">
        <p>
          <text fontsize="small">Der 3D-Laserscanner </text>
          <emph>
            <text fontsize="small">VI-900</text>
          </emph>
          <text fontsize="small"> der Firma </text>
          <emph>
            <text fontsize="small">Konica Minolta</text>
          </emph>
          <text fontsize="small">[</text>
          <ref labelref="LABEL:sec:V_Hardware"/>
          <text fontsize="small">] besteht, wie auf Abbildung </text>
          <ref labelref="LABEL:fig:VI900"/>
          <text fontsize="small"> zu sehen, aus einer Kamera und einem </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">Lasertriangulator</text>
          <text fontsize="small">. Das System lässt sich über eine SCSI-Schnittstelle ansprechen und konfigurieren. Zur mobilen Nutzung kann das Gerät auch auf der Rückseite bedient werden. Aufgenommene Daten können auf einer </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">CF-Karte</text>
          <text fontsize="small"> gespeichert werden. Im Projekt wurde jedoch lediglich die direkte Ansteuerung via SCSI genutzt.</text>
          <break/>
          <text fontsize="small">Der VI-900 digitalisiert Objekte durch ein Laser-Lichtschnittverfahren. Das vom Objekt reflektierte Licht wird von einer CCD-Flächenkamera erfasst, nach Ermittlung der Distanzwerte (Z-Achse) mittels Laser-Triangulation werden die 3D-Daten erstellt. Der Laserstrahl wird mit Hilfe eines hochpräzisen galvanischen Spiegels über das Objekt projiziert, pro Scan werden 640 x 480 Einzelpunkte erfasst.</text>
          <cite>
            <text fontsize="small">(</text>
            <bibref bibrefs="minolta:einleitung" separator=";" show="Number" yyseparator=","/>
            <text fontsize="small">)</text>
          </cite>
          <break/>
          <text fontsize="small">Die Technischen Daten befinden sich im Anhang in Tabelle </text>
          <ref labelref="LABEL:tab:TD_VI-910"/>
          <text fontsize="small"></text>
        </p>
      </para>
      <figure frefnum="Abbildung 2.2" placement="htb" refnum="2.2" xml:id="Ch2.F2" labels="LABEL:fig:VI900">
        <graphics graphic="vi900-big.jpg" options="width=100.0pt" xml:id="Ch2.F2.g1" class="centering"/>
        <toccaption class="centering">
          <tag>
            <text fontsize="small">2.2 </text>
          </tag>
          <text fontsize="small">VI-900 - Kamera oben, Lasertriangulator unten</text>
        </toccaption>
        <caption class="centering" fontsize="small"><tag>Abbildung 2.2: </tag>VI-900 - Kamera oben, Lasertriangulator unten</caption>
      </figure>
      <subsection refnum="2.2.1" xml:id="Ch2.S2.SS1" labels="LABEL:sec:LaserTri">
        <title fontsize="small"><tag>2.2.1 </tag>Lasertriangulator Prinzip</title>
        <para xml:id="Ch2.S2.SS1.p1">
          <p>
            <text fontsize="small">Ein Lasertriangulator besteht, wie in Abbildung </text>
            <ref labelref="LABEL:fig:LaserTriangulator"/>
            <text fontsize="small"> zu sehen, aus einem Laser, einem Linsensystem und im einfachsten Fall, aus einer Pixeldetektorzeile. Der Laser strahlt auf ein Objekt und je nach Entfernung des Objektes wird das Streulicht unter einem anderen Winkel zurückgestrahlt. Das Streulicht wird durch die Linsen auf den Pixeldetektor abgebildet. Über die Position des Laserspots auf dem Pixeldetektor lässt sich auf die Entfernung des Objektes schließen.</text>
          </p>
        </para>
        <figure frefnum="Abbildung 2.3" placement="h" refnum="2.3" xml:id="Ch2.F3" labels="LABEL:fig:LaserTriangulator">
          <graphics graphic="Laser-Triangulation.png" options="width=100.0pt" xml:id="Ch2.F3.g1" class="centering"/>
          <toccaption class="centering">
            <tag>
              <text fontsize="small">2.3 </text>
            </tag>
            <text fontsize="small">Prinzip: Laser-Triangulation</text>
          </toccaption>
          <caption class="centering" fontsize="small"><tag>Abbildung 2.3: </tag>Prinzip: Laser-Triangulation</caption>
        </figure>
        <!-- %**** Inhalt/Kapitel_Hardware.tex Line 50 **** -->
      </subsection>
    </section>
    <section refnum="2.3" xml:id="Ch2.S3" labels="LABEL:sec:AnsteuerungDrehtisch">
      <title fontsize="small"><tag>2.3 </tag>Drehtisch und Ansteuerung</title>
      <subsection refnum="2.3.1" xml:id="Ch2.S3.SS1" labels="LABEL:sec:Drehtisch">
        <title fontsize="small"><tag>2.3.1 </tag>Drehtisch</title>
        <para xml:id="Ch2.S3.SS1.p1">
          <p>
            <text fontsize="small">Der Tisch in dem der Drehtisch verbaut ist, ist eine Eigenkonstruktion der Werkstatt des RheinAhrCampus Remagen. Er besteht aus einer massiven Edelstahlarbeitsplatte, welche auf 4 Füßen ruht. Aus dieser ist ein Rechteck mit aufgesetztem Halbkreis ausgeschnitten. In diesem Ausschnitt befindet sich der Drehtisch(siehe Abbildung </text>
            <ref labelref="LABEL:fig:Drehtisch"/>
            <text fontsize="small">). Er ist auf einem Schienensystem gelagert. Mit dem Schienensystem kann der Drehtisch in der Vertikalen positioniert werden. Mit einem Schrittmotor lässt sich der Drehtisch zusätzlich in der Höhe verstellen. Die Höhenverstellung wird mit einem </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Schneckengetriebe</text>
            <text fontsize="small"> realisiert. Ein weiterer Schrittmotor ist für die Drehung des Tisches zuständig. Der Tisch ist über ein </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Harmonic-Drive-Getriebe</text>
            <text fontsize="small"> mit dem Schrittmotor verbunden. Das Übersetzungsverhältnis des Getriebes beträgt 1:50.</text>
          </p>
        </para>
        <figure frefnum="Abbildung 2.4" placement="h" refnum="2.4" xml:id="Ch2.F4" labels="LABEL:fig:Drehtisch">
          <graphics graphic="Drehtisch" options="width=433.62pt" xml:id="Ch2.F4.g1" class="centering"/>
          <toccaption class="centering">
            <tag>
              <text fontsize="small">2.4 </text>
            </tag>
            <text fontsize="small">Drehtisch</text>
          </toccaption>
          <caption class="centering" fontsize="small"><tag>Abbildung 2.4: </tag>Drehtisch</caption>
        </figure>
      </subsection>
      <subsection refnum="2.3.2" xml:id="Ch2.S3.SS2" labels="LABEL:sec:Spannungsv">
        <title fontsize="small"><tag>2.3.2 </tag>Spannungsversorgung</title>
        <para xml:id="Ch2.S3.SS2.p1">
          <p>
            <text fontsize="small">Die Schrittmotorkarten werden von einem PC-Netzteil gespeist. Die </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Logikbausteine</text>
            <text fontsize="small"> werden mit 5V gespeist, zusätzlich werden die Schrittmotorkarten mit 12V für die Schrittmotoren gespeist. Die Kabel sind direkt an die Verbindungsleisten gelötet.</text>
            <break/>
            <text fontsize="small">Dies verhindert das einfache Ausbauen der Spannungsversorgung und die einfache Erweiterung um neue Einschubkarten.</text>
          </p>
        </para>
      </subsection>
      <subsection refnum="2.3.3" xml:id="Ch2.S3.SS3" labels="LABEL:sec:Schrittmotoren">
        <title fontsize="small"><tag>2.3.3 </tag>Schrittmotoren</title>
        <para xml:id="Ch2.S3.SS3.p1">
          <p>
            <text fontsize="small">Für die Rotation kommt der Schrittmotor 440-458 der Firma R+S zum Einsatz. Dieser hat einen Schrittwinkel von 1,8°, eine Haltedrehmoment von 500mNm, wird mit 8-Drahtleitung verschaltet und mit 12V Gleichspannung versorgt. Aus dem Schrittwinkel ergeben sich 200 Schritte pro Umdrehung. Diese werden mit einem </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Harmonic-Drive-Getriebe</text>
            <text fontsize="small">, mit einer Übersetzung von 500:1, auf 100.000 Schritte pro Umdrehung erhöht.</text>
            <break/>
            <text fontsize="small">Für die Höhenverstellung wird der Schrittmotor 440-420, ebenfalls von der Firma R+S, verwendet. Dieser hat auch einen Schrittwinkel von 1,8°, hat jedoch ein Haltemoment von 70mNm, wird in 6-Drahtleitung verschaltet und mit 5V Gleichspannung gespeist. Dieser ist mit einer Übersetzung von 5:1 und einem Schneckengetriebe mit dem Drehtisch verbunden.</text>
          </p>
        </para>
      </subsection>
      <subsection refnum="2.3.4" xml:id="Ch2.S3.SS4" labels="LABEL:sec:Schrittmotorkarten">
        <title fontsize="small"><tag>2.3.4 </tag>Schrittmotorkarten</title>
        <para xml:id="Ch2.S3.SS4.p1">
          <p>
            <text fontsize="small">Die Ansteuerung für die Schrittmotoren sind als 19’’-Einschübe realisiert, siehe Abbildung </text>
            <ref labelref="LABEL:fig:19Zoll_Rack"/>
            <text fontsize="small"> links. Für jeden Schrittmotor wird ein Einschub benötigt.
Die Einschübe sind Produkte der Firma R+S. Mittels </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">RS-232 Schnittstelle</text>
            <text fontsize="small"> lassen sich die Karten konfigurieren und ansteuern. Die Konfiguration und Ansteuerung erfolgt über einen vorgegeben
</text>
            <!-- %**** Inhalt/Kapitel_Hardware.tex Line 75 **** -->
            <text backgroundcolor="#D9D9FF" fontsize="small">ASCII</text>
            <note mark="1" role="footnote">
              <text fontsize="small">Der American Standard Code for Information Interchange (ASCII, alternativ US-ASCII, oft [æski] ausgesprochen) ist eine 7-Bit-Zeichenkodierung</text>
              <cite>
                <text fontsize="small">(</text>
                <bibref bibrefs="wiki:ascii" separator=";" show="Number" yyseparator=","/>
                <text fontsize="small">)</text>
              </cite>
            </note>
            <text fontsize="small">
Befehlssatz. Der Befehlssatz befindet sich im Kapitel </text>
            <ref labelref="LABEL:sec:A_ASCII_Befehle"/>
            <text fontsize="small">. Es können zwei oder mehr Karten als
</text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Daisy-Chain</text>
            <note mark="2" role="footnote">
              <text fontsize="small">Als Daisy Chain (englisch, wörtlich „Gänseblümchenkette“) bezeichnet man eine Anzahl von Hardware-Komponenten, welche in Serie miteinander verbunden sind (meist in sogenannten Bussystemen in der Automatisierungstechnik).</text>
              <cite>
                <text fontsize="small">(</text>
                <bibref bibrefs="wiki:daisy" separator=";" show="Number" yyseparator=","/>
                <text fontsize="small">)</text>
              </cite>
              <text fontsize="small"> </text>
            </note>
            <text fontsize="small"> in Reihe geschaltet werden.</text>
            <break/>
            <text fontsize="small">Zu Beginn des Projekts war nur die erste Schrittmotorsteuerung vorbereitet.</text>
          </p>
        </para>
        <figure frefnum="Abbildung 2.5" placement="h" refnum="2.5" xml:id="Ch2.F5" labels="LABEL:fig:19Zoll_Rack">
          <graphics graphic="19Zoll_Rack" options="width=433.62pt" xml:id="Ch2.F5.g1" class="centering"/>
          <toccaption class="centering">
            <tag>
              <text fontsize="small">2.5 </text>
            </tag>
            <text fontsize="small">Ansteuerung im 19’’-Rack</text>
          </toccaption>
          <caption class="centering" fontsize="small"><tag>Abbildung 2.5: </tag>Ansteuerung im 19’’-Rack</caption>
        </figure>
      </subsection>
      <subsection refnum="2.3.5" xml:id="Ch2.S3.SS5" labels="LABEL:sec:Motorverkabelung">
        <title fontsize="small"><tag>2.3.5 </tag>Motorverkabelung</title>
        <para xml:id="Ch2.S3.SS5.p1">
          <p>
            <text fontsize="small">Die Schrittmotoren benötigen ein mindestens 4-adriges Kabel. Das Kabel für den Schrittmotor, der für die Rotation zuständig ist, war bereits gefertigt. Ein Kabel zwischen Schrittmotor und Schrittmotorkarte zur Höhenverstellung und für die Endschalter war nicht vorhanden und wurde im Verlauf des Projekts gefertigt.</text>
          </p>
        </para>
      </subsection>
      <subsection refnum="2.3.6" xml:id="Ch2.S3.SS6" labels="LABEL:sec:Endschalter">
        <title fontsize="small"><tag>2.3.6 </tag>Endschalter</title>
        <para xml:id="Ch2.S3.SS6.p1">
          <p>
            <text fontsize="small">Die Schrittmotorkarten unterstützen das Abschalten der Motoren wenn ein sogenannter Endschalter ausgelöst wird. Dies sind im allgemeinen mechanische Schalter die ausgelöst werden wenn der Tisch sich dem Ende des Arbeitsbereiches nähert. Dies verhindert eine Beschädigung des Aufbaus.</text>
            <break/>
            <text fontsize="small">Im Aufbau sind bereits induktive Endschalter der Firma </text>
            <text fontsize="small" font="italic">Pepperl+Fuchs</text>
            <text fontsize="small"> verbaut. Diese werden durch einen Metallstutzen ausgelöst. Dieser ist jedoch schlecht positioniert oder ungenügend lang. Würde der Drehtisch über seine Grenzen hinaus in der Höhe verstellt werden, würden die Endschalter nicht rechtzeitig ausgelöst werden und der Aufbau würde beschädigt werden.</text>
          </p>
        </para>
      </subsection>
    </section>
    <section refnum="2.4" xml:id="Ch2.S4" labels="LABEL:sec:Mikrocontroller">
      <title fontsize="small"><tag>2.4 </tag>Mikrocontroller</title>
      <para xml:id="Ch2.S4.p1">
        <p>
          <text fontsize="small">Ein Mikrocontroller besteht, wie in Abbildung </text>
          <ref labelref="LABEL:fig:uC_Blockdiagramm"/>
          <text fontsize="small"> zu sehen, aus CPU, Flash-Speicher, EEPROM, Registern, Ports und mehreren Peripherie-Funktionen wie z.B. Timern, ADC, DAC und seriellen Schnittstellen. Für unterschiedliche Aufgaben können unterschiedliche Mikrocontroller verwendet werden, welche sich in ihrem Funktionsumfang unterscheiden.</text>
          <break/>
          <text fontsize="small">Besonders Wichtig im Mikrocontroller sind die sogenannten Register. Dieses sind spezielle, meist 8-Bit breite, Abschnitte im Speicher. Sie repräsentieren Werte und Einstellungen im Mikrocontroller. Diese können  beschrieben und ausgelesen oder nur ausgelesen werden. Durch das Auslesen oder Beschreiben der Register kann der Mikrocontroller mit internen und externen Komponenten interagieren. Die Register die zur externen Kommunikation dienen werden als Ports bezeichnet. </text>
          <break/>
          <text fontsize="small">Es stand ein ATmega8515 </text>
          <cite>
            <text fontsize="small">(</text>
            <bibref bibrefs="atmel:8515" separator=";" show="Number" yyseparator=","/>
            <text fontsize="small">)</text>
          </cite>
          <text fontsize="small"> im DIL-Gehäuse zur Verfügung. Dieser hatte 8 Kbyte Flash, drei externe Interrupts, eine serielle Schnittstelle und konnte mit bis zu 16 MHz betrieben werden.
</text>
          <!-- %**** Inhalt/Kapitel_Hardware.tex Line 100 **** -->
          <text fontsize="small">Dieser war geeignet um sich mit den speziellen Eigenheiten der Mikrocontroller Programmierung vertraut zu machen.</text>
        </p>
      </para>
      <figure frefnum="Abbildung 2.6" placement="htb" refnum="2.6" xml:id="Ch2.F6" labels="LABEL:fig:uC_Blockdiagramm">
        <graphics graphic="Mikrocontroller_Block" options="width=433.62pt" xml:id="Ch2.F6.g1" class="centering"/>
        <toccaption class="centering">
          <tag>
            <text fontsize="small">2.6 </text>
          </tag>
          <text fontsize="small">Block Diagramm: Mikrocontroller ATmega324A</text>
          <cite>
            <text fontsize="small">(</text>
            <bibref bibrefs="atmel:ug_324a" separator=";" show="Number" yyseparator=","/>
            <text fontsize="small">)</text>
          </cite>
        </toccaption>
        <caption class="centering" fontsize="small"><tag>Abbildung 2.6: </tag>Block Diagramm: Mikrocontroller ATmega324A<cite>(<bibref bibrefs="atmel:ug_324a" separator=";" show="Number" yyseparator=","/>)</cite></caption>
      </figure>
      <subsection refnum="2.4.1" xml:id="Ch2.S4.SS1" labels="LABEL:sec:STK500">
        <title fontsize="small"><tag>2.4.1 </tag>Entwicklerboard STK500</title>
        <para xml:id="Ch2.S4.SS1.p1">
          <p>
            <text fontsize="small">Um den Mikrocontroller zu programmieren und die Programmierung zu überprüfen, wird das </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Entwicklerboard</text>
            <text fontsize="small"> </text>
            <emph>
              <text fontsize="small">STK500</text>
            </emph>
            <text fontsize="small">[</text>
            <ref labelref="LABEL:sec:V_Hardware"/>
            <text fontsize="small">], wie auf Abbildung </text>
            <ref labelref="LABEL:fig:STK500"/>
            <text fontsize="small"> zu sehen, verwendet. Das Board enthält mehrere Mikrocontroller-Steckplätze, 2 serielle Schnittstellen, 8 Taster, 8 LEDs, 2 Erweiterungsports, eine </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">ISP</text>
            <note mark="3" role="footnote">
              <text fontsize="small">In System Programmer</text>
            </note>
            <text fontsize="small"> Programmierschnittstelle und mehrere Jumper zum Konfigurieren des Boards.</text>
            <break/>
            <text fontsize="small">Von den beiden seriellen Schnittstellen kann die Eine zur Programmierung des Mikrocontrollers verwendet werden. Die Andere kann zur Kommunikation mit dem Mikrocontroller genutzt werden.</text>
            <break/>
            <text fontsize="small">Auf dem Board stehen fünf 10 polige Stiftleisten
zur Verfügung. Diese sind direkt mit den Ein- und Ausgabe Pins, den sogenannten </text>
            <emph>
              <text fontsize="small">Ports</text>
            </emph>
            <text fontsize="small">, des Mikrocontroller verbunden und können über Flachbandkabel mit Hardwarekomponenten wie z.B. Taster, LED, LC-Displays oder seriellen Schnittstellen verbunden werden.</text>
          </p>
        </para>
        <figure frefnum="Abbildung 2.7" placement="htb" refnum="2.7" xml:id="Ch2.F7" labels="LABEL:fig:STK500">
          <graphics graphic="STK500_Schema.pdf" options="width=433.62pt" xml:id="Ch2.F7.g1" class="centering"/>
          <toccaption class="centering">
            <tag>
              <text fontsize="small">2.7 </text>
            </tag>
            <text fontsize="small">Schemazeichnung eines STK500</text>
            <cite>
              <text fontsize="small">(</text>
              <bibref bibrefs="atmel:ug_stk500" separator=";" show="Number" yyseparator=","/>
              <text fontsize="small">)</text>
            </cite>
          </toccaption>
          <caption class="centering" fontsize="small"><tag>Abbildung 2.7: </tag>Schemazeichnung eines STK500<cite>(<bibref bibrefs="atmel:ug_stk500" separator=";" show="Number" yyseparator=","/>)</cite></caption>
        </figure>
      </subsection>
      <subsection refnum="2.4.2" xml:id="Ch2.S4.SS2" labels="LABEL:sec:AVRISP">
        <title fontsize="small"><tag>2.4.2 </tag>AVRISP mkII</title>
        <para xml:id="Ch2.S4.SS2.p1">
          <p>
            <text fontsize="small">Der </text>
            <emph>
              <text fontsize="small">AVRISP mkII</text>
            </emph>
            <text fontsize="small">[</text>
            <ref labelref="LABEL:sec:V_Hardware"/>
            <text fontsize="small">] ist ein USB-basierter </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">In-System-Programmer</text>
            <text fontsize="small">. Dieser kann anstelle des RS-232 basierten Programmiersystem des STK500 verwendet werden.</text>
            <break/>
            <text fontsize="small">Die Übertragungsgeschwindigkeit des AVRISP mkII ist wesentlich höher als die der seriellen Schnittstelle.
</text>
            <!-- %**** Inhalt/Kapitel_Hardware.tex Line 125 **** 
     %Desweiteren wurde der ATmega324A nicht mehr vom STK500 internen ISP unterstützt.\\-->
            <text fontsize="small">Der AVRISP mkII lässt sich einfach an den Programmierport, eine 6-Polige Stiftleiste, des STK500 anschließen.</text>
          </p>
        </para>
      </subsection>
      <subsection refnum="2.4.3" xml:id="Ch2.S4.SS3" labels="LABEL:sec:MAX232">
        <title fontsize="small"><tag>2.4.3 </tag>MAX232</title>
        <para xml:id="Ch2.S4.SS3.p1">
          <p>
            <text fontsize="small">Um die serielle Schnittstelle am Mikrocontroller nutzen zu können, müssen die Spannungspegel auf die des RS-232 Standards gewandelt werden. Dazu befindet sich auf dem STK500 der </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Pegelwandler</text>
            <text fontsize="small"> MAX232.
Dieser wandelt die Spannungspegel des Mikrocontrollers (typ. 0 V – 5 V </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">TTL</text>
            <note mark="4" role="footnote">
              <text fontsize="small">Transistor-Transistor-Logik</text>
            </note>
            <text fontsize="small">) auf die Spannungspegel des RS-232 Standards (typ. -12 V – +12 V).
 </text>
            <!-- %Hardware -->
          </p>
        </para>
      </subsection>
    </section>
  </chapter>
  <chapter frefnum="Kapitel 3" refnum="3" xml:id="Ch3" labels="LABEL:cha:Software">
    <title fontsize="small"><tag>Kapitel 3 </tag>Vorstellung der vorhandenen Software</title>
    <toctitle>
      <tag>
        <text fontsize="small">3 </text>
      </tag>
      <text fontsize="small">Vorstellung der vorhandenen Software</text>
    </toctitle>
    <section refnum="3.1" xml:id="Ch3.S1" labels="LABEL:sec:RapidForm">
      <title fontsize="small"><tag>3.1 </tag>RapidForm2004</title>
      <para xml:id="Ch3.S1.p1">
        <p>
          <text fontsize="small">Zur Erfassung von 3D-Modellen am PC steht die Software </text>
          <emph>
            <text fontsize="small">RapidForm2004</text>
          </emph>
          <text fontsize="small">[</text>
          <ref labelref="LABEL:sec:V_Software"/>
          <text fontsize="small">] zur Verfügung. Diese ist zur Erfassung und Bearbeitung von 3D-Modellen gedacht. Sie bietet umfangreiche Möglichkeiten die aufgenommenen Modelle zu verbessern, zu verändern, zu vermessen und in verschiedene Formate zu exportieren.</text>
          <break/>
          <text fontsize="small">Mittels eines </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">Add-In</text>
          <text fontsize="small"> kann der VI-900 angesteuert und aufgenommenen Daten ausgelesen werden. Weiterhin kann das Add-In über eine RS-232-Schnittstelle verschiedene Drehtische ansteuern.</text>
        </p>
      </para>
    </section>
    <section refnum="3.2" xml:id="Ch3.S2" labels="LABEL:sec:Entwicklungsumgebung">
      <title fontsize="small"><tag>3.2 </tag>Entwicklungsumgebung</title>
      <para xml:id="Ch3.S2.p1">
        <p>
          <text fontsize="small">Die von Atmel bereitgestellte Entwicklungsumgebung </text>
          <emph>
            <text fontsize="small">AVR Studio 5</text>
          </emph>
          <text fontsize="small">[</text>
          <ref labelref="LABEL:sec:V_Software"/>
          <text fontsize="small">] besteht aus einem Editor, einem Compiler und einer Programmiersoftware. Der Editor bietet Komfortfunktionen wie </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">Syntaxhighlighting</text>
          <text fontsize="small">, Autovervollständigung und Projektmanagement. Der Compiler übersetzt den Quelltext in einen maschinenlesbaren Code und die Programmiersoftware kann diesen auf einen Mikrocontroller spielen.</text>
        </p>
      </para>
    </section>
    <section refnum="3.3" xml:id="Ch3.S3" labels="LABEL:sec:Terminal">
      <title fontsize="small"><tag>3.3 </tag>Terminalprogramme</title>
      <para xml:id="Ch3.S3.p1">
        <p>
          <text fontsize="small">Zur Kommunikation über die RS-232-Schnittstelle steht das Programm </text>
          <emph>
            <text fontsize="small">Hypterminal</text>
          </emph>
          <text fontsize="small">[</text>
          <ref labelref="LABEL:sec:V_Software"/>
          <text fontsize="small">] zur Verfügung. Dieses wurde im Verlauf des Projekts durch das wesentlich umfangreichere Open Source Programm </text>
          <emph>
            <text fontsize="small">Putty</text>
          </emph>
          <text fontsize="small">[</text>
          <ref labelref="LABEL:sec:V_Software"/>
          <text fontsize="small">] abgelöst.
 </text>
          <!-- %Software -->
        </p>
      </para>
    </section>
  </chapter>
  <chapter frefnum="Kapitel 4" refnum="4" xml:id="Ch4" labels="LABEL:cha:Arbeit">
    <title fontsize="small"><tag>Kapitel 4 </tag>Zeitlicher Arbeitsablauf</title>
    <toctitle>
      <tag>
        <text fontsize="small">4 </text>
      </tag>
      <text fontsize="small">Zeitlicher Arbeitsablauf</text>
    </toctitle>
    <para xml:id="Ch4.p1">
      <p>
        <text fontsize="small">Dieses Kapitel spiegelt den chronologischen Ablauf des Projektes wieder und zeigt die Schritte auf, die notwendig waren um den Mikrocontroller so zu programmieren, dass dieser die Kommunikation zwischen RapidForm2004 und der vorhandenen Schrittmotorkarte ermöglicht. So das er sozusagen als Übersetzer für die unterschiedlichen Befehlssätze von RapidForm2004 und dem der Schrittmotorkarte fungiert.
</text>
        <!-- %\begin{Tipp} -->
        <text fontsize="small">Die Codelistings in diesem Kapitel sind thematisch zusammen gefasst und gekürzt um die Lesbarkeit und das Verständnis zu gewährleisten. Ein komplettes Codelisting des Hauptprogramms befindet sich im Anhang </text>
        <ref labelref="LABEL:sec:main.c"/>
        <text fontsize="small">. Der komplette Code, mit allen Bibliotheken, liegt dem Praxisbericht als CD oder Archiv bei.
</text>
        <!-- %\end{Tipp} -->
        <text fontsize="small">Kapitel </text>
        <ref labelref="LABEL:sec:Erste_Schritte"/>
        <text fontsize="small"> beschreibt die Programmierung des Mikrocontrollers, welche die notwendigen Grundvoraussetzungen für dieses Projekt schafft. Das Ziel dieser Programmierung besteht darin die geforderten Komponenten, LEDs, LC-Display, Taster und serielle Schnittstellen im Mikrocontroller nutzbar zu machen.</text>
        <break/>
        <text fontsize="small">Kapitel </text>
        <ref labelref="LABEL:sec:Protokolle"/>
        <text fontsize="small"> beschreibt die Erarbeitung der Befehlssätze die die Software RapidForm2004 enthält um mit den von ihr unterstützten Schrittmotorkarten zu kommunizieren. Auch der Befehlssatz zur Kommunikation zwischen dem Mikrocontroller und der Schrittmotorkarte wird beschrieben.</text>
        <break/>
        <text fontsize="small">Kapitel </text>
        <ref labelref="LABEL:sec:Komm_SM"/>
        <text fontsize="small"> beschreibt wie der Mikrocontroller diesen Befehlssatz für die Kommunikation mit der vorhandenen Schrittmotorkarte nutzt.</text>
        <break/>
        <text fontsize="small">Kapitel </text>
        <ref labelref="LABEL:sec:Verbesserung_Hardware"/>
        <text fontsize="small"> gibt die Schritte zur Entwicklung und Verbesserung der Hardware, um diese so zu erweitern, dass sie den Vorgaben entspricht, wieder.</text>
        <break/>
        <text fontsize="small">Kapitel </text>
        <ref labelref="LABEL:sec:Komm_RF2004"/>
        <text fontsize="small"> erläutert die Kommunikation zwischen dem Mikrocontroller und RapidForm2004. </text>
        <break/>
        <text fontsize="small">Kapitel </text>
        <ref labelref="LABEL:sec:Auswerten_RF"/>
        <text fontsize="small"> beschreibt, wie die vorherigen Kapitel zusammenspielen, sodass eine reibungslose Kommunikation zwischen RapidForm2004 und der vorhandenen Schrittmotorkarte möglich ist.</text>
        <break/>
        <text fontsize="small">Kapitel </text>
        <ref labelref="LABEL:sec:Platinenlayout"/>
        <text fontsize="small"> beschreibt dann das Erstellen des Platinenlayouts und das Fertigen des Einschubs.</text>
      </p>
    </para>
    <section refnum="4.1" xml:id="Ch4.S1" labels="LABEL:sec:Erste_Schritte">
      <title fontsize="small"><tag>4.1 </tag>Bereitstellen grundlegender Funktionalitäten</title>
      <para xml:id="Ch4.S1.p1">
        <p>
          <text fontsize="small">Im ersten Schritt ging es darum, den Mikrocontroller so zu programmieren, dass dieser die für dieses Projekt grundlegenden Funktionalitäten bereitstellen kann.</text>
          <break/>
          <text fontsize="small">Der Mikrocontroller befand sich vorerst auf dem </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">STK500</text>
          <text fontsize="small">(siehe Kapitel </text>
          <ref labelref="LABEL:sec:STK500"/>
          <text fontsize="small">). Um dessen Komponenten im Mikrocontroller nutzen zu können, müssen dafür Register initialisiert werden oder Funktionalitäten wie z.B. Bibliotheken für das LC-Display bereit gestellt werden.</text>
          <break/>
          <text fontsize="small">Die folgenden Kapitel beschreiben den Programmcode, der notwendig ist um diese Funktionalitäten bereitzustellen.</text>
        </p>
      </para>
      <subsection refnum="4.1.1" xml:id="Ch4.S1.SS1" labels="LABEL:sec:Taster">
        <title fontsize="small"><tag>4.1.1 </tag>Taster</title>
        <para xml:id="Ch4.S1.SS1.p1">
          <p>
            <text fontsize="small">Um die Taster des STK500 im Mikrocontroller nutzen zu können müssen diese mit dem Mikrocontroller verbunden und entprellt</text>
            <note mark="5" role="footnote">
              <text fontsize="small">Als </text>
              <text backgroundcolor="#D9D9FF" fontsize="small">Prellen</text>
              <text fontsize="small"> bezeichnet man das ungewollte mehrfache Schalten eines mechanischen Schalters bei einem einzelnen Schaltvorgang.</text>
            </note>
            <text fontsize="small"> werden.</text>
            <break/>
            <text fontsize="small">Dazu muss die Stiftleiste von </text>
            <emph>
              <text fontsize="small">PortA</text>
            </emph>
            <text fontsize="small"> mit der Stiftleiste für die Taster verbunden werden. Das Entprellen der Taster wird softwareseitig realisiert. Dies bietet sich bei einem Mikrocontroler an. Dazu gibt es vorgefertigte Bibliotheken die genutzt werden können. Im Projekt wurde die Bibliothek </text>
            <text backgroundcolor="#FFFFE6" fontsize="small" font="typewriter">Debounce.h</text>
            <cite>
              <text fontsize="small">(</text>
              <bibref bibrefs="uc:dannegger" separator=";" show="Number" yyseparator=","/>
              <text fontsize="small">)</text>
            </cite>
            <text fontsize="small"> von Peter Dannegger genutzt. Sie ist sehr komfortabl und funktionsreich und basiert auf </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Timer-Interrupts</text>
            <text fontsize="small">. Um sie zu nutzen wird die Datei </text>
            <text backgroundcolor="#FFFFE6" fontsize="small" font="typewriter">Debounce.h</text>
            <text fontsize="small"> in das Projektverzeichnis kopiert und mit Zeile 1 des Codelisting </text>
            <ref labelref="LABEL:lst:Taster"/>
            <text fontsize="small"> in das Programm eingebunden. Die Zeilen 2-10 spiegeln die Funktion zum Initialisieren der Bibliothek wieder. Diese Zeilen müssen auf den jeweils verwendeten Mikrocontroller angepasst werden.</text>
            <break/>
            <text fontsize="small">Durch die Verwendung der Bibliothek ist es möglich Funktionen wie z.B. </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">get_key_press()</text>
            <text fontsize="small"> zu nutzen um den Status der Taster prellfrei auszulesen und diese Information für Entscheidungen im Programmablauf zu verwenden.
</text>
            <!-- %**** Inhalt/Kapitel_AufbauderArbeit.tex Line 25 **** -->
            <text fontsize="small"></text>
          </p>
        </para>
        <listing class="ltx_lstlisting ltx_lst_language_C" refnum="1" xml:id="LST1" labels="LABEL:lst:Taster">
          <toccaption>
            <tag>
              <text fontsize="small">1 </text>
            </tag>
            <text fontsize="small">Taster</text>
          </toccaption>
          <caption fontsize="small"><tag>Listing 1: </tag>Taster</caption>
          <tabular>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">1</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">keywordstyle <text class="ltx_lst_directive">include</text><text class="ltx_lst_space"> </text>"<text color="#000000">Debounce.h</text>"<text class="ltx_lst_space">                          </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Taster<text class="ltx_lst_space"> </text>entprellen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">2</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space">        </text>debounce_init<text class="ltx_lst_space">                </text>(<text class="ltx_lst_keyword" color="#FF0000">void</text>)<text class="ltx_lst_space"> </text>{<text class="ltx_lst_space">    </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Taster<text class="ltx_lst_space"> </text>entprellen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">3</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>KEY_DDR<text class="ltx_lst_space"> </text>&amp;=<text class="ltx_lst_space"> </text>~ALL_KEYS;<text class="ltx_lst_space">                  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">configure<text class="ltx_lst_space"> </text>key<text class="ltx_lst_space"> </text>port<text class="ltx_lst_space"> </text>for<text class="ltx_lst_space"> </text>input</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">4</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>KEY_PORT<text class="ltx_lst_space"> </text>|=<text class="ltx_lst_space"> </text>ALL_KEYS;<text class="ltx_lst_space">                   </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">and<text class="ltx_lst_space"> </text>turn<text class="ltx_lst_space"> </text>on<text class="ltx_lst_space"> </text>pull<text class="ltx_lst_space"> </text>up<text class="ltx_lst_space"> </text>resistors</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">5</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>TCCR0B<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>CS02)<text class="ltx_lst_space"> </text>|<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>CS00);<text class="ltx_lst_space">   </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">divide<text class="ltx_lst_space"> </text>by<text class="ltx_lst_space"> </text>1024</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">6</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">preload<text class="ltx_lst_space"> </text>for<text class="ltx_lst_space"> </text>10ms</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">7</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>TCNT0<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>(uint8_t)<text class="ltx_lst_space"> </text>(int16_t)<text class="ltx_lst_space"> </text>-(F_CPU<text class="ltx_lst_space"> </text>/<text class="ltx_lst_space"> </text>1024<text class="ltx_lst_space"> </text>*<text class="ltx_lst_space"> </text>10<text class="ltx_lst_space"> </text>*<text class="ltx_lst_space"> </text>10e-3<text class="ltx_lst_space"> </text>+<text class="ltx_lst_space"> </text>0.5);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">8</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>TIMSK0<text class="ltx_lst_space"> </text>|=<text class="ltx_lst_space"> </text>1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>TOIE0;<text class="ltx_lst_space">                      </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">enable<text class="ltx_lst_space"> </text>timer<text class="ltx_lst_space"> </text>interrupt</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">9</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>sei();<text class="ltx_lst_space">                                     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">global<text class="ltx_lst_space"> </text>enable<text class="ltx_lst_space"> </text>Interrupts</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">10</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">11</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>(get_key_press(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>KEY4))</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">12</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>menu_select(&amp;menu_context);<text class="ltx_lst_space">            </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Aktuellen<text class="ltx_lst_space"> </text>Menuepunkt<text class="ltx_lst_space"> </text>auswaehlen</text></text>
              </td>
            </tr>
          </tabular>
        </listing>
      </subsection>
      <subsection refnum="4.1.2" xml:id="Ch4.S1.SS2" labels="LABEL:sec:LED">
        <title fontsize="small"><tag>4.1.2 </tag>LEDs</title>
        <para xml:id="Ch4.S1.SS2.p1">
          <p>
            <text fontsize="small">LEDs sollen im Programmablauf genutzt werden können, um z.B. Fehler zu signalisieren.</text>
            <break/>
            <text fontsize="small">Dazu muss zuerst die Stiftleiste von </text>
            <emph>
              <text fontsize="small">PortB</text>
            </emph>
            <text fontsize="small"> mit der LED Stiftleiste des STK500 verbunden werden. Um LEDs an </text>
            <emph>
              <text fontsize="small">PortB</text>
            </emph>
            <text fontsize="small"> betreiben zu können müssen die entsprechenden Pins im </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Register</text>
            <text fontsize="small"> </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">DDRB</text>
            <text fontsize="small"> als Ausgänge definiert werden. Dies geschieht in Zeile 1 des Codelisting </text>
            <ref labelref="LABEL:lst:LED"/>
            <text fontsize="small">. Die Bibliothek zum Entprellen der Taster nutzt die Variablen </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">LED_DDR</text>
            <text fontsize="small"> und </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">LED_PORT</text>
            <text fontsize="small">. Diese Variablen werden auch hier genutzt um auf die Register zuzugreifen. Dies gewährleistet eine bessere Übersicht. Die Werte im 8-Bit Register </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">LED_PORT</text>
            <text fontsize="small"> spiegeln die Spannungen an den Pins des </text>
            <emph>
              <text fontsize="small">PortB</text>
            </emph>
            <text fontsize="small"> am Mikrocontroller wieder. Da die LEDs auf dem STK500 mit </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">active-low-Logik</text>
            <text fontsize="small"> betrieben werden, muss das jeweilige Bit gelöscht, also auf ’’0’’, gesetzt werden damit die LED leuchtet. Um alle Bits in einem Register zu verändern kann das Register mit einem 2-stelligen Hex-Wert (8-Bit) oder einem 8 stelligen binären Bitmuster beschrieben werden. In Zeile 2 werden alle Bits mit dem Hex-Wert </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">0xFF</text>
            <text fontsize="small"> auf ’’1’’ gesetzt und somit alle LEDs ausgeschaltet. Um ein einzelnes Bit zu verändern, können die Anweisungen in den Zeilen 3 und 4 verwendet werden. Dabei steht das ’’X’’ in </text>
            <emph>
              <text fontsize="small">PBX</text>
            </emph>
            <text fontsize="small"> für die x-te Stelle im Register die gesetzt oder gelöscht werden soll.</text>
            <break/>
            <text fontsize="small">Es ist damit möglich im Programmablauf einzelne LEDs anzusteuern.</text>
          </p>
        </para>
        <listing class="ltx_lstlisting ltx_lst_language_C" refnum="2" xml:id="LST2" labels="LABEL:lst:LED">
          <toccaption>
            <tag>
              <text fontsize="small">2 </text>
            </tag>
            <text fontsize="small">LEDs</text>
          </toccaption>
          <caption fontsize="small"><tag>Listing 2: </tag>LEDs</caption>
          <tabular>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">1</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">LED_DDR<text class="ltx_lst_space">   </text>=<text class="ltx_lst_space"> </text>0xFF;<text class="ltx_lst_space">                 </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">LED<text class="ltx_lst_space"> </text>Port<text class="ltx_lst_space"> </text>Richtung<text class="ltx_lst_space"> </text>definieren<text class="ltx_lst_space"> </text>(Ausgang)</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">2</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">LED_PORT<text class="ltx_lst_space">  </text>=<text class="ltx_lst_space"> </text>0xFF;<text class="ltx_lst_space">                  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">LEDs<text class="ltx_lst_space"> </text>ausschalten</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">3</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">LED_PORT<text class="ltx_lst_space"> </text>&amp;=<text class="ltx_lst_space"> </text>~((1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>PBX));<text class="ltx_lst_space">         </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">loescht<text class="ltx_lst_space"> </text>Bit<text class="ltx_lst_space"> </text>an<text class="ltx_lst_space"> </text>PortB<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>LED<text class="ltx_lst_space"> </text>an</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">4</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">LED_PORT<text class="ltx_lst_space"> </text>|=<text class="ltx_lst_space">  </text>((1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>PBX));<text class="ltx_lst_space">         </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">setzt<text class="ltx_lst_space">  </text>Bit<text class="ltx_lst_space"> </text>an<text class="ltx_lst_space"> </text>PortB<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>LED<text class="ltx_lst_space"> </text>aus</text></text>
              </td>
            </tr>
          </tabular>
        </listing>
      </subsection>
      <subsection refnum="4.1.3" xml:id="Ch4.S1.SS3" labels="LABEL:sec:LCD">
        <title fontsize="small"><tag>4.1.3 </tag>Ansteuerung des LC-Display</title>
        <para xml:id="Ch4.S1.SS3.p1">
          <p>
            <text fontsize="small">Um den aktuellen Status des Motor komfortabel in Textform anzeigen zu können und die Schrittmotorkarte </text>
            <emph>
              <text fontsize="small">menübasiert</text>
            </emph>
            <text fontsize="small"> ansteuern zu können wird ein </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">LC-Display</text>
            <text fontsize="small"> verwendet. Das verwendete Display ist </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">alpha numerisch</text>
            <text fontsize="small"> und kann 4x20 Zeichen anzeigen.</text>
            <break/>
            <text fontsize="small">Die meisten LC-Displays werden auf die gleiche Weise angesteuert. Hier gibt es fertige Bibliotheken die frei genutzt werden können. Im Projekt wurde die Bibliothek von Peter Fleury </text>
            <cite>
              <text fontsize="small">(</text>
              <bibref bibrefs="uc:fleury" separator=";" show="Number" yyseparator=","/>
              <text fontsize="small">)</text>
            </cite>
            <text fontsize="small"> verwendet. Die Bibliothek wird heruntergeladen und die Dateien </text>
            <text backgroundcolor="#FFFFE6" fontsize="small" font="typewriter">lcd.c</text>
            <text fontsize="small"> und </text>
            <text backgroundcolor="#FFFFE6" fontsize="small" font="typewriter">lcd.h</text>
            <text fontsize="small"> in das Projektverzeichnis entpackt. Die Bibliothek wird mit </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">#include ’’lcd.h’’</text>
            <text fontsize="small"> eingebunden. In der </text>
            <text backgroundcolor="#FFFFE6" fontsize="small" font="typewriter">lcd.h</text>
            <text fontsize="small"> müssen dann noch die Daten des Displays eingegeben werden (siehe Codelisting </text>
            <ref labelref="LABEL:lst:LCD"/>
            <text fontsize="small"> Zeilen 2–10).</text>
            <break/>
            <text fontsize="small">Danach kann das Display im Programm mit den Befehlen aus Zeile 12–21 angesteuert werden.</text>
          </p>
        </para>
        <listing class="ltx_lstlisting ltx_lst_language_C" refnum="3" xml:id="LST3" labels="LABEL:lst:LCD">
          <toccaption>
            <tag>
              <text fontsize="small">3 </text>
            </tag>
            <text fontsize="small">lcd.h (Auszug)</text>
          </toccaption>
          <caption fontsize="small"><tag>Listing 3: </tag>lcd.h (Auszug)</caption>
          <tabular>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">1</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">/*<text color="#008000">*&lt;<text class="ltx_lst_space"> </text>Use<text class="ltx_lst_space"> </text>0<text class="ltx_lst_space"> </text>for<text class="ltx_lst_space"> </text>HD44780<text class="ltx_lst_space"> </text>controller,<text class="ltx_lst_space">  </text>1<text class="ltx_lst_space"> </text>for<text class="ltx_lst_space"> </text>KS0073<text class="ltx_lst_space"> </text>controller<text class="ltx_lst_space"> </text></text>*/</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">2</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>LCD_CONTROLLER_KS0073<text class="ltx_lst_space"> </text>0</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">3</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>LCD_LINES<text class="ltx_lst_space">           </text>4<text class="ltx_lst_space">          </text>/*<text color="#008000">*&lt;<text class="ltx_lst_space"> </text>number<text class="ltx_lst_space"> </text>of<text class="ltx_lst_space"> </text>visible<text class="ltx_lst_space"> </text>lines<text class="ltx_lst_space"> </text>of<text class="ltx_lst_space"> </text>the<text class="ltx_lst_space"> </text>display<text class="ltx_lst_space"> </text></text>*/</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">4</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>LCD_DISP_LENGTH<text class="ltx_lst_space">    </text>19<text class="ltx_lst_space">        </text>/*<text color="#008000">*&lt;<text class="ltx_lst_space"> </text>visibles<text class="ltx_lst_space"> </text>characters<text class="ltx_lst_space"> </text>per<text class="ltx_lst_space"> </text>line<text class="ltx_lst_space"> </text>of<text class="ltx_lst_space"> </text>the<text class="ltx_lst_space"> </text>display<text class="ltx_lst_space"> </text></text>*/</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">5</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>LCD_LINE_LENGTH<text class="ltx_lst_space">  </text>0x40<text class="ltx_lst_space">           </text>/*<text color="#008000">*&lt;<text class="ltx_lst_space"> </text>internal<text class="ltx_lst_space"> </text>line<text class="ltx_lst_space"> </text>length<text class="ltx_lst_space"> </text>of<text class="ltx_lst_space"> </text>the<text class="ltx_lst_space"> </text>display<text class="ltx_lst_space">   </text></text>*/</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">6</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>LCD_START_LINE1<text class="ltx_lst_space">  </text>0x00<text class="ltx_lst_space">           </text>/*<text color="#008000">*&lt;<text class="ltx_lst_space"> </text>DDRAM<text class="ltx_lst_space"> </text>address<text class="ltx_lst_space"> </text>of<text class="ltx_lst_space"> </text>first<text class="ltx_lst_space"> </text>char<text class="ltx_lst_space"> </text>of<text class="ltx_lst_space"> </text>line<text class="ltx_lst_space"> </text>1<text class="ltx_lst_space"> </text></text>*/</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">7</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>LCD_START_LINE2<text class="ltx_lst_space">  </text>0x40<text class="ltx_lst_space">           </text>/*<text color="#008000">*&lt;<text class="ltx_lst_space"> </text>DDRAM<text class="ltx_lst_space"> </text>address<text class="ltx_lst_space"> </text>of<text class="ltx_lst_space"> </text>first<text class="ltx_lst_space"> </text>char<text class="ltx_lst_space"> </text>of<text class="ltx_lst_space"> </text>line<text class="ltx_lst_space"> </text>2<text class="ltx_lst_space"> </text></text>*/</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">8</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>LCD_START_LINE3<text class="ltx_lst_space">  </text>0x14<text class="ltx_lst_space">           </text>/*<text color="#008000">*&lt;<text class="ltx_lst_space"> </text>DDRAM<text class="ltx_lst_space"> </text>address<text class="ltx_lst_space"> </text>of<text class="ltx_lst_space"> </text>first<text class="ltx_lst_space"> </text>char<text class="ltx_lst_space"> </text>of<text class="ltx_lst_space"> </text>line<text class="ltx_lst_space"> </text>3<text class="ltx_lst_space"> </text></text>*/</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">9</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>LCD_START_LINE4<text class="ltx_lst_space">  </text>0x54<text class="ltx_lst_space">           </text>/*<text color="#008000">*&lt;<text class="ltx_lst_space"> </text>DDRAM<text class="ltx_lst_space"> </text>address<text class="ltx_lst_space"> </text>of<text class="ltx_lst_space"> </text>first<text class="ltx_lst_space"> </text>char<text class="ltx_lst_space"> </text>of<text class="ltx_lst_space"> </text>line<text class="ltx_lst_space"> </text>4<text class="ltx_lst_space"> </text></text>*/</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">10</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>LCD_WRAP_LINES<text class="ltx_lst_space">      </text>1<text class="ltx_lst_space">       </text>/*<text color="#008000">*&lt;<text class="ltx_lst_space"> </text>0:<text class="ltx_lst_space"> </text>no<text class="ltx_lst_space"> </text>wrap,<text class="ltx_lst_space"> </text>1:<text class="ltx_lst_space"> </text>wrap<text class="ltx_lst_space"> </text>at<text class="ltx_lst_space"> </text>end<text class="ltx_lst_space"> </text>of<text class="ltx_lst_space"> </text>visibile<text class="ltx_lst_space"> </text>line<text class="ltx_lst_space"> </text></text>*/</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">11</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Funktionen<text class="ltx_lst_space"> </text>zum<text class="ltx_lst_space"> </text>Ansteuern<text class="ltx_lst_space"> </text>des<text class="ltx_lst_space"> </text>Displays:</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">12</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">extern</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space"> </text>lcd_init(uint8_t<text class="ltx_lst_space"> </text>dispAttr);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">13</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">extern</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space"> </text>lcd_clrscr(<text class="ltx_lst_keyword" color="#FF0000">void</text>);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">14</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">extern</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space"> </text>lcd_home(<text class="ltx_lst_keyword" color="#FF0000">void</text>);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">15</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">extern</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space"> </text>lcd_gotoxy(uint8_t<text class="ltx_lst_space"> </text>x,<text class="ltx_lst_space"> </text>uint8_t<text class="ltx_lst_space"> </text>y);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">16</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">extern</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space"> </text>lcd_putc(<text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>c);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">17</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">extern</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space"> </text>lcd_puts(<text class="ltx_lst_keyword" color="#FF0000">const</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>*s);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">18</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">extern</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space"> </text>lcd_puts_p(<text class="ltx_lst_keyword" color="#FF0000">const</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>*progmem_s);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">19</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">extern</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space"> </text>lcd_command(uint8_t<text class="ltx_lst_space"> </text>cmd);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">20</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">extern</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space"> </text>lcd_data(uint8_t<text class="ltx_lst_space"> </text>data);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">21</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>lcd_puts_P(__s)<text class="ltx_lst_space"> </text>lcd_puts_p(PSTR(__s))</text>
              </td>
            </tr>
          </tabular>
        </listing>
      </subsection>
      <subsection refnum="4.1.4" xml:id="Ch4.S1.SS4" labels="LABEL:sec:RS232">
        <title fontsize="small"><tag>4.1.4 </tag>RS-232-Schnittstelle</title>
        <para xml:id="Ch4.S1.SS4.p1">
          <p>
            <text backgroundcolor="#D9D9FF" fontsize="small">RS-232</text>
            <text fontsize="small"> ist der Name der am häufigsten verwendeten seriellen Schnittstelle um Daten zwischen zwei elektronischen Geräten hin und her zu senden. </text>
            <cite>
              <text fontsize="small">(</text>
              <bibref bibrefs="uc:rs232" separator=";" show="Number" yyseparator=","/>
              <text fontsize="small">)</text>
            </cite>
            <break/>
            <text fontsize="small">Auf dem STK500 ist bereits eine serielle Schnittstelle vorbereitet. Um diese nutzen zu können, müssen die Pins 3 und 4 des </text>
            <emph>
              <text fontsize="small">PortC</text>
            </emph>
            <text fontsize="small"> (erster </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">UART</text>
            <text fontsize="small">) des Mikrocontrollers mit der Stiftleiste </text>
            <emph>
              <text fontsize="small">Rx/Tx</text>
            </emph>
            <text fontsize="small"> auf dem STK500 verbunden werden. Eine weitere Schnittstelle wurde auf einem Steckbrett aufgebaut. Diese wurde mit den Pins 1 und 2 des </text>
            <emph>
              <text fontsize="small">PortC</text>
            </emph>
            <text fontsize="small"> (zweiter UART) des Mikrocontrollers verbunden. Um die Schnittstellen im Mikrocontroller nutzen zu können müssen diese noch durch setzen von Bits in den entsprechenden Registern des Mikrocontrollers aktiviert werden.</text>
            <break/>
            <text fontsize="small">Das Codelisting </text>
            <ref labelref="LABEL:lst:RS232"/>
            <text fontsize="small"> teilt sich in 4 wesentliche Bereiche: </text>
            <break/>
          </p>
          <itemize xml:id="Ch4.I1">
            <!-- %**** Inhalt/Kapitel_AufbauderArbeit.tex Line 50 **** -->
            <item xml:id="Ch4.I1.i1">
              <para xml:id="Ch4.I1.i1.p1">
                <p>
                  <text fontsize="small">Zeilen 1 – 2: Setzen der Baudrate und einbinden der benötigten Bibliotheken.</text>
                </p>
              </para>
            </item>
            <item xml:id="Ch4.I1.i2">
              <para xml:id="Ch4.I1.i2.p1">
                <p>
                  <text fontsize="small">Zeilen 3 – 17: Initialisieren der Schnittstellen durch setzen der richtigen Bits in den entsprechenden Registern.</text>
                </p>
              </para>
            </item>
            <item xml:id="Ch4.I1.i3">
              <para xml:id="Ch4.I1.i3.p1">
                <p>
                  <text fontsize="small">Zeilen 18 – 35: Funktionen zum Senden von Daten</text>
                </p>
              </para>
            </item>
            <item xml:id="Ch4.I1.i4">
              <para xml:id="Ch4.I1.i4.p1">
                <p>
                  <text fontsize="small">Zeilen 36 – 65: Funktionen zum Empfangen von Daten</text>
                </p>
              </para>
            </item>
          </itemize>
        </para>
        <listing class="ltx_lstlisting ltx_lst_language_C" refnum="4" xml:id="LST4" labels="LABEL:lst:RS232">
          <toccaption>
            <tag>
              <text fontsize="small">4 </text>
            </tag>
            <text fontsize="small">RS-232</text>
          </toccaption>
          <caption fontsize="small"><tag>Listing 4: </tag>RS-232</caption>
          <tabular>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">1</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>BAUD<text class="ltx_lst_space"> </text>9600<text class="ltx_lst_space">         </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">BAUD<text class="ltx_lst_space"> </text>Rate<text class="ltx_lst_space"> </text>definieren</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">2</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">keywordstyle <text class="ltx_lst_directive">include</text><text class="ltx_lst_space"> </text>&lt;util/setbaud.h&gt;<text class="ltx_lst_space">  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">UART<text class="ltx_lst_space"> </text>Funktionen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">3</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">UART<text class="ltx_lst_space"> </text>Initialisieren</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">4</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space">        </text>uart_init<text class="ltx_lst_space">                </text>()<text class="ltx_lst_space"> </text>{</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">5</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">UART<text class="ltx_lst_space"> </text>0<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>IN<text class="ltx_lst_space"> </text>(Rapidform<text class="ltx_lst_space"> </text>Software/Terminal)</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">6</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>UBRR0H<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>UBRRH_VALUE;</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">7</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>UBRR0L<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>UBRRL_VALUE;</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">8</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>UCSR0C<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>(3<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>UCSZ00);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">9</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>UCSR0B<text class="ltx_lst_space"> </text>|=<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>TXEN0);<text class="ltx_lst_space">    </text>//<text color="#008000">Transmitter<text class="ltx_lst_space"> </text>Enabled</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">10</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>UCSR0B<text class="ltx_lst_space"> </text>|=<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>RXEN0);<text class="ltx_lst_space">    </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">UART<text class="ltx_lst_space"> </text>RX<text class="ltx_lst_space"> </text>einschalten</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">11</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">UART<text class="ltx_lst_space"> </text>1<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>OUT<text class="ltx_lst_space"> </text>(Stepper<text class="ltx_lst_space"> </text>Karte/Drehtisch)</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">12</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>UBRR1H<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>UBRRH_VALUE;</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">13</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>UBRR1L<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>UBRRL_VALUE;</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">14</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>UCSR1C<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>(3<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>UCSZ00);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">15</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>UCSR1B<text class="ltx_lst_space"> </text>|=<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>TXEN1);<text class="ltx_lst_space">    </text>//<text color="#008000">Transmitter<text class="ltx_lst_space"> </text>Enabled</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">16</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>UCSR1B<text class="ltx_lst_space"> </text>|=<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>RXEN1);<text class="ltx_lst_space">    </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">UART<text class="ltx_lst_space"> </text>RX<text class="ltx_lst_space"> </text>einschalten</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">17</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">18</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">UART<text class="ltx_lst_space"> </text>Zeichen<text class="ltx_lst_space"> </text>senden</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">19</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space">        </text>uart_put_charater<text class="ltx_lst_space">        </text>(<text class="ltx_lst_keyword" color="#FF0000">unsigned</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>c,<text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space"> </text>dir)<text class="ltx_lst_space"> </text>{</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">20</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>(dir<text class="ltx_lst_space"> </text>==<text class="ltx_lst_space"> </text>D_RapidForm)<text class="ltx_lst_space"> </text>{<text class="ltx_lst_space">       </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">To<text class="ltx_lst_space"> </text>Rapidform</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">21</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">while</text><text class="ltx_lst_space"> </text>(!(UCSR0A<text class="ltx_lst_space"> </text>&amp;<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>UDRE0)))<text class="ltx_lst_space"> </text>{}//<text color="#008000">warten<text class="ltx_lst_space"> </text>bis<text class="ltx_lst_space"> </text>Senden<text class="ltx_lst_space"> </text>moeglich</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">22</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>UDR0<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>c;<text class="ltx_lst_space">            </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">sende<text class="ltx_lst_space"> </text>Zeichen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">23</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">24</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">else</text><text class="ltx_lst_space"> </text>{<text class="ltx_lst_space">                              </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">To<text class="ltx_lst_space"> </text>Stepper</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">25</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">while</text><text class="ltx_lst_space"> </text>(!(UCSR1A<text class="ltx_lst_space"> </text>&amp;<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>UDRE1)))<text class="ltx_lst_space"> </text>{}//<text color="#008000">warten<text class="ltx_lst_space"> </text>bis<text class="ltx_lst_space"> </text>Senden<text class="ltx_lst_space"> </text>moeglich</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">26</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>UDR1<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>c;<text class="ltx_lst_space">            </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">sende<text class="ltx_lst_space"> </text>Zeichen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">27</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">28</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">29</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">UART<text class="ltx_lst_space"> </text>String<text class="ltx_lst_space"> </text>senden</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">30</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space">        </text>uart_put_string<text class="ltx_lst_space">                </text>(<text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>*s,<text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space"> </text>dir)<text class="ltx_lst_space"> </text>{</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">31</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">while</text><text class="ltx_lst_space"> </text>(*s){<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">so<text class="ltx_lst_space"> </text>lange<text class="ltx_lst_space"> </text>*s<text class="ltx_lst_space"> </text>!=<text class="ltx_lst_space"> </text>’\0’<text class="ltx_lst_space"> </text>Terminierungszeichen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">32</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>uart_put_charater(*s,<text class="ltx_lst_space"> </text>dir);<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Zeichenweise<text class="ltx_lst_space"> </text>senden</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">33</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>s++;</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">34</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">35</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">36</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">UART<text class="ltx_lst_space"> </text>Zeichen<text class="ltx_lst_space"> </text>empfangen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">37</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space">        </text>uart_get_character<text class="ltx_lst_space">        </text>(<text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space"> </text>dir)<text class="ltx_lst_space"> </text>{</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">38</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>(dir<text class="ltx_lst_space"> </text>==<text class="ltx_lst_space"> </text>D_RapidForm)<text class="ltx_lst_space"> </text>{<text class="ltx_lst_space">       </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Aus<text class="ltx_lst_space"> </text>RapidForm<text class="ltx_lst_space"> </text>Register<text class="ltx_lst_space"> </text>auslesen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">39</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">while</text><text class="ltx_lst_space"> </text>(!(UCSR0A<text class="ltx_lst_space"> </text>&amp;<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>RXC0)))<text class="ltx_lst_space"> </text>;<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">warten<text class="ltx_lst_space"> </text>bis<text class="ltx_lst_space"> </text>Zeichen<text class="ltx_lst_space"> </text>verfuegbar</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">40</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">return</text><text class="ltx_lst_space"> </text>UDR0;<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Zeichen<text class="ltx_lst_space"> </text>aus<text class="ltx_lst_space"> </text>UDR<text class="ltx_lst_space"> </text>an<text class="ltx_lst_space"> </text>Aufrufer<text class="ltx_lst_space"> </text>zurueckgeben</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">41</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">42</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>(dir<text class="ltx_lst_space"> </text>==<text class="ltx_lst_space"> </text>D_Stepper)<text class="ltx_lst_space"> </text>{<text class="ltx_lst_space">               </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Aus<text class="ltx_lst_space"> </text>Schrittmotor<text class="ltx_lst_space"> </text>Register<text class="ltx_lst_space"> </text>auslesen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">43</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">while</text><text class="ltx_lst_space"> </text>(!(UCSR1A<text class="ltx_lst_space"> </text>&amp;<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>RXC1)))<text class="ltx_lst_space"> </text>;<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">warten<text class="ltx_lst_space"> </text>bis<text class="ltx_lst_space"> </text>Zeichen<text class="ltx_lst_space"> </text>verfuegbar</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">44</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">return</text><text class="ltx_lst_space"> </text>UDR1;<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Zeichen<text class="ltx_lst_space"> </text>aus<text class="ltx_lst_space"> </text>UDR<text class="ltx_lst_space"> </text>an<text class="ltx_lst_space"> </text>Aufrufer<text class="ltx_lst_space"> </text>zurueckgeben</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">45</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">46</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">return</text><text class="ltx_lst_space"> </text>-1;<text class="ltx_lst_space">    </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Wenn<text class="ltx_lst_space"> </text>nichts<text class="ltx_lst_space"> </text>ausgelesen<text class="ltx_lst_space"> </text>wurde<text class="ltx_lst_space"> </text>-1<text class="ltx_lst_space"> </text>zurueckgeben</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">47</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">48</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">UART<text class="ltx_lst_space"> </text>String<text class="ltx_lst_space"> </text>empfangen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">49</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space">        </text>uart_get_string<text class="ltx_lst_space">                </text>(<text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>*<text class="ltx_lst_space"> </text>string_in,<text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space"> </text>dir)<text class="ltx_lst_space"> </text>{</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">50</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>c;<text class="ltx_lst_space">              </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Einzelnes<text class="ltx_lst_space"> </text>Zeichen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">51</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space"> </text>i<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>0;<text class="ltx_lst_space">  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Zaehlvariable</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">52</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">do</text><text class="ltx_lst_space"> </text>{</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">53</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>c<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>uart_get_character(dir);<text class="ltx_lst_space">  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Einzelnes<text class="ltx_lst_space"> </text>Zeichen<text class="ltx_lst_space"> </text>holen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">54</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>(c<text class="ltx_lst_space"> </text>!=<text class="ltx_lst_space"> </text>’<text color="#000000">\r</text>’)<text class="ltx_lst_space"> </text>{<text class="ltx_lst_space">           </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Wenn<text class="ltx_lst_space"> </text>keinn<text class="ltx_lst_space"> </text>\r</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">55</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>*string_in<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>c;<text class="ltx_lst_space">           </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Zeichen<text class="ltx_lst_space"> </text>in<text class="ltx_lst_space"> </text>Empfangsstring<text class="ltx_lst_space"> </text>schreiben</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">56</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>string_in<text class="ltx_lst_space"> </text>+=<text class="ltx_lst_space"> </text>1;<text class="ltx_lst_space">          </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Adresse<text class="ltx_lst_space"> </text>des<text class="ltx_lst_space"> </text>Empfangsstring<text class="ltx_lst_space"> </text>um<text class="ltx_lst_space"> </text>1<text class="ltx_lst_space"> </text>ink</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">57</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>i++;<text class="ltx_lst_space">                     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Zaehlvariable<text class="ltx_lst_space"> </text>um<text class="ltx_lst_space"> </text>1<text class="ltx_lst_space"> </text>erhoehen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">58</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">59</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}<text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">while</text><text class="ltx_lst_space"> </text>(i<text class="ltx_lst_space"> </text>&lt;<text class="ltx_lst_space"> </text>100<text class="ltx_lst_space"> </text>&amp;&amp;<text class="ltx_lst_space"> </text>c<text class="ltx_lst_space"> </text>!=<text class="ltx_lst_space"> </text>’<text color="#000000">\r</text>’<text class="ltx_lst_space"> </text>&amp;&amp;<text class="ltx_lst_space"> </text>c<text class="ltx_lst_space"> </text>!=<text class="ltx_lst_space"> </text>’<text color="#000000">\n</text>’);<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">So<text class="ltx_lst_space"> </text>lange<text class="ltx_lst_space"> </text>bis<text class="ltx_lst_space"> </text>\r<text class="ltx_lst_space"> </text>\n<text class="ltx_lst_space"> </text>o.<text class="ltx_lst_space"> </text>&gt;100<text class="ltx_lst_space"> </text>Zeichen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">60</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>*string_in<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>’<text color="#000000">\0</text>’;<text class="ltx_lst_space">                       </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">0<text class="ltx_lst_space"> </text>Terminieren</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">61</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>(dir<text class="ltx_lst_space"> </text>==<text class="ltx_lst_space"> </text>D_Stepper)</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">62</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>LED_PORT<text class="ltx_lst_space"> </text>|=<text class="ltx_lst_space"> </text>(<text class="ltx_lst_space"> </text>1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>LED3<text class="ltx_lst_space"> </text>);<text class="ltx_lst_space">  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">"Daten<text class="ltx_lst_space"> </text>Vorhanden"<text class="ltx_lst_space"> </text>LED<text class="ltx_lst_space"> </text>ausschalten</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">63</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">
                  <text class="ltx_lst_space">        </text>
                  <text class="ltx_lst_keyword" color="#FF0000">else</text>
                </text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">64</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>LED_PORT<text class="ltx_lst_space"> </text>|=<text class="ltx_lst_space"> </text>(<text class="ltx_lst_space"> </text>1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>LED2<text class="ltx_lst_space"> </text>);<text class="ltx_lst_space">  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">"Daten<text class="ltx_lst_space"> </text>Vorhanden"<text class="ltx_lst_space"> </text>LED<text class="ltx_lst_space"> </text>ausschalten</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">65</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
          </tabular>
        </listing>
        <para xml:id="Ch4.S1.SS4.p2">
          <p>
            <text fontsize="small">Damit stehen die essentiellen Funktionen </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">uart_put_string(dir)</text>
            <text fontsize="small"> und </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">uart_get_string(dir)</text>
            <text fontsize="small"> zur Verfügung. Mit diesen kann der Mikrocontroller über die serielle Schnittstelle Strings senden und empfangen. Der Parameter </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">dir</text>
            <text fontsize="small"> gibt dabei die Schnittstelle an über die gesendet oder empfangen werden soll.</text>
          </p>
        </para>
      </subsection>
    </section>
    <section refnum="4.2" xml:id="Ch4.S2" labels="LABEL:sec:Protokolle">
      <title fontsize="small"><tag>4.2 </tag>Befehlssätze</title>
      <para xml:id="Ch4.S2.p1">
        <p>
          <text fontsize="small">Das zu erreichende Ziel bestand darin, dass RapidForm2004 mit dem Mikrocontroller und dieser mit der Schrittmotorkarte kommunizieren können sollte. Die Kommunikation läuft dabei über Befehle ab, die über die serielle Schnittstelle gesendet werden.
</text>
          <!-- %Die Befehlssätze die im Projekt verwendet werden um mit den Schrittmotorsteuerungen zu kommunizieren, werden als Protokolle bezeichnet. In diesen Protokollen ist geregelt, welche Befehle ausgesendet werden müssen und welche Antworten auf diese Befehle erwartet werden.\\ -->
          <text fontsize="small">Jede Schrittmotorkarte verwendet eigenen Befehle. Alle Befehle für eine Schrittmotorkarte werden im Folgenden als Befehlssatz bezeichnet. Die Software RapidForm2004 kennt mehrere Befehlssätze um verschiedene Schrittmotorkarten anzusteuern. Der Befehlssatz der vorhandenen Schrittmotorkarten zum Ansteuern der Motoren des Drehtisches ist jedoch nicht in RapidForm2004 vorhanden.</text>
          <break/>
          <text fontsize="small">Nun soll der Mikrocontroller sowohl mit RapidForm2004 als auch mit der ersten der vorhandenen Schrittmotorkarten kommunizieren. Befehle an die zweite Schrittmotorkarte werden über die Erste gesendet. Um mit beiden Seiten kommunizieren zu können muss der Mikrocontroller den Befehlssatz der vorhanden Schrittmotorkarten und zumindest einen der Befehlssätze aus RapidForm2004 kennen. Außerdem muss er wissen welche Antwort RapidForm2004 auf einen gesendeten Befehl erwartet. </text>
          <break/>
          <text fontsize="small">In der ersten Phase wurde die Software </text>
          <emph>
            <text fontsize="small">Free Serial Port Monitor</text>
          </emph>
          <text fontsize="small"> verwendet um die Kommunikation zwischen RapidForm2004 und dem Mikrocontroller abzuhören. Dies hatte jedoch den Nachteil, das RapidForm2004 erst dann den nächsten Befehl sendete, wenn der Erste mit der erwarteten Antwort quittiert wurde. Die Befehle die RapidForm erwartete, konnten zwar teilweise aus den Betriebsanleitungen der Schrittmotorsteuerungen entnommen werden, dieses Vorgehen war jedoch sehr mühsam. Eine besseres Vorgehen, war das sogenannte </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">Reverse-Engineering</text>
          <text fontsize="small">. Dadurch konnten alle Befehe und die darauf erwarteten Antworten aus einer ausführbaren Datei von RapidForm2004 ausgelesen werden.</text>
          <break/>
          <text fontsize="small">Das Codelisting </text>
          <ref labelref="LABEL:lst:Proto_RF_Isel"/>
          <text fontsize="small"> zeigt einen Auszug für den Befehlssatz eines Isel Schrittmotors. Im Anhang </text>
          <ref labelref="LABEL:sec:Protokolle_RF"/>
          <text fontsize="small"> befinden sich die Befehlssätze aller Schrittmotorkarten. Somit stehen die Befehlssätze aller Schrittmotorsteuerungen zur Verfügung. Diese wurden in einer Textdatei gespeichert und werden später im Programm verwendet. Dadurch sind alle Befehle und die Antworten die RapidForm2004 auf einen daraus ausgesendeten Befehl erwartet bekannt.
</text>
          <!-- %\begin{Tipp} -->
          <text fontsize="small">In Codelistings und im Quelltext wird teilweise noch die Bezeichnung </text>
          <emph>
            <text fontsize="small">Protokolle</text>
          </emph>
          <text fontsize="small"> statt </text>
          <emph>
            <text fontsize="small">Befehlssätze</text>
          </emph>
          <text fontsize="small"> verwendet. Diese sind gleichbedeutend.
</text>
          <!-- %\end{Tipp} -->
          <text fontsize="small"></text>
        </p>
      </para>
      <listing class="ltx_lstlisting ltx_lst_language_C" refnum="5" xml:id="LST5" labels="LABEL:lst:Proto_RF_Isel">
        <toccaption>
          <tag>
            <text fontsize="small">5 </text>
          </tag>
          <text fontsize="small">Befehlssatz aus Rapidform: Isel</text>
        </toccaption>
        <caption fontsize="small"><tag>Listing 5: </tag>Befehlssatz aus Rapidform: Isel</caption>
        <tabular>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">1</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">model<text class="ltx_lst_space">        </text>"<text color="#000000">isel(RF-1)</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">2</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">port<text class="ltx_lst_space">        </text>"<text color="#000000">9600</text>"<text class="ltx_lst_space">                  </text>"<text color="#000000">n81h</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">3</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">init<text class="ltx_lst_space">        </text>"<text color="#000000">@01\r</text>"<text class="ltx_lst_space">                 </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">4</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">finish<text class="ltx_lst_space">        </text>"<text color="#000000">@0M0\054+600\r</text>"<text class="ltx_lst_space">        </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">5</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">arot<text class="ltx_lst_space">        </text>"<text color="#000000">@0M%d\054+600\r</text>"<text class="ltx_lst_space">       </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">6</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">stop<text class="ltx_lst_space">        </text>""<text class="ltx_lst_space">                      </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">7</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">home<text class="ltx_lst_space">        </text>"<text color="#000000">@0M0\054+600\r</text>"<text class="ltx_lst_space">        </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">8</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">step<text class="ltx_lst_space">        </text>"<text color="#000000">-0.0173076</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">-8000000</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">8000000</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">9</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">timeout<text class="ltx_lst_space"> </text>"<text color="#000000">60</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">10</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">firsttimeout<text class="ltx_lst_space"> </text>"<text color="#000000">10</text>"</text>
            </td>
          </tr>
        </tabular>
      </listing>
    </section>
    <section refnum="4.3" xml:id="Ch4.S3" labels="LABEL:sec:Komm_SM">
      <title fontsize="small"><tag>4.3 </tag>Kommunikation mit der vorhandenen Schrittmotorsteuerung</title>
      <!-- %**** Inhalt/Kapitel_AufbauderArbeit.tex Line 75 **** -->
      <subsection refnum="4.3.1" xml:id="Ch4.S3.SS1" labels="LABEL:sec:menu">
        <title fontsize="small"><tag>4.3.1 </tag>Befehle senden</title>
        <para xml:id="Ch4.S3.SS1.p1">
          <p>
            <text fontsize="small">Im nächsten Schritt geht es darum, Befehle an die Schrittmotorkarte zu versenden. Da es nicht möglich ist, für jeden Befehl eine eigene Taste zu verwenden,
wird eine menübasierte Steuerung mittels des LC-Displays verwendet. Im Menü lässt sich mit den Tasten </text>
            <emph>
              <text fontsize="small">Hoch</text>
            </emph>
            <text fontsize="small">, </text>
            <emph>
              <text fontsize="small">Runter</text>
            </emph>
            <text fontsize="small">, </text>
            <emph>
              <text fontsize="small">Ok</text>
            </emph>
            <text fontsize="small">, und </text>
            <emph>
              <text fontsize="small">Zurück</text>
            </emph>
            <text fontsize="small">, navigieren.</text>
            <break/>
            <text fontsize="small">Analog wie beim LC-Display und bei den Tastern wird hier eine vorhandene Bibliothek genutzt. Um die Bibliothek verwenden zu können musste die Menüstruktur den Bedürfnissen des Projekts angepasst werden und die Funktionen zum Ausgeben von Text auf dem LC-Display und zum Versenden von Befehlen über die RS-232-Schnittstelle, aus den vorangegangen Kapiteln, bekannt gemacht werden. Dies geschieht in der Datei </text>
            <text backgroundcolor="#FFFFE6" fontsize="small" font="typewriter">tinymenu/tinymenu.h</text>
            <text fontsize="small">.</text>
            <break/>
            <text fontsize="small">Die Zeilen 1–6 des Codelisting </text>
            <ref labelref="LABEL:lst:Menu"/>
            <text fontsize="small"> dienen zum Einbinden der benötigten Bibliotheken. Die Zeilen 8–20 zeigen eine vereinfachte Struktur des Hauptprogramms. Wird ein Taster gedrückt, wird dies durch die </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">get_key_press()</text>
            <text fontsize="small">-Funktion, bekannt aus Kapitel </text>
            <ref labelref="LABEL:sec:Taster"/>
            <text fontsize="small">, erkannt und die entsprechende Menü Funktion aufgerufen.</text>
          </p>
        </para>
        <listing class="ltx_lstlisting ltx_lst_language_C" refnum="6" xml:id="LST6" labels="LABEL:lst:Menu">
          <toccaption>
            <tag>
              <text fontsize="small">6 </text>
            </tag>
            <text fontsize="small">Menü</text>
          </toccaption>
          <caption fontsize="small"><tag>Listing 6: </tag>Menü</caption>
          <tabular>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">1</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>MCU_CLK<text class="ltx_lst_space"> </text>F_CPU</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">2</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">keywordstyle <text class="ltx_lst_directive">include</text><text class="ltx_lst_space"> </text>"<text color="#000000">tinymenu/spin_delay.h</text>"</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">3</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>CONFIG_TINYMENU_USE_CLEAR</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">4</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">keywordstyle <text class="ltx_lst_directive">include</text><text class="ltx_lst_space"> </text>"<text color="#000000">tinymenu/tinymenu.h</text>"</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">5</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">keywordstyle <text class="ltx_lst_directive">include</text><text class="ltx_lst_space"> </text>"<text color="#000000">tinymenu/tinymenu_hw.h</text>"</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">6</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">keywordstyle <text class="ltx_lst_directive">include</text><text class="ltx_lst_space"> </text>"<text color="#000000">mymenu.h</text>"</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">7</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Gekuerzte<text class="ltx_lst_space"> </text>Main-Funktion</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">8</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space"> </text>main(<text class="ltx_lst_keyword" color="#FF0000">void</text>)<text class="ltx_lst_space"> </text>{</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">9</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">while</text><text class="ltx_lst_space"> </text>(1)<text class="ltx_lst_space"> </text>{<text class="ltx_lst_space">  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">In<text class="ltx_lst_space"> </text>Endlosschleife<text class="ltx_lst_space"> </text>wechseln</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">10</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>wdt_reset();<text class="ltx_lst_space">     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Watchdog<text class="ltx_lst_space"> </text>zuruecksetzen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">11</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>(get_key_press(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>KEY1))<text class="ltx_lst_space">      </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">1<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Zurueck</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">12</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>menu_exit(&amp;menu_context);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">13</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">if</text>(<text class="ltx_lst_space"> </text>get_key_press(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>KEY2))<text class="ltx_lst_space">      </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">2<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Hoch</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">14</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>menu_prev_entry(&amp;menu_context);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">15</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>(get_key_press(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>KEY3))<text class="ltx_lst_space">      </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">3<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Runter</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">16</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>menu_next_entry(&amp;menu_context);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">17</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>(get_key_press(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>KEY4))<text class="ltx_lst_space">      </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">4<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Ok</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">18</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>menu_select(&amp;menu_context);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">19</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">20</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">21</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Funktion<text class="ltx_lst_space"> </text>zum<text class="ltx_lst_space"> </text>senden<text class="ltx_lst_space"> </text>der<text class="ltx_lst_space"> </text>Menuepunkte<text class="ltx_lst_space"> </text>ueber<text class="ltx_lst_space"> </text>die<text class="ltx_lst_space"> </text>serielle<text class="ltx_lst_space"> </text>Schnittstelle</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">22</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space">        </text>menu_puts<text class="ltx_lst_space">                </text>(<text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space"> </text>*arg,<text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>*name)<text class="ltx_lst_space"> </text>{<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Menu/Sende<text class="ltx_lst_space"> </text>Funktion</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">23</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>uart_put_string(arg,<text class="ltx_lst_space"> </text>D_Stepper);<text class="ltx_lst_space">   </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Uebergebenen<text class="ltx_lst_space"> </text>String<text class="ltx_lst_space"> </text>an<text class="ltx_lst_space"> </text>Stepper<text class="ltx_lst_space"> </text>senden</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">24</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Befehl<text class="ltx_lst_space"> </text>auf<text class="ltx_lst_space"> </text>Display<text class="ltx_lst_space"> </text>ausgeben</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">25</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>lcd_clrscr();</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">26</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>lcd_puts("<text color="#000000">Sent:<text class="ltx_lst_space"> </text></text>");</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">27</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>lcd_puts(arg);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">28</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>lcd_puts("<text color="#000000">\n</text>");</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">29</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>ms_spin(100);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">30</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text color="#008000">if<text class="ltx_lst_space"> </text>((UCSR1A<text class="ltx_lst_space"> </text>&amp;<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>RXC1)))</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">31</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>uart_rx(D_Stepper);<text class="ltx_lst_space">     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Antwort<text class="ltx_lst_space"> </text>des<text class="ltx_lst_space"> </text>Stepper<text class="ltx_lst_space"> </text>empfangen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">32</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>ms_spin(1000);<text class="ltx_lst_space">         </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Antwort<text class="ltx_lst_space"> </text>noch<text class="ltx_lst_space"> </text>eine<text class="ltx_lst_space"> </text>weile<text class="ltx_lst_space"> </text>Anzeigen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">33</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
          </tabular>
        </listing>
        <para xml:id="Ch4.S3.SS1.p2">
          <p>
            <text fontsize="small">Folgende Menüpunkte wurden realisiert:</text>
          </p>
        </para>
        <listing class="ltx_lstlisting ltx_lst_language_C" refnum="7" xml:id="LST7" labels="LABEL:lst:Menu_Baum">
          <toccaption>
            <tag>
              <text fontsize="small">7 </text>
            </tag>
            <text fontsize="small">Menü Baum</text>
          </toccaption>
          <caption fontsize="small"><tag>Listing 7: </tag>Menü Baum</caption>
          <tabular>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">1</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">Main<text class="ltx_lst_space"> </text>Menu</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">2</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">  </text>Bewegen<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Rotation</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">3</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>+90</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">4</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>-90</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">5</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>+10.000<text class="ltx_lst_space"> </text>Schritte</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">6</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>-10.000<text class="ltx_lst_space"> </text>Schritte</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">7</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>Gehe<text class="ltx_lst_space"> </text>zum<text class="ltx_lst_space"> </text>Uhrsprung</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">8</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">  </text>Bewegen<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Hoehe</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">9</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>+500000</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">10</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>-500000</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">11</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>+1000000</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">12</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>-1000000</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">13</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>Gehe<text class="ltx_lst_space"> </text>zum<text class="ltx_lst_space"> </text>Ursprung</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">14</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">  </text>Konfigurieren</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">15</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>Motorstatus</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">16</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>Setze<text class="ltx_lst_space"> </text>Ursprung</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">17</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>Write<text class="ltx_lst_space"> </text>to<text class="ltx_lst_space"> </text>EEPROM</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">18</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>Newline<text class="ltx_lst_space"> </text>1</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">19</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>Parameter<text class="ltx_lst_space"> </text>Auslesen</text>
              </td>
            </tr>
          </tabular>
        </listing>
        <para xml:id="Ch4.S3.SS1.p3">
          <p>
            <text fontsize="small">Wird einer der Menüpunkte aufgerufen, wird die im Menüpunkt hinterlegte Funktion mit dem hinterlegten Parameter aufgerufen. Wird beispielsweise der Befehl </text>
            <emph>
              <text fontsize="small">+90</text>
            </emph>
            <text fontsize="small"> ausgewählt, wird die hinterlegte Funktion </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">menu_puts(arg, name)</text>
            <text fontsize="small">(Codelisting </text>
            <ref labelref="LABEL:lst:Menu"/>
            <text fontsize="small"> Zeile 18-28) mit dem hinterlegten Wert aufgerufen. Diese sendet dann mit der aus Kapitel </text>
            <ref labelref="LABEL:sec:RS232"/>
            <text fontsize="small"> bekannten Funktion </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">uart_puts(arg, dir)</text>
            <text fontsize="small"> einen Befehl an die Schrittmotorsteuerung.</text>
            <break/>
            <text fontsize="small">Es ist somit nun möglich mit Tastern vordefinierte Befehle aus dem Menü auszuwählen und an die Schrittmotorsteuerung zu senden.</text>
          </p>
        </para>
      </subsection>
      <subsection refnum="4.3.2" xml:id="Ch4.S3.SS2" labels="LABEL:sec:Empfangen_Schrittmotor">
        <title fontsize="small"><tag>4.3.2 </tag>Antworten empfangen und speichern</title>
        <para xml:id="Ch4.S3.SS2.p1">
          <p>
            <text fontsize="small">Die Schrittmotorsteuerung antwortet auf Befehle mit einem </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">String</text>
            <text fontsize="small">. In diesem Arbeitsschritt wird die Funktionalität zum Empfangen von Antworten der Schrittmotorsteuerung auf Befehle des Mikrocontrollers hergestellt. Diese Antworten sollen in einem String gespeichert und im nächsten Schritt an eine </text>
            <emph>
              <text fontsize="small">Auswerte-Funktion</text>
            </emph>
            <text fontsize="small"> weiter gegeben werden.</text>
            <break/>
            <text fontsize="small">Dazu wird in der Hauptschleife des Programms ständig das Eingangsregister der ersten seriellen Schnittstelle abgefragt (siehe Codelisting </text>
            <ref labelref="LABEL:lst:rs232empfangstepper"/>
            <text fontsize="small"> Zeile 10–13). Dieses Vorgehen bezeichnet man als </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Polling</text>
            <text fontsize="small">.
Sind Daten im Register vorhanden, wird </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">LED3</text>
            <text fontsize="small"> eingeschaltet und die Funktion </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">uart_rx(int dir)</text>
            <text fontsize="small"> mit dem Parameter </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">D_Stepper</text>
            <text fontsize="small"> aufgerufen. Der übergebene Parameter gibt an, dass der Befehl von der für die Schrittmotorkarte zuständigen Schnittstelle empfangen wurde. Dadurch wird sichergestellt, dass der empfangene </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">String</text>
            <text fontsize="small"> aus dem richtigen Datenempfangsregister ausgelesen wird und festgelegt wie er weiterverarbeitet wird. Die Funktion </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">uart_rx(dir)</text>
            <text fontsize="small"> liest dann das Empfangsregister mit der aus Kapitel </text>
            <ref labelref="LABEL:sec:RS232"/>
            <text fontsize="small"> bekannten Funktion </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">uart_get_string(str_rx, dir)</text>
            <text fontsize="small"> aus und schreibt den empfangenen String in die Variable </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">str_rx</text>
            <text fontsize="small">(Codelisting </text>
            <ref labelref="LABEL:lst:rs232empfangstepper"/>
            <text fontsize="small">, Zeile 7). In einer </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">if-Abfrage</text>
            <text fontsize="small"> wird entschieden von welcher Schnittstelle der empfangene Befehl kam. Da </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">D_Stepper</text>
            <text fontsize="small"> übergeben wurde, wird der if-Teil der Abfrage ausgeführt. In dieser wird der empfangene String an die </text>
            <emph>
              <text fontsize="small">Auswerte-Funktion</text>
            </emph>
            <text fontsize="small"> für die Schrittmotorkarte (Codelisting </text>
            <ref labelref="LABEL:lst:rs232empfangstepper"/>
            <text fontsize="small">, Zeile 15-45) übergeben.
Durch diesen Teil des Programms ist es nun möglich Antworten der Schrittmotorkarte zu empfangen, in dem String </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">str_rx</text>
            <text fontsize="small"> zu speichern und an die Auswerte-Funktion </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">switch_Stepper(str_rx)</text>
            <text fontsize="small"> zu übergeben.</text>
          </p>
        </para>
        <listing class="ltx_lstlisting ltx_lst_language_C" refnum="8" xml:id="LST8" labels="LABEL:lst:rs232empfangstepper">
          <toccaption>
            <tag>
              <text fontsize="small">8 </text>
            </tag>
            <text fontsize="small">RS-232 Empfang</text>
          </toccaption>
          <caption fontsize="small"><tag>Listing 8: </tag>RS-232 Empfang</caption>
          <tabular>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">1</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>((UCSR1A<text class="ltx_lst_space"> </text>&amp;<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>RXC1))){<text class="ltx_lst_space">                </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Stepper<text class="ltx_lst_space"> </text>Polling</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">2</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>LED_PORT<text class="ltx_lst_space"> </text>&amp;=<text class="ltx_lst_space"> </text>(<text class="ltx_lst_space"> </text>1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>LED3<text class="ltx_lst_space"> </text>);<text class="ltx_lst_space">          </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">LED<text class="ltx_lst_space"> </text>einschalten</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">3</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>uart_rx(D_Stepper);<text class="ltx_lst_space">                     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Register<text class="ltx_lst_space"> </text>auslesen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">4</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">5</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">UART<text class="ltx_lst_space"> </text>Empfangsregister<text class="ltx_lst_space"> </text>auslesen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">6</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space">        </text>uart_rx<text class="ltx_lst_space">                                </text>(<text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space"> </text>dir)<text class="ltx_lst_space"> </text>{</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">7</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>uart_get_string(str_rx,<text class="ltx_lst_space"> </text>dir);<text class="ltx_lst_space">   </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">String<text class="ltx_lst_space"> </text>aus<text class="ltx_lst_space"> </text>Empfangsregister<text class="ltx_lst_space"> </text>auslesen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">8</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>(dir<text class="ltx_lst_space"> </text>==<text class="ltx_lst_space"> </text>D_Stepper)<text class="ltx_lst_space">         </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Empfangsregister<text class="ltx_lst_space"> </text>Stepper</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">9</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>switch_Stepper(str_rx);<text class="ltx_lst_space">     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Uebersetzungsfunktion<text class="ltx_lst_space"> </text>fuer<text class="ltx_lst_space"> </text>Stepper<text class="ltx_lst_space"> </text>aufrufen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">10</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">else</text>{<text class="ltx_lst_space">                               </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Empfangsregister<text class="ltx_lst_space"> </text>RapidForm</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">11</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Wird<text class="ltx_lst_space"> </text>spaeter<text class="ltx_lst_space"> </text>erklaert</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">12</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">13</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
          </tabular>
        </listing>
      </subsection>
      <subsection refnum="4.3.3" xml:id="Ch4.S3.SS3" labels="LABEL:sec:Auswerten_SM">
        <title fontsize="small"><tag>4.3.3 </tag>Antworten auswerten</title>
        <!-- %**** Inhalt/Kapitel_AufbauderArbeit.tex Line 100 **** -->
        <para xml:id="Ch4.S3.SS3.p1">
          <p>
            <text fontsize="small">Die Funktion zum Auswerten empfangener Strings spielt eine zentrale Rolle im Projekt. Diese Funktion ermöglicht es, ankommende Strings im Mikrocontroller gegen die bekannten Antworten zu prüfen und eine entsprechende Reaktion auszuführen.</text>
            <break/>
            <text fontsize="small">In der Auswerte-Funktion wird der übergebene String mittels der Funktion</text>
            <break/>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">FindStringInArray(str_rx, pOptions, length)</text>
            <text fontsize="small">(Codelisting </text>
            <ref labelref="LABEL:lst:FindString"/>
            <text fontsize="small">) gegen ein </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Array</text>
            <text fontsize="small"> (Codelisting </text>
            <ref labelref="LABEL:lst:switchStepper"/>
            <text fontsize="small">, Zeile 3) mit bekannten Befehlen geprüft. Ist der String in diesem Array vorhanden, wird die Position des Strings im Array zurückgegeben, ansonsten wird ’’99’’ zurückgegeben. In einer anschließenden </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">switch/case-Struktur</text>
            <text fontsize="small"> wird dann der Position im Array ein bestimmtes Verhalten des Mikrocontrollers zugeordnet. Wird beispielsweise der String </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">#</text>
            <text fontsize="small"> empfangen, wird Position </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">0</text>
            <text fontsize="small"> zurück gegeben und auf dem LC-Display wird </text>
            <emph>
              <text fontsize="small">Erfolgreich</text>
            </emph>
            <text fontsize="small"> ausgegeben.</text>
            <break/>
            <text fontsize="small">Durch diese Funktion kann nun auf Strings reagiert werden und eine entsprechende Reaktion seitens des Mikrocontrollers erfolgen.</text>
          </p>
        </para>
        <listing class="ltx_lstlisting ltx_lst_language_Java" refnum="9" xml:id="LST9" labels="LABEL:lst:FindString">
          <toccaption>
            <tag>
              <text fontsize="small">9 </text>
            </tag>
            <text fontsize="small">FindStringInArray()</text>
          </toccaption>
          <caption fontsize="small"><tag>Listing 9: </tag>FindStringInArray()</caption>
          <tabular>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">1</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space">        </text>FindStringInArray<text class="ltx_lst_space">        </text>(<text class="ltx_lst_keyword" color="#FF0000">const</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">char</text>*<text class="ltx_lst_space"> </text>pInput,<text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">const</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">char</text>*<text class="ltx_lst_space"> </text>pOptions[],<text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space"> </text>cmp_length)<text class="ltx_lst_space"> </text>{</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">2</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space"> </text>n<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>-1;</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">3</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">while</text><text class="ltx_lst_space"> </text>(pOptions[++n])<text class="ltx_lst_space"> </text>{<text class="ltx_lst_space">       </text>//<text color="#008000">Array<text class="ltx_lst_space"> </text>durchlaufen<text class="ltx_lst_space"> </text>bis<text class="ltx_lst_space"> </text>0<text class="ltx_lst_space"> </text>terminiert</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">4</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>//<text color="#008000">Wenn<text class="ltx_lst_space"> </text>pInput<text class="ltx_lst_space"> </text>==<text class="ltx_lst_space"> </text>pOptions<text class="ltx_lst_space"> </text>dann<text class="ltx_lst_space"> </text>gib<text class="ltx_lst_space"> </text>Array<text class="ltx_lst_space"> </text>Position<text class="ltx_lst_space"> </text>zurueck</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">5</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>(!strncmp(pInput,<text class="ltx_lst_space"> </text>pOptions[n],<text class="ltx_lst_space"> </text>cmp_length))<text class="ltx_lst_space">    </text><text class="ltx_lst_keyword" color="#FF0000">return</text><text class="ltx_lst_space"> </text>n;</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">6</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">7</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">return</text><text class="ltx_lst_space"> </text>99;<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Wenn<text class="ltx_lst_space"> </text>keine<text class="ltx_lst_space"> </text>uebereinstimmung,<text class="ltx_lst_space"> </text>gib<text class="ltx_lst_space"> </text>99<text class="ltx_lst_space"> </text>zurueck</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">8</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
          </tabular>
        </listing>
        <listing class="ltx_lstlisting ltx_lst_language_Java" refnum="10" xml:id="LST10" labels="LABEL:lst:switchStepper">
          <toccaption>
            <tag>
              <text fontsize="small">10 </text>
            </tag>
            <text fontsize="small">switchStepper()</text>
          </toccaption>
          <caption fontsize="small"><tag>Listing 10: </tag>switchStepper()</caption>
          <tabular>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">1</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Uebersetzung<text class="ltx_lst_space"> </text>Schrittmotorkarte</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">2</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space">        </text>switch_Stepper<text class="ltx_lst_space">                </text>(<text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>*<text class="ltx_lst_space"> </text>str_rx)<text class="ltx_lst_space"> </text>{</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">3</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">const</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">char</text>*<text class="ltx_lst_space"> </text>pOptions[]<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>{<text class="ltx_lst_space">       </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Array<text class="ltx_lst_space"> </text>mit<text class="ltx_lst_space"> </text>bekannten<text class="ltx_lst_space"> </text>Befehlen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">4</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>"<text color="#000000">#</text>",<text class="ltx_lst_space">    </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">0<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Stepper<text class="ltx_lst_space"> </text>Karte<text class="ltx_lst_space"> </text>hat<text class="ltx_lst_space"> </text>Befehl<text class="ltx_lst_space"> </text>erkannt</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">5</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>"<text color="#000000">E</text>",<text class="ltx_lst_space">    </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">1<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Stepper<text class="ltx_lst_space"> </text>Karte<text class="ltx_lst_space"> </text>meldet<text class="ltx_lst_space"> </text>Error</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">6</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>"<text color="#000000">!CLS</text>",<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">2<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Clear<text class="ltx_lst_space"> </text>Screen<text class="ltx_lst_space"> </text>(Debugging)</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">7</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>"<text color="#000000">Test</text>",<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">3<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Test<text class="ltx_lst_space"> </text>(Debugging)</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">8</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>0<text class="ltx_lst_space"> </text>};</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">9</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">switch</text><text class="ltx_lst_space"> </text>(FindStringInArray(str_rx,<text class="ltx_lst_space"> </text>pOptions,<text class="ltx_lst_space"> </text>1))<text class="ltx_lst_space"> </text>{<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">String<text class="ltx_lst_space"> </text>gegen<text class="ltx_lst_space"> </text>bekannte<text class="ltx_lst_space"> </text>Antworten<text class="ltx_lst_space"> </text>pruefen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">10</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">case</text><text class="ltx_lst_space"> </text>0:<text class="ltx_lst_space">                     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">0<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Stepper<text class="ltx_lst_space"> </text>Karte<text class="ltx_lst_space"> </text>hat<text class="ltx_lst_space"> </text>Befehl<text class="ltx_lst_space"> </text>erkannt</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">11</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>lcd_puts("<text color="#000000">Erfolgreich\n</text>");</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">12</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">break</text>;</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">13</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">case</text><text class="ltx_lst_space"> </text>1:<text class="ltx_lst_space">                     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">1<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Stepper<text class="ltx_lst_space"> </text>Karte<text class="ltx_lst_space"> </text>meldet<text class="ltx_lst_space"> </text>Error</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">14</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>lcd_puts("<text color="#000000">Error\n</text>");</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">15</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>uart_put_string("<text color="#000000">1\r\n</text>",<text class="ltx_lst_space"> </text>D_RapidForm);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">16</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">break</text>;</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">17</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">case</text><text class="ltx_lst_space"> </text>2:<text class="ltx_lst_space">                     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">2<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Clear<text class="ltx_lst_space"> </text>Screen<text class="ltx_lst_space"> </text>(Debugging)</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">18</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>lcd_clrscr();</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">19</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">break</text>;</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">20</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">case</text><text class="ltx_lst_space"> </text>3:<text class="ltx_lst_space">                     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">3<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Test<text class="ltx_lst_space"> </text>(Debugging)</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">21</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>lcd_puts("<text color="#000000">Test<text class="ltx_lst_space"> </text>bestanden\n</text>");</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">22</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">break</text>;</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">23</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">default</text>:</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">24</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>ms_spin(10);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">25</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">26</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
          </tabular>
        </listing>
      </subsection>
    </section>
    <section refnum="4.4" xml:id="Ch4.S4" labels="LABEL:sec:Verbesserung_Hardware">
      <title fontsize="small"><tag>4.4 </tag>Verbesserungen an der vorhandenen Hardware</title>
      <subsection refnum="4.4.1" xml:id="Ch4.S4.SS1" labels="LABEL:sec:Netzteil">
        <title fontsize="small"><tag>4.4.1 </tag>Netzteil</title>
        <para xml:id="Ch4.S4.SS1.p1">
          <p>
            <text fontsize="small">Ziel dieses Arbeitsschrittes war es, die festen Lötverbindungen zwischen dem PC-Netzteil und den einzelnen Karteneinschüben im 19’’-Rack durch Steckverbindungen zu ersetzen und dadurch leicht erweiterbar zu machen.</text>
            <break/>
            <text fontsize="small">Die festen Lötverbindungen am Einschub für die Schrittmotorkarte wurden durch Standard PC-Netzteil Stecker ersetzt. </text>
            <!-- %Die Mikrocontroller-Platine wird mit \emph{5V} gespeist. -->
            <text fontsize="small">Die </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Logikbausteine</text>
            <text fontsize="small"> der Schrittmotorkarte werden mit </text>
            <emph>
              <text fontsize="small">5V</text>
            </emph>
            <text fontsize="small"> gespeist. Die Schrittmotorkarte wird zusätzlich mit </text>
            <emph>
              <text fontsize="small">12V</text>
            </emph>
            <text fontsize="small"> für den Schrittmotor gespeist. Der Stecker lässt sich nun einfach mit einer Buchse des Standard PC-Netzteils verbinden und es ist nicht mehr Notwendig zu löten wenn das Netzteil ausgebaut wird. Mittels eines Y-Kabels(siehe Abbildung </text>
            <ref labelref="LABEL:fig:Y-Kabel"/>
            <text fontsize="small">) können nun leicht weitere Buchsen hinzugefügt werden.</text>
            <break/>
            <text fontsize="small">Dadurch kann das Netzteil nun einfach ein- und ausgebaut werden, bzw. das System leicht um neue Einschubkarten erweitert werden.</text>
          </p>
        </para>
        <figure frefnum="Abbildung 4.1" placement="h" refnum="4.1" xml:id="Ch4.F1" labels="LABEL:fig:Y-Kabel">
          <graphics graphic="Y-Kabel.jpg" options="width=100.0pt" xml:id="Ch4.F1.g1" class="centering"/>
          <toccaption class="centering">
            <tag>
              <text fontsize="small">4.1 </text>
            </tag>
            <text fontsize="small">Stromverbinder - Y-Kabel</text>
            <cite>
              <text fontsize="small">(</text>
              <bibref bibrefs="kosatec" separator=";" show="Number" yyseparator=","/>
              <text fontsize="small">)</text>
            </cite>
          </toccaption>
          <caption class="centering" fontsize="small"><tag>Abbildung 4.1: </tag>Stromverbinder - Y-Kabel<cite>(<bibref bibrefs="kosatec" separator=";" show="Number" yyseparator=","/>)</cite></caption>
        </figure>
      </subsection>
      <subsection refnum="4.4.2" xml:id="Ch4.S4.SS2">
        <title fontsize="small"><tag>4.4.2 </tag>Zweite Schrittmotorkarte</title>
        <!-- %**** Inhalt/Kapitel_AufbauderArbeit.tex Line 125 **** -->
        <para xml:id="Ch4.S4.SS2.p1">
          <p>
            <text fontsize="small">Zu Anfang war nur eine Schrittmotorkarte für die Rotation des Drehtisches vorbereitet. Mit einem zweiten Schrittmotor konnte der Tisch in der Höhe verstellt werden. Für diesen fehlte jedoch noch eine zweite Schrittmotorkarte. Diese musste noch vorbereitet und mit der Ersten verbunden werden.</text>
            <break/>
            <text fontsize="small">Dazu wurde, wie in Kapitel </text>
            <ref labelref="LABEL:sec:Netzteil"/>
            <text fontsize="small"> beschrieben, ein weiterer Einschubplatz für die Schrittmotorkarte vorbereitet. Die Karte wurde mit einer Frontblende versehen und auf dieser eine Buchse für die Motorverkabelung und je eine Buchse und einen Stecker für die seriellen Schnittstellen verbaut. Diese wurden mit den entsprechenden Anschlüssen auf der Schrittmotorkarte verlötet. Die Karte wird in den Einschubplatz geschoben und mit einem seriellen Kabel als </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Daisy-Chain</text>
            <text fontsize="small"> mit der ersten Schrittmotorkarte verbunden. Dadurch kann die zweite Schrittmotorkarte über die Erste angesteuert werden.</text>
            <break/>
            <text fontsize="small">Somit steht eine baugleiche Schrittmotorkarte zur Verfügung. Diese kann nun den Schrittmotor für die Höhenverstellung ansteuern. Befehle an diese Schrittmotorkarte werden an die erste Karte geschickt, jedoch mit dem Prefix </text>
            <emph>
              <text fontsize="small">2</text>
            </emph>
            <text fontsize="small">. Dieser weist die erste Karte an, den Befehl an die zweite Karte weiter zu senden. So kann das System um weitere Karten erweitert werden.</text>
          </p>
        </para>
      </subsection>
      <subsection refnum="4.4.3" xml:id="Ch4.S4.SS3">
        <title fontsize="small"><tag>4.4.3 </tag>Motor- und Endschalterverkabelung</title>
        <para xml:id="Ch4.S4.SS3.p1">
          <p>
            <text fontsize="small">Zwischen der zweiten Schrittmotorkarte und dem zugehörigen Schrittmotor, der für die Höhenverstellung zuständig ist, war noch kein Kabel vorhanden. Dieses musste noch gefertigt und um 3 Leitungen für die Endschalter erweitert werden.</text>
            <break/>
            <text fontsize="small">Dafür wurde in der Werkstatt des RheinAhrCampus Remagen ein 7 adriges Kabel (siehe Abbildung </text>
            <ref labelref="LABEL:fig:Motorverkabelung"/>
            <text fontsize="small">) besorgt und die passenden Endstecker bestellt. Die Belegung wurde gleich zum Kabel für den ersten Schrittmotor gewählt, jedoch um die 3 Adern für die beiden Endschalter erweitert. Tabelle </text>
            <ref labelref="LABEL:tab:Motorverkabelung"/>
            <text fontsize="small"> gibt die Belegung des Kabels wieder.</text>
            <break/>
            <text fontsize="small">Somit stand ein Kabel zur Verfügung mit dem sowohl der Schrittmotor gesteuert, als auch der Status der Endschalter an die Schrittmotorkarte übermittelt werden konnte.</text>
          </p>
        </para>
        <figure frefnum="Abbildung 4.2" placement="h" refnum="4.2" xml:id="Ch4.F2" labels="LABEL:fig:Motorverkabelung">
          <graphics graphic="Kabel.pdf" options="width=433.62pt" xml:id="Ch4.F2.g1" class="centering"/>
          <toccaption class="centering">
            <tag>
              <text fontsize="small">4.2 </text>
            </tag>
            <text fontsize="small">Motor- und Endschalterverkabelung</text>
          </toccaption>
          <caption class="centering" fontsize="small"><tag>Abbildung 4.2: </tag>Motor- und Endschalterverkabelung</caption>
        </figure>
        <table frefnum="Tabelle 5.1" refnum="5.1" xml:id="Ch5.T1" labels="LABEL:tab:Motorverkabelung">
          <caption fontsize="small"><tag>Tabelle 5.1: </tag>Fuses</caption>
          <toccaption>
            <tag>
              <text fontsize="small">5.1 </text>
            </tag>
            <text fontsize="small">Fuses</text>
          </toccaption>
          <tabular>
            <tr>
              <td align="center" border="l r t">
                <text fontsize="small">1</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Phase A</text>
              </td>
            </tr>
            <tr>
              <td align="center" border="l r t">
                <text fontsize="small">2</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Phase B</text>
              </td>
            </tr>
            <tr>
              <td align="center" border="l r t">
                <text fontsize="small">3</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Phase C</text>
              </td>
            </tr>
            <tr>
              <td align="center" border="l r t">
                <text fontsize="small">4</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Phase D</text>
              </td>
            </tr>
            <tr>
              <td align="center" border="l r t">
                <text fontsize="small">5</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Endschalter oben</text>
              </td>
            </tr>
            <tr>
              <td align="center" border="l r t">
                <text fontsize="small">6</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Endschalter unten</text>
              </td>
            </tr>
            <tr>
              <td align="center" border="b l r t">
                <text fontsize="small">7</text>
              </td>
              <td align="left" border="b r t">
                <text fontsize="small">Endschalter Masse</text>
              </td>
            </tr>
          </tabular>
        </table>
      </subsection>
      <subsection refnum="4.4.4" xml:id="Ch4.S4.SS4">
        <title fontsize="small"><tag>4.4.4 </tag>Endschalter</title>
        <para xml:id="Ch4.S4.SS4.p1">
          <p>
            <text fontsize="small">Nun sollen die vorgegeben induktiven Endschalter mit der Schrittmotorkarte und dem Mikrocontroller zu verbinden. Dadurch soll gewährleistet werden, dass der Drehtisch nicht über den Arbeitsbereich hinaus bewegt werden kann. Zusätzlich soll das Erreichen der Endpositionen auf dem LC-Display angezeigt werden.</text>
            <break/>
            <text fontsize="small">Da die Schrittmotorkarte nur mechanische Endschalter unterstützt, ließen sich die induktiven Endschalter nicht ohne weiteres nutzen. Um die induktiven Endschalter nutzen zu können, musste die Spannung über einen Spannungsteiler heruntergesetzt werden und die standardmäßigen Eingänge für die mechanischen Endschalter umgangen werden. Die induktiven Endschalter werden direkt an den Optokoppler angeschlossen, welcher für die mechanischen Endschalter zuständig ist. Dadurch wurden die Signale der Endschalter für die Schrittmotorkarte nutzbar.</text>
          </p>
        </para>
        <figure frefnum="Abbildung 4.3" placement="h" refnum="4.3" xml:id="Ch4.F3" labels="LABEL:fig:Endschalterverkabelung">
          <graphics graphic="Endschalter.pdf" xml:id="Ch4.F3.g1" class="centering"/>
          <toccaption class="centering">
            <tag>
              <text fontsize="small">4.3 </text>
            </tag>
            <text fontsize="small">Endschalterverkabelung</text>
          </toccaption>
          <caption class="centering" fontsize="small"><tag>Abbildung 4.3: </tag>Endschalterverkabelung</caption>
        </figure>
        <para xml:id="Ch4.S4.SS4.p2">
          <p>
            <text fontsize="small">Ein weiteres Problem bestand darin, dass, wenn der Tisch sich bereits in der Endposition befand, die Endschalter noch nicht aktiviert wurden. Dies lag daran, dass der Metallstutzen, der die Endschalter auslösen sollte, sich nicht im Schaltbereich der induktiven Schalter befand. Zur Abhilfe wurde ein längerer Metallstutzen von der Werkstatt des RheinAhrCampus angefertigt.</text>
            <break/>
            <text fontsize="small">Wenn der Tisch sich in der Endposition befindet, soll dies auch auf dem LC-Display angezeigt werden. Die Signale der Endschalter liegen auf der Rückseite der Schrittmotorkarte am Verbindungsstecker an. Um die Signale dem Mikrocontroller zugänglich zu machen wurde eine Brücke zwischen den Verbindungssteckern der Schrittmotorkarte und der Mikrocontroller-Platine gelötet. Auf der Mikrocontroller-Platine sind diese beiden Pins mit je einem Pin des Mikrocontrollers verbunden. Diese beiden Pins werden im Mikrocontroller als </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Interrupts</text>
            <text fontsize="small"> definiert. Die </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Interrupt-Service-Routine</text>
            <text fontsize="small"> zum Anzeigen der Nachricht auf dem LC-Display wird in Kapitel </text>
            <ref labelref="LABEL:sec:Endschalter_SW"/>
            <text fontsize="small"> beschrieben.</text>
            <break/>
            <text fontsize="small">Da die Signale der Endschalter nun an der Schrittmotorkarte anliegen, stoppt diese den Motor wenn eine der Endschalterpositionen erreicht wird. Zusätzlich liegen die Signale am Mikrocontroller an. Dieser gibt dadurch auf dem Display die Meldung </text>
            <emph>
              <text fontsize="small">Endschalterposition erreicht!</text>
            </emph>
            <text fontsize="small"> aus.</text>
          </p>
        </para>
      </subsection>
      <subsection refnum="4.4.5" xml:id="Ch4.S4.SS5">
        <title fontsize="small"><tag>4.4.5 </tag>Zweite serielle Schnittstelle</title>
        <para xml:id="Ch4.S4.SS5.p1">
          <p>
            <text fontsize="small">Das STK500 bietet nur eine serielle Schnittstelle. Um zusätzlich zur Schrittmotorkarte auch mit RapidForm2004 kommunizieren zu können, wird eine zweite RS-232-Schnittstelle benötigt.</text>
            <break/>
            <text fontsize="small">Dafür wurde vorerst auf einem Steckbrett eine zweite serielle Schnittstelle nach dem Schaltplan in Abbildung </text>
            <ref labelref="LABEL:fig:MAX232"/>
            <text fontsize="small"> aufgebaut. Später wird diese Schnittstelle direkt auf der Mikrocontroller-Platine realisiert.
Dadurch ist es möglich mit dem Mikrocontroller über zwei RS-232-Schnittstellen gleichzeitig zu kommunizieren.</text>
          </p>
        </para>
        <figure frefnum="Abbildung 4.4" placement="h" refnum="4.4" xml:id="Ch4.F4" labels="LABEL:fig:MAX232">
          <graphics graphic="AVR-RS232" options="width=260.172pt" xml:id="Ch4.F4.g1" class="centering"/>
          <toccaption class="centering">
            <tag>
              <text fontsize="small">4.4 </text>
            </tag>
            <text fontsize="small">Schaltplan für die zweite serielle Schnittstelle
</text>
            <cite>
              <text fontsize="small">(</text>
              <bibref bibrefs="uc:rs232" separator=";" show="Number" yyseparator=","/>
              <text fontsize="small">)</text>
            </cite>
          </toccaption>
          <caption class="centering" fontsize="small"><tag>Abbildung 4.4: </tag>Schaltplan für die zweite serielle Schnittstelle
<cite>(<bibref bibrefs="uc:rs232" separator=";" show="Number" yyseparator=","/>)</cite></caption>
          <!-- %**** Inhalt/Kapitel_AufbauderArbeit.tex Line 175 **** -->
        </figure>
      </subsection>
    </section>
    <section refnum="4.5" xml:id="Ch4.S5" labels="LABEL:sec:Komm_RF2004">
      <title fontsize="small"><tag>4.5 </tag>Kommunikation mit RapidForm2004</title>
      <para xml:id="Ch4.S5.p1">
        <p>
          <text fontsize="small">RapidForm2004 sendet Befehle die für die Drehtischsteuerung bestimmt sind an den Mikrocontroller. Diese sollen dort empfangen, ausgewertet und in verständlicher Form an die Drehtischsteuerung weiter gegeben werden. RapidForm2004 verwendet dabei verschiedene Befehlssätze für verschiedene Schrittmotorsteuerungen. Für jeden dieser Befehlssätze wird eine eigene Auswerte-Funktion geschrieben. Im folgenden Kapitel wird nun das Empfangen der Befehle beschrieben und eine erste Auswertung, die den empfangenen Befehl dem Befehlssatz einer Schrittmotorsteuerung zuordnet.
Nachdem ein Befehl zugeordnet wurde und in der entsprechenden Auswerte-Funktion erkannt wurde, soll ein entsprechender Befehl an die Drehtischsteuerung gesendet und die Antwort der Drehtischsteuerung vom Mikrocontroller ausgewertet werden. Abschließend soll eine entsprechende Antwort an RapidForm2004 zurück gesendet werden. Abbildung </text>
          <ref labelref="LABEL:fig:Schema_Komm"/>
          <text fontsize="small"> zeigt eine schematische Übersicht dieser Kommunikation.</text>
          <break/>
          <text fontsize="small">Die Kommunikation mit RapidForm2004 ist ähnlich zu der mit der Schrittmotorsteuerung. Diese wurde bereits in Kapitel </text>
          <ref labelref="LABEL:sec:Komm_SM"/>
          <text fontsize="small"> ausführlich beschrieben. Daher wird die Kommunikation hier etwas oberflächlicher behandelt.</text>
        </p>
      </para>
      <figure frefnum="Abbildung 4.5" placement="h" refnum="4.5" xml:id="Ch4.F5" labels="LABEL:fig:Schema_Komm">
        <graphics graphic="Schema_Kommunikation" options="width=433.62pt" xml:id="Ch4.F5.g1" class="centering"/>
        <toccaption class="centering">
          <tag>
            <text fontsize="small">4.5 </text>
          </tag>
          <text fontsize="small">Schema der Kommunikation</text>
        </toccaption>
        <caption class="centering" fontsize="small"><tag>Abbildung 4.5: </tag>Schema der Kommunikation</caption>
      </figure>
      <subsection refnum="4.5.1" xml:id="Ch4.S5.SS1">
        <title fontsize="small"><tag>4.5.1 </tag>Befehle empfangen</title>
        <para xml:id="Ch4.S5.SS1.p1">
          <p>
            <text fontsize="small">Zuerst sollen nun die Befehle von RapidForm2004 an den Mikrocontroller, gespeichert werden. Anschließend wird die automatische Auswahl des Befehlssatzes beschrieben.</text>
            <break/>
            <text fontsize="small">Um anstehende Befehle zu empfangen wird, ähnlich wie in Kapitel </text>
            <ref labelref="LABEL:sec:Empfangen_Schrittmotor"/>
            <text fontsize="small">, eine Funktion die ständig das Eingangsregister der ersten seriellen Schnittstelle abfragt verwendet (siehe Codelisting </text>
            <ref labelref="LABEL:lst:rs232empfangrf"/>
            <text fontsize="small">). Auch hier wird die Funktion </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">uart_rx(dir)</text>
            <text fontsize="small"> aufgerufen, jedoch mit dem Parameter </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">D_RapidForm</text>
            <text fontsize="small">. Der empfangenen String wird auch hier in die Variable </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">str_rx</text>
            <text fontsize="small"> gespeichert. Somit können nun auch Strings von RapidForm2004 empfangen und in der Variablen </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">str_rx</text>
            <text fontsize="small"> gespeichert werden.</text>
          </p>
        </para>
        <listing class="ltx_lstlisting ltx_lst_language_Java" refnum="11" xml:id="LST11" labels="LABEL:lst:rs232empfangrf">
          <toccaption>
            <tag>
              <text fontsize="small">11 </text>
            </tag>
            <text fontsize="small">RS-232 Empfang - RapidForm2004</text>
          </toccaption>
          <caption fontsize="small"><tag>Listing 11: </tag>RS-232 Empfang - RapidForm2004</caption>
          <tabular>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">1</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>((UCSR0A<text class="ltx_lst_space"> </text>&amp;<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>RXC0))){<text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">RapidForm<text class="ltx_lst_space"> </text>Polling</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">2</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>LED_PORT<text class="ltx_lst_space"> </text>&amp;=<text class="ltx_lst_space"> </text>(<text class="ltx_lst_space"> </text>1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>LED2<text class="ltx_lst_space"> </text>);<text class="ltx_lst_space">  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">LED<text class="ltx_lst_space"> </text>einschalten</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">3</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>uart_rx(D_RapidForm);<text class="ltx_lst_space">             </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Register<text class="ltx_lst_space"> </text>auslesen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">4</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
          </tabular>
        </listing>
        <subsubsection refnum="4.5.1.1" xml:id="Ch4.S5.SS1.SSS1" labels="LABEL:sec:AutoProtokoll">
          <title fontsize="small"><tag>4.5.1.1 </tag>Automatische Auswahl eines Befehlssatzes</title>
          <para xml:id="Ch4.S5.SS1.SSS1.p1">
            <p>
              <text fontsize="small">Nun geht es darum, dass der Mikrocontroller anhand eines ersten Befehls der empfangen wird, festlegt, mit welchem Befehlssatz fortan kommuniziert werden soll. Die Kennung für den Befehlssatz wird in einer globalen Variable gespeichert und alle weiteren Befehle werden an die entsprechende Auswerte-Funktion für diesen Befehlssatz übergeben.</text>
              <break/>
              <text fontsize="small">In der Funktion </text>
              <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">uart_rx(dir)</text>
              <text fontsize="small">(Codelisting </text>
              <ref labelref="LABEL:lst:uartrx"/>
              <text fontsize="small">) wird nun in der ersten </text>
              <emph>
                <text fontsize="small">if-Abfrage</text>
              </emph>
              <text fontsize="small"> entschieden, von welcher Schnittstelle der empfangene Befehl kam. Diese verzweigt nun, da </text>
              <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">D_RapidForm</text>
              <text fontsize="small"> übergeben wurde, in den else-Teil. In diesem wird mit mehreren </text>
              <emph>
                <text fontsize="small">if-Abfragen</text>
              </emph>
              <text fontsize="small"> überprüft, ob bereits der Befehlssatz für einen bestimmten Motor ausgewählt wurde. Ist dies nicht der Fall, wird der empfangende String an die Funktion </text>
              <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">switch_Motor(str_rx)</text>
              <text fontsize="small">(Codelisting </text>
              <ref labelref="LABEL:lst:switchMotor"/>
              <text fontsize="small">) übergeben. Diese prüfte mit der aus Kapitel </text>
              <ref labelref="LABEL:sec:Auswerten_SM"/>
              <text fontsize="small"> bekannten Funktion </text>
              <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">FindStringInArray(str_rx, pOptions, 3)</text>
              <text fontsize="small">, den angekommenen String gegen die Initialisierungsbefehle der einzelnen Befehlssätze. Die Initialisierungsbefehle sind die ersten Befehle die RapidForm2004 an eine Schrittmotorsteuerung sendet um zu prüfen ob diese vorhanden ist. In diesem ersten Schritt wird der String nur zur Identifizierung des von RapidForm2004 verwendeten Befehlssatzes verwendet. Das Antworten auf einen String wird erst in den nachfolgenden Kapiteln beschrieben. Die Funktion </text>
              <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">switch_Motor(str_rx)</text>
              <text fontsize="small"> gibt einen numerischen Wert zurück. Jede Zahl entspricht dabei dem Befehlssatz für eine Schrittmotorsteuerung. Die Zahlenwerte werden dabei mittels Makro-Definitionen (Codelisting </text>
              <ref labelref="LABEL:lst:switchMotor"/>
              <text fontsize="small"> Zeile 1-6) durch lesbare Text-Variablen ersetzt. Dies erhöhte die Lesbarkeit und das Verständnis. War dieser Schritt erfolgreich, wird in den folgenden if-Abfragen die richtige Auswerte-Funktion aufgerufen. Konnte die Funktion </text>
              <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">switch_Motor(str_rx)</text>
              <text fontsize="small"> den empfangen Befehl nicht zuordnen, gibt sie </text>
              <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">M_UNK</text>
              <text fontsize="small"> zurück und es wird auf dem Display </text>
              <emph>
                <text fontsize="small">Unbekannter Motor!</text>
              </emph>
              <text fontsize="small"> ausgegeben.</text>
              <break/>
              <text fontsize="small">Somit ist es möglich Befehle von RapidForm2004 zu empfangen und an die richtige Auswerte-Funktionen zu übergeben. Zusätzlich wird die Programmierung dadurch wesentlich robuster, da unbekannte Befehle ignoriert werden.</text>
              <break/>
              <!-- %**** Inhalt/Kapitel_AufbauderArbeit.tex Line 200 **** -->
              <text fontsize="small">Der Nachteil dieses Vorgehens besteht darin, dass für ein wechseln des Befehlssatzes der Mikrocontroller neu gestartet werden muss. Ein Beheben dieses Nachteils wäre nicht ohne weiteres möglich gewesen.</text>
            </p>
          </para>
          <listing class="ltx_lstlisting ltx_lst_language_C" refnum="12" xml:id="LST12" labels="LABEL:lst:uartrx">
            <toccaption>
              <tag>
                <text fontsize="small">12 </text>
              </tag>
              <text fontsize="small">Funktion: uart rx()</text>
            </toccaption>
            <caption fontsize="small"><tag>Listing 12: </tag>Funktion: uart rx()</caption>
            <tabular>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">1</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">UART<text class="ltx_lst_space"> </text>Empfangsregister<text class="ltx_lst_space"> </text>auslesen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">2</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space">        </text>uart_rx<text class="ltx_lst_space">                                </text>(<text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space"> </text>dir)<text class="ltx_lst_space"> </text>{</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">3</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>uart_get_string(str_rx,<text class="ltx_lst_space"> </text>dir);<text class="ltx_lst_space">   </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">String<text class="ltx_lst_space"> </text>aus<text class="ltx_lst_space"> </text>Empfangsregister<text class="ltx_lst_space"> </text>auslesen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">4</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>(dir<text class="ltx_lst_space"> </text>==<text class="ltx_lst_space"> </text>D_Stepper)<text class="ltx_lst_space">         </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Empfangsregister<text class="ltx_lst_space"> </text>Stepper</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">5</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>switch_Stepper(str_rx);<text class="ltx_lst_space">             </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Uebersung<text class="ltx_lst_space"> </text>Stepper</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">6</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">else</text>{<text class="ltx_lst_space">                               </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Empfangsregsiter<text class="ltx_lst_space"> </text>RapidForm</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">7</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Uebersetzungsfunktion<text class="ltx_lst_space"> </text>auswaehlen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">8</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">if</text>(Initialized<text class="ltx_lst_space"> </text>==<text class="ltx_lst_space"> </text>M_UNK){<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Unbekannter<text class="ltx_lst_space"> </text>Initialisierungsbefehl</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">9</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>lcd_puts("<text color="#000000">Unbekannter<text class="ltx_lst_space"> </text>Motor!\n</text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">10</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>Initialized<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>M_NOTI;<text class="ltx_lst_space">    </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Variable<text class="ltx_lst_space"> </text>Initialized<text class="ltx_lst_space"> </text>zuruecksetzen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">11</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>}</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">12</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">if</text>(Initialized<text class="ltx_lst_space"> </text>==<text class="ltx_lst_space"> </text>M_NOTI){<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Befehlssatz<text class="ltx_lst_space"> </text>bestimmen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">13</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>Initialized<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>switch_Motor(str_rx);<text class="ltx_lst_space"> </text>//<text color="#008000">Automatische<text class="ltx_lst_space"> </text>Befehlssatzwahl</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">14</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>}</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">15</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">if</text>(Initialized<text class="ltx_lst_space"> </text>==<text class="ltx_lst_space"> </text>M_ISEL)<text class="ltx_lst_space">  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Uebersetzung<text class="ltx_lst_space"> </text>ISEL</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">16</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>switch_Isel(str_rx);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">17</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">if</text>(Initialized<text class="ltx_lst_space"> </text>==<text class="ltx_lst_space"> </text>M_CSG)<text class="ltx_lst_space">  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Uebersetzung<text class="ltx_lst_space"> </text>CSG</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">18</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>switch_csg(str_rx);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">19</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">if</text>(Initialized<text class="ltx_lst_space"> </text>==<text class="ltx_lst_space"> </text>M_ZETA)<text class="ltx_lst_space">  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Uebersetzung<text class="ltx_lst_space"> </text>Zeta</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">20</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>switch_Zeta(str_rx);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">21</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">if</text>(Initialized<text class="ltx_lst_space"> </text>==<text class="ltx_lst_space"> </text>M_TERMINAL)<text class="ltx_lst_space">  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Uebersetzung<text class="ltx_lst_space"> </text>Terminal</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">22</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>switch_Terminal(str_rx);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">23</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">24</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote">}</text>
                </td>
              </tr>
            </tabular>
          </listing>
          <listing class="ltx_lstlisting ltx_lst_language_C" refnum="13" xml:id="LST13" labels="LABEL:lst:switchMotor">
            <toccaption>
              <tag>
                <text fontsize="small">13 </text>
              </tag>
              <text fontsize="small">Funktion: switch Motor()</text>
            </toccaption>
            <caption fontsize="small"><tag>Listing 13: </tag>Funktion: switch Motor()</caption>
            <tabular>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">1</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>M_UNK<text class="ltx_lst_space">              </text>-2</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">2</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>M_NOTI<text class="ltx_lst_space">              </text>-1</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">3</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>M_ISEL<text class="ltx_lst_space">               </text>0</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">4</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>M_CSG<text class="ltx_lst_space">               </text>1</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">5</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>M_ZETA<text class="ltx_lst_space">               </text>2</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">6</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote">define<text class="ltx_lst_space"> </text>M_TERMINAL<text class="ltx_lst_space">       </text>3</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">7</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space">        </text>Initialized<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>M_NOTI;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">8</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Automatische<text class="ltx_lst_space"> </text>Befehlssatzwahl</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">9</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space">        </text>switch_Motor<text class="ltx_lst_space">                </text>(<text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>*<text class="ltx_lst_space"> </text>str_rx)<text class="ltx_lst_space"> </text>{</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">10</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">const</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">char</text>*<text class="ltx_lst_space"> </text>pOptions[]<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>{<text class="ltx_lst_space">       </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Array<text class="ltx_lst_space"> </text>mit<text class="ltx_lst_space"> </text>Initialisierungsbefehlen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">11</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>"<text color="#000000">@01</text>",<text class="ltx_lst_space">          </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">0<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Isel</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">12</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>"<text color="#000000">Q:</text>",<text class="ltx_lst_space">           </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">1<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>CSG</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">13</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>"<text color="#000000">ECHO0</text>",<text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">2<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Zeta</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">14</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>"<text color="#000000">!Terminal</text>",<text class="ltx_lst_space">    </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">3<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Terminal<text class="ltx_lst_space"> </text>ansteuerung!</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">15</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>0<text class="ltx_lst_space"> </text>};</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">16</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Ankommenden<text class="ltx_lst_space"> </text>String<text class="ltx_lst_space"> </text>gegen<text class="ltx_lst_space"> </text>Array<text class="ltx_lst_space"> </text>pruefen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">17</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">switch</text><text class="ltx_lst_space"> </text>(FindStringInArray(str_rx,<text class="ltx_lst_space"> </text>pOptions,<text class="ltx_lst_space"> </text>3))<text class="ltx_lst_space"> </text>{</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">18</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">case</text><text class="ltx_lst_space"> </text>0:<text class="ltx_lst_space">             </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">0<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>ISEL</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">19</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">return</text><text class="ltx_lst_space"> </text>M_ISEL;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">20</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">break</text>;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">21</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">case</text><text class="ltx_lst_space"> </text>1:<text class="ltx_lst_space">             </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">1<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>CSG</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">22</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">return</text><text class="ltx_lst_space"> </text>M_CSG;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">23</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">break</text>;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">24</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">case</text><text class="ltx_lst_space"> </text>2:<text class="ltx_lst_space">                     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">2<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Zeta</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">25</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">return</text><text class="ltx_lst_space"> </text>M_ZETA;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">26</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">break</text>;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">27</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">case</text><text class="ltx_lst_space"> </text>3:<text class="ltx_lst_space">                     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">3<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Terminal<text class="ltx_lst_space"> </text>ansteuerung</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">28</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">return</text><text class="ltx_lst_space"> </text>M_TERMINAL;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">29</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">break</text>;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">30</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">default</text>:</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">31</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">return</text><text class="ltx_lst_space"> </text>M_UNK;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">32</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">33</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote">}</text>
                </td>
              </tr>
            </tabular>
          </listing>
        </subsubsection>
      </subsection>
    </section>
    <section refnum="4.6" xml:id="Ch4.S6" labels="LABEL:sec:Auswerten_RF">
      <title fontsize="small"><tag>4.6 </tag>Auswerte-Funktionen</title>
      <para xml:id="Ch4.S6.p1">
        <p>
          <text fontsize="small">Die Auswerte-Funktionen sind das Herzstück des Programms. Es geht darum für jedes Protokoll eine eigene Auswerte-Funktion zu schreiben. Diese sollen die von RapidForm2004 kommenden Strings verstehen können und in einen, für die vorhandene Schrittmotorkarte, verständlichen Befehl übersetzen können. Die Funktionen sollen weiterhin prüfen, ob der Befehl von der Schrittmotorkarte erkannt wurde und den Status der Schrittmotorkarte zurück an RapidForm2004 melden.</text>
          <break/>
          <text fontsize="small">Alle bisherigen Arbeitsschritte hatten zum Ziel, die Kommunikation zwischen RapidForm2004 und der ersten Schrittmotorkarte zu ermöglichen. Nun fehlt nur noch der Teil des Programms der die ankommenden Befehle auswertet und in verständlicher Form an die Schrittmotorkarte weitergibt.
Im folgenden Kapitel wird dieser Ablauf nun exemplarisch für den Befehlssatz eines Isel-Motors erklärt.</text>
        </p>
      </para>
      <subsection refnum="4.6.1" xml:id="Ch4.S6.SS1">
        <title fontsize="small"><tag>4.6.1 </tag>Auswerte-Funktion für Isel-Motoren</title>
        <para xml:id="Ch4.S6.SS1.p1">
          <p>
            <text fontsize="small">Wird der Befehl </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">@01</text>
            <text fontsize="small"> empfangen, übergibt die in Kapitel </text>
            <ref labelref="LABEL:sec:AutoProtokoll"/>
            <text fontsize="small"> beschriebene Funktion, den String an die Auswerte-Funktion </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">switch_Isel(str_rx)</text>
            <text fontsize="small">. Der Ablauf dieser Funktion ist ähnlich aufgebaut wie bei der Kommunikation mit der Schrittmotorkarte (Kapitel </text>
            <ref labelref="LABEL:sec:Komm_SM"/>
            <text fontsize="small">) und bei der automatischen Auswahl des Befehlssatzes (Kapitel </text>
            <ref labelref="LABEL:sec:AutoProtokoll"/>
            <text fontsize="small">. In der Funktion </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">switch_Isel(str_rx)</text>
            <text fontsize="small"> sind in dem Array </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">pOptions</text>
            <text fontsize="small"> alle benötigten Befehle des Isel-Befehlssatzes hinterlegt. Mit der aus Kapitel </text>
            <ref labelref="LABEL:sec:Auswerten_SM"/>
            <text fontsize="small"> bekannten Funktion </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">FindStringInArray(str_rx, pOptions)</text>
            <text fontsize="small"> wird  </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">str_rx</text>
            <text fontsize="small"> gegen diese Befehle geprüft. Wird der Befehl im Array gefunden gibt die Funktion </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">FindStringInArray()</text>
            <text fontsize="small"> die Position des Strings im Array zurück. Mittels einer </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">switch-case-Struktur</text>
            <text fontsize="small"> lässt sich nun so für jeden Befehl ein entsprechender Ablauf ausführen. Die einzelnen Abläufe werden übersichtlich in den folgenden Kapiteln beschrieben.</text>
          </p>
        </para>
        <listing class="ltx_lstlisting ltx_lst_language_C" refnum="14" xml:id="LST14" labels="LABEL:lst:switch_Isel">
          <toccaption>
            <tag>
              <text fontsize="small">14 </text>
            </tag>
            <text fontsize="small">Übersetzungs Logik für einen Isel-Motor</text>
          </toccaption>
          <caption fontsize="small"><tag>Listing 14: </tag>Übersetzungs Logik für einen Isel-Motor</caption>
          <tabular>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">1</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Uebersetzung<text class="ltx_lst_space"> </text>Isel</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">2</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space">        </text>switch_Isel<text class="ltx_lst_space">                        </text>(<text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>*<text class="ltx_lst_space"> </text>str_rx)<text class="ltx_lst_space"> </text>{</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">3</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">const</text><text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">char</text>*<text class="ltx_lst_space"> </text>pOptions[]<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>{</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">4</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>"<text color="#000000">XXXXXXX</text>",<text class="ltx_lst_space">      </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">0<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Reserve</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">5</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>"<text color="#000000">!CLS</text>",<text class="ltx_lst_space">         </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">1<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>LC-Display<text class="ltx_lst_space"> </text>loeschen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">6</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>"<text color="#000000">Test</text>",<text class="ltx_lst_space">         </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">2<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Test</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">7</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>"<text color="#000000">@01</text>",<text class="ltx_lst_space">          </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">3<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Achse<text class="ltx_lst_space"> </text>auswaehlen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">8</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>"<text color="#000000">@0R</text>",<text class="ltx_lst_space">          </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">4<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Status<text class="ltx_lst_space"> </text>abfrage</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">9</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>"<text color="#000000">@0M</text>",<text class="ltx_lst_space">          </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">5<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Gehe<text class="ltx_lst_space"> </text>zu<text class="ltx_lst_space"> </text>Position</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">10</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>0<text class="ltx_lst_space"> </text>};</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">11</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">switch</text><text class="ltx_lst_space"> </text>(FindStringInArray(str_rx,<text class="ltx_lst_space"> </text>pOptions,<text class="ltx_lst_space"> </text>3))</text>
              </td>
            </tr>
          </tabular>
        </listing>
        <subsubsection refnum="4.6.1.1" xml:id="Ch4.S6.SS1.SSS1">
          <title fontsize="small"><tag>4.6.1.1 </tag>Initialisierung</title>
          <para xml:id="Ch4.S6.SS1.SSS1.p1">
            <p>
              <text fontsize="small">Für den String </text>
              <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">@01</text>
              <text fontsize="small"> wird </text>
              <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">case 3</text>
              <text fontsize="small"> ausgeführt. Dieser Codeblock zeigt die Meldung </text>
              <emph>
                <text fontsize="small">Init</text>
              </emph>
              <text fontsize="small"> auf dem Display an und sendet den erwarteten Befehl an RapidForm2004.</text>
            </p>
          </para>
          <listing class="ltx_lstlisting ltx_lst_language_C" refnum="15" xml:id="LST15" labels="LABEL:lst:switch_Isel_Init">
            <toccaption>
              <tag>
                <text fontsize="small">15 </text>
              </tag>
              <text fontsize="small">case 3: Initialisierung</text>
            </toccaption>
            <caption fontsize="small"><tag>Listing 15: </tag>case 3: Initialisierung</caption>
            <tabular>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">1</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">case</text><text class="ltx_lst_space"> </text>3:<text class="ltx_lst_space">                     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">3<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Achse<text class="ltx_lst_space"> </text>auswaehlen<text class="ltx_lst_space"> </text>(Initialisierung)</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">2</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>ms_spin(10);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">3</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>lcd_puts("<text color="#000000">Init</text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">4</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>uart_put_string("<text color="#000000">0\r\n</text>",<text class="ltx_lst_space"> </text>D_RapidForm);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">5</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">break</text>;</text>
                </td>
              </tr>
            </tabular>
          </listing>
        </subsubsection>
        <subsubsection refnum="4.6.1.2" xml:id="Ch4.S6.SS1.SSS2">
          <title fontsize="small"><tag>4.6.1.2 </tag>Statusabfrage</title>
          <!-- %**** Inhalt/Kapitel_AufbauderArbeit.tex Line 225 **** -->
          <para xml:id="Ch4.S6.SS1.SSS2.p1">
            <p>
              <text fontsize="small">Wird der String </text>
              <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">@0R</text>
              <text fontsize="small"> empfangen, wird der Codeblock </text>
              <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">case 4</text>
              <text fontsize="small"> ausgeführt. Auf dem LC-Display wird </text>
              <emph>
                <text fontsize="small">Satusabfrage:</text>
              </emph>
              <text fontsize="small"> ausgegeben. Danach wird der entsprechende Befehl für eine Statusabfrage an die Schrittmotorkarte gesendet. Nach einer kurzen Pause von 50ms, um die Verarbeitung auf der Schrittmotorkarte zu gewährleisten, wird mit einer if-Anweisung geprüft ob sich Daten im Schrittmotorkarten-Empfangsregister befinden. Sprich, die Schrittmotorkarte reagiert hat. Ist dies der Fall, wird der Ablauf, bekannt aus Kapitel </text>
              <ref labelref="LABEL:sec:Komm_SM"/>
              <text fontsize="small">, durchlaufen. Während diesem Ablauf wird die entsprechende Antwort der Schrittmotorkarte auf dem LC-Display ausgegeben. In einer weiteren if-Anweisung wird überprüft ob der angekommene String erfolgreich war. Wenn ja, wird dies an RapidForm2004 gemeldet. Andernfalls zeigt das Display </text>
              <emph>
                <text fontsize="small">Fehlgeschlagen</text>
              </emph>
              <text fontsize="small"> an und sendet eine </text>
              <emph>
                <text fontsize="small">1</text>
              </emph>
              <text fontsize="small"> an RapidForm2004.</text>
            </p>
          </para>
          <listing class="ltx_lstlisting ltx_lst_language_C" refnum="16" xml:id="LST16" labels="LABEL:lst:switch_Isel_Status">
            <toccaption>
              <tag>
                <text fontsize="small">16 </text>
              </tag>
              <text fontsize="small">case 4: Statusabfrage</text>
            </toccaption>
            <caption fontsize="small"><tag>Listing 16: </tag>case 4: Statusabfrage</caption>
            <tabular>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">1</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">case</text><text class="ltx_lst_space"> </text>4:<text class="ltx_lst_space">                     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">4<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Status<text class="ltx_lst_space"> </text>abfrage</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">2</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>lcd_puts("<text color="#000000">Statusabfrage:<text class="ltx_lst_space">     </text>\n</text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">3</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>uart_put_string("<text color="#000000">A\n</text>",<text class="ltx_lst_space"> </text>D_Stepper);<text class="ltx_lst_space">      </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Statusabfrage<text class="ltx_lst_space"> </text>an<text class="ltx_lst_space"> </text>Stepper<text class="ltx_lst_space"> </text>senden</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">4</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>ms_spin(50);<text class="ltx_lst_space">                                   </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Verarbeitungszeit<text class="ltx_lst_space"> </text>gewaehren</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">5</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>((UCSR1A<text class="ltx_lst_space"> </text>&amp;<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>RXC1)))<text class="ltx_lst_space">                 </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Wenn<text class="ltx_lst_space"> </text>ein<text class="ltx_lst_space"> </text>Zeichen<text class="ltx_lst_space"> </text>empfangen<text class="ltx_lst_space"> </text>wurde</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">6</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>uart_rx(D_Stepper);<text class="ltx_lst_space">                     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Zeichen<text class="ltx_lst_space"> </text>auslesen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">7</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>(!strcmp(str_rx,"<text color="#000000">0#</text>"))<text class="ltx_lst_space">                     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Empfangenes<text class="ltx_lst_space"> </text>Zeichen<text class="ltx_lst_space"> </text>ueberpruefen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">8</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>uart_put_string("<text color="#000000">0\r\n</text>",<text class="ltx_lst_space"> </text>D_RapidForm);<text class="ltx_lst_space">    </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Antwort<text class="ltx_lst_space"> </text>Ok<text class="ltx_lst_space"> </text>an<text class="ltx_lst_space"> </text>RF<text class="ltx_lst_space"> </text>melden</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">9</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">else</text><text class="ltx_lst_space"> </text>{</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">10</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>lcd_puts("<text color="#000000">Fehlgeschlagen<text class="ltx_lst_space">     </text>\n</text>");<text class="ltx_lst_space">         </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Fehler<text class="ltx_lst_space"> </text>auf<text class="ltx_lst_space"> </text>Display<text class="ltx_lst_space"> </text>anzeigen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">11</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>uart_put_string("<text color="#000000">1\r\n</text>",<text class="ltx_lst_space"> </text>D_RapidForm);<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Fehler<text class="ltx_lst_space"> </text>an<text class="ltx_lst_space"> </text>RapidForm<text class="ltx_lst_space"> </text>melden</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">12</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">13</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">break</text>;</text>
                </td>
              </tr>
            </tabular>
          </listing>
        </subsubsection>
        <subsubsection refnum="4.6.1.3" xml:id="Ch4.S6.SS1.SSS3">
          <title fontsize="small"><tag>4.6.1.3 </tag>Rotation</title>
          <para xml:id="Ch4.S6.SS1.SSS3.p1">
            <p>
              <text fontsize="small">Der Codeblock von </text>
              <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">case 5</text>
              <text fontsize="small"> ist für die Rotation verantwortlich. Es werden je ein String für die Endposition und für den Winkel mit Stringterminierungszeichen vorbelegt. Diese werden an die Funktion </text>
              <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">String_zerlegen_Isel(str_rx, Position, Winkel)</text>
              <text fontsize="small"> (Codelisting </text>
              <ref labelref="LABEL:lst:StringzerlegenIsel"/>
              <text fontsize="small">) übergeben. Dort wird der String in die Bestandteile </text>
              <emph>
                <text fontsize="small">Achse</text>
              </emph>
              <text fontsize="small">, </text>
              <emph>
                <text fontsize="small">Rotationsbefehl</text>
              </emph>
              <text fontsize="small">, </text>
              <emph>
                <text fontsize="small">Position/Anzahl der Schritte</text>
              </emph>
              <text fontsize="small"> und </text>
              <emph>
                <text fontsize="small">Geschwindigkeit</text>
              </emph>
              <text fontsize="small"> zerlegt. Von diesen ist nur die Anzahl der Schritte relevant. Da die Anzahl der Schritte für den Schrittmotor angepasst werden muss, wird der String in eine Zahl umgewandelt und mit einem entsprechenden Faktor multipliziert. Zugunsten der Rechenzeit wird nicht exakt gerechnet und die Division im Faktor mit 1024 durchgeführt. Diese wird beim Kompilieren durch eine </text>
              <text backgroundcolor="#D9D9FF" fontsize="small">Bitverschiebung</text>
              <text fontsize="small"> ersetzt. Dies spart mehrere Sekunden Rechenzeit und die Abweichung der Schritte beträgt nur maximal 3 Schritte. Die berechnete Anzahl der Schritte wird anschließend wieder als String gespeichert. Dieser wird dann an den String für den Rotationsbefehl der Schrittmotorkarte angehängt. Der neue String wird auf dem Display ausgegeben und an die Schrittmotorsteuerung gesendet. Die Antwort der Schrittmotorsteuerung wird ausgelesen und anschließend wird in einer </text>
              <text backgroundcolor="#D9D9FF" fontsize="small">while-Schleife</text>
              <text fontsize="small"> so lange der Status des Motors abgefragt bis dieser keine Bewegung mehr meldet. Die Position ist damit erreicht und es wird der erwartete Befehl an RapidForm2004 gesendet.</text>
            </p>
          </para>
          <listing class="ltx_lstlisting ltx_lst_language_C" refnum="17" xml:id="LST17" labels="LABEL:lst:switch_Isel_Rotation">
            <toccaption>
              <tag>
                <text fontsize="small">17 </text>
              </tag>
              <text fontsize="small">case 5: Rotation</text>
            </toccaption>
            <caption fontsize="small"><tag>Listing 17: </tag>case 5: Rotation</caption>
            <tabular>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">1</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">case</text><text class="ltx_lst_space"> </text>5:<text class="ltx_lst_space">                     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">5<text class="ltx_lst_space"> </text>-<text class="ltx_lst_space"> </text>Gehe<text class="ltx_lst_space"> </text>zu<text class="ltx_lst_space"> </text>Position<text class="ltx_lst_space"> </text>MX<text class="ltx_lst_space"> </text>,<text class="ltx_lst_space"> </text>+600</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">2</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>ms_spin(10);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">3</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>Position[33],<text class="ltx_lst_space"> </text>Winkel[6];</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">4</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>memset(Position,<text class="ltx_lst_space"> </text>’<text color="#000000">\0</text>’,<text class="ltx_lst_space"> </text>33);<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Strign<text class="ltx_lst_space"> </text>0<text class="ltx_lst_space"> </text>Terminiert<text class="ltx_lst_space"> </text>vorbelegen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">5</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>memset(Winkel,<text class="ltx_lst_space"> </text>’<text color="#000000">\0</text>’,<text class="ltx_lst_space"> </text>6);<text class="ltx_lst_space">    </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">String<text class="ltx_lst_space"> </text>0<text class="ltx_lst_space"> </text>Terminiert<text class="ltx_lst_space"> </text>vorbelegen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">6</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>String_zerlegen_Isel(str_rx,<text class="ltx_lst_space"> </text>Position,<text class="ltx_lst_space"> </text>Winkel);<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">String<text class="ltx_lst_space"> </text>auswerten</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">7</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">String<text class="ltx_lst_space"> </text>fuer<text class="ltx_lst_space"> </text>Stepper<text class="ltx_lst_space"> </text>vorbereiten</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">8</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>Move_To[40];</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">9</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>memset(Move_To,<text class="ltx_lst_space">  </text>’<text color="#000000">\0</text>’,<text class="ltx_lst_space"> </text>40);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">10</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>Move_To[0]<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>’<text color="#000000">M</text>’;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">11</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>Move_To[1]<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>’<text color="#000000">A</text>’;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">12</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>Move_To[2]<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>’<text class="ltx_lst_space" color="#000000"> </text>’;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">13</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>Move_To[3]<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>’<text color="#000000">\0</text>’;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">14</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>strcat(Move_To,<text class="ltx_lst_space"> </text>Position);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">15</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>strcat(Move_To,<text class="ltx_lst_space"> </text>"<text color="#000000">\n</text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">16</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>lcd_puts("<text color="#000000">Pos:</text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">17</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>lcd_puts(Move_To);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">18</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">String<text class="ltx_lst_space"> </text>an<text class="ltx_lst_space"> </text>Stepper<text class="ltx_lst_space"> </text>senden</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">19</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>uart_put_string(Move_To,<text class="ltx_lst_space"> </text>D_Stepper);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">20</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>ms_spin(50);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">21</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>((UCSR1A<text class="ltx_lst_space"> </text>&amp;<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>RXC1)))</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">22</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>uart_rx(D_Stepper);<text class="ltx_lst_space">     </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Antwort<text class="ltx_lst_space"> </text>des<text class="ltx_lst_space"> </text>Stepper<text class="ltx_lst_space"> </text>auslesen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">23</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">else</text><text class="ltx_lst_space"> </text>{</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">24</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">break</text>;<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Bei<text class="ltx_lst_space"> </text>Fehler<text class="ltx_lst_space"> </text>abbrechen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">25</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">26</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Status<text class="ltx_lst_space"> </text>des<text class="ltx_lst_space"> </text>Stepper<text class="ltx_lst_space"> </text>Abfragen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">27</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>uart_put_string("<text color="#000000">A\n</text>",<text class="ltx_lst_space"> </text>D_Stepper);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">28</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>ms_spin(50);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">29</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Antwort<text class="ltx_lst_space"> </text>des<text class="ltx_lst_space"> </text>Stepper<text class="ltx_lst_space"> </text>Abfragen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">30</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>((UCSR1A<text class="ltx_lst_space"> </text>&amp;<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>RXC1)))</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">31</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>uart_rx(D_Stepper);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">32</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">else</text><text class="ltx_lst_space"> </text>{</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">33</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>lcd_puts("<text color="#000000">Keine<text class="ltx_lst_space"> </text>Bewegung!\n</text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">34</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">35</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">So<text class="ltx_lst_space"> </text>lange<text class="ltx_lst_space"> </text>der<text class="ltx_lst_space"> </text>Stepper<text class="ltx_lst_space"> </text>Bewegung<text class="ltx_lst_space"> </text>meldet<text class="ltx_lst_space"> </text>erneut<text class="ltx_lst_space"> </text>Statusabfrage</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">36</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">while</text><text class="ltx_lst_space"> </text>(!strcmp(str_rx,"<text color="#000000">1#</text>")){</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">37</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Statusabfrage<text class="ltx_lst_space"> </text>an<text class="ltx_lst_space"> </text>Stepper</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">38</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>uart_put_string("<text color="#000000">A\n</text>",<text class="ltx_lst_space"> </text>D_Stepper);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">39</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>ms_spin(50);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">40</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Statusabfrage<text class="ltx_lst_space"> </text>auslesen<text class="ltx_lst_space"> </text>und<text class="ltx_lst_space"> </text>auswerten</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">41</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>((UCSR1A<text class="ltx_lst_space"> </text>&amp;<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>RXC1))){</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">42</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>uart_rx(D_Stepper);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">43</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>lcd_clrscr();</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">44</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>lcd_puts("<text color="#000000">Gehe<text class="ltx_lst_space"> </text>zu<text class="ltx_lst_space"> </text>Winkel:<text class="ltx_lst_space"> </text></text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">45</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>lcd_puts(Winkel);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">46</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>lcd_puts("<text color="#000000">\n</text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">47</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>}</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">48</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">else</text><text class="ltx_lst_space"> </text>{</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">49</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>lcd_puts("<text color="#000000">Keine<text class="ltx_lst_space"> </text>Antwort\n</text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">50</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>}</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">51</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>wdt_reset();</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">52</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">53</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>lcd_puts("<text color="#000000">Winkel:<text class="ltx_lst_space"> </text></text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">54</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>lcd_puts(Winkel);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">55</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>lcd_puts("<text class="ltx_lst_space" color="#000000"> </text><text color="#000000">Erreicht\n</text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">56</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Bewegung<text class="ltx_lst_space"> </text>abgeschlossen<text class="ltx_lst_space"> </text>an<text class="ltx_lst_space"> </text>RapidForm<text class="ltx_lst_space"> </text>melden</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">57</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>uart_put_string("<text color="#000000">0\r\n</text>",<text class="ltx_lst_space"> </text>D_RapidForm);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">58</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">break</text>;</text>
                </td>
              </tr>
            </tabular>
          </listing>
          <listing class="ltx_lstlisting ltx_lst_language_C" refnum="18" xml:id="LST18" labels="LABEL:lst:StringzerlegenIsel">
            <toccaption>
              <tag>
                <text fontsize="small">18 </text>
              </tag>
              <text fontsize="small">Funktion: string zerlegen Isel()</text>
            </toccaption>
            <caption fontsize="small"><tag>Listing 18: </tag>Funktion: string zerlegen Isel()</caption>
            <tabular>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">1</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space">        </text>String_zerlegen_Isel(<text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>*<text class="ltx_lst_space"> </text>str_rx,<text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>*<text class="ltx_lst_space"> </text>Position,<text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>*<text class="ltx_lst_space"> </text>Winkel)<text class="ltx_lst_space"> </text>{</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">2</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text color="#008000">0M5200,<text class="ltx_lst_space"> </text>+600</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">3</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text color="#008000">Achse<text class="ltx_lst_space"> </text>M<text class="ltx_lst_space"> </text>Position,<text class="ltx_lst_space"> </text>+Geschwindigkeit</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">4</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>*<text class="ltx_lst_space"> </text>Achse="<text color="#000000">0</text>";</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">5</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>Achse[0]<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>str_rx[1];<text class="ltx_lst_space">      </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Achse<text class="ltx_lst_space"> </text>setzen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">6</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>Achse[1]<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>’<text color="#000000">\0</text>’;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">7</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Ausgeben<text class="ltx_lst_space"> </text>welche<text class="ltx_lst_space"> </text>Achse<text class="ltx_lst_space"> </text>gewaehlt<text class="ltx_lst_space"> </text>wurde</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">8</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">if</text>(atoi(Achse)==0){</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">9</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>lcd_puts("<text color="#000000">Achse:<text class="ltx_lst_space"> </text></text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">10</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>lcd_puts(Achse);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">11</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>lcd_puts("<text class="ltx_lst_space" color="#000000"> </text><text color="#000000">(Rotation)\n</text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">12</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">13</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">if</text>(atoi(Achse)==1){</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">14</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>lcd_puts("<text color="#000000">Achse:<text class="ltx_lst_space"> </text></text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">15</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>lcd_puts(Achse);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">16</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>lcd_puts("<text class="ltx_lst_space" color="#000000"> </text><text color="#000000">(Hoehe)<text class="ltx_lst_space">   </text>\n</text>");</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">17</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">18</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Anzahl<text class="ltx_lst_space"> </text>der<text class="ltx_lst_space"> </text>Schritte<text class="ltx_lst_space"> </text>aus<text class="ltx_lst_space"> </text>dem<text class="ltx_lst_space"> </text>String<text class="ltx_lst_space"> </text>auslesen</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">19</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">char</text><text class="ltx_lst_space"> </text>c;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">20</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">int</text><text class="ltx_lst_space"> </text>i<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>0;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">21</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text><text class="ltx_lst_keyword" color="#FF0000">do</text><text class="ltx_lst_space"> </text>{</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">22</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>c<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>str_rx[i<text class="ltx_lst_space"> </text>+<text class="ltx_lst_space"> </text>3];</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">23</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text><text class="ltx_lst_keyword" color="#FF0000">if</text><text class="ltx_lst_space"> </text>(c<text class="ltx_lst_space"> </text>!=<text class="ltx_lst_space"> </text>’<text color="#000000">,</text>’)<text class="ltx_lst_space"> </text>{</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">24</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>Position[i]<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>c;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">25</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                        </text>i++;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">26</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">                </text>}</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">27</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>}<text class="ltx_lst_space"> </text><text class="ltx_lst_keyword" color="#FF0000">while</text><text class="ltx_lst_space"> </text>(i<text class="ltx_lst_space"> </text>&lt;<text class="ltx_lst_space"> </text>20<text class="ltx_lst_space"> </text>&amp;&amp;<text class="ltx_lst_space"> </text>c<text class="ltx_lst_space"> </text>!=<text class="ltx_lst_space"> </text>’<text color="#000000">\0</text>’<text class="ltx_lst_space"> </text>&amp;&amp;<text class="ltx_lst_space"> </text>c<text class="ltx_lst_space"> </text>!=<text class="ltx_lst_space"> </text>’<text color="#000000">,</text>’);</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">28</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>Position[i]<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>’<text color="#000000">\0</text>’;<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">String<text class="ltx_lst_space"> </text>0<text class="ltx_lst_space"> </text>Terminieren</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">29</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>int32_t<text class="ltx_lst_space"> </text>z;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">30</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>int32_t<text class="ltx_lst_space"> </text>y;</text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">31</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>z<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>atol(Position);<text class="ltx_lst_space">  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">String<text class="ltx_lst_space"> </text>in<text class="ltx_lst_space"> </text>Zahl(long)<text class="ltx_lst_space"> </text>umwandeln</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">32</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>y<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>z<text class="ltx_lst_space"> </text>/<text class="ltx_lst_space"> </text>7200;<text class="ltx_lst_space">             </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Berechnung<text class="ltx_lst_space"> </text>des<text class="ltx_lst_space"> </text>Winkel</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">33</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>z<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>(z<text class="ltx_lst_space"> </text>*<text class="ltx_lst_space"> </text>71111)<text class="ltx_lst_space">  </text>/1024;<text class="ltx_lst_space">   </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Berechnung<text class="ltx_lst_space"> </text>der<text class="ltx_lst_space"> </text>Schritte</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">34</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>ltoa(y,<text class="ltx_lst_space"> </text>Winkel,<text class="ltx_lst_space">            </text>10<text class="ltx_lst_space"> </text>);<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Winekl<text class="ltx_lst_space"> </text>in<text class="ltx_lst_space"> </text>String<text class="ltx_lst_space"> </text>umwandeln</text></text>
                </td>
              </tr>
              <tr>
                <td class="ltx_lst_linenum">
                  <text fontsize="tiny">35</text>
                </td>
                <td>
                  <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>ltoa(z,<text class="ltx_lst_space"> </text>Position,<text class="ltx_lst_space">    </text>10<text class="ltx_lst_space"> </text>);<text class="ltx_lst_space"> </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Schritte<text class="ltx_lst_space"> </text>in<text class="ltx_lst_space"> </text>String<text class="ltx_lst_space"> </text>umwandeln</text></text>
                </td>
              </tr>
            </tabular>
          </listing>
        </subsubsection>
      </subsection>
    </section>
    <section refnum="4.7" xml:id="Ch4.S7" labels="LABEL:sec:Platinenlayout">
      <title fontsize="small"><tag>4.7 </tag>Platinenlayout und 19’’-Einschub</title>
      <para xml:id="Ch4.S7.p1">
        <p>
          <text fontsize="small">Der Mikrocontroller und seine Peripherie befanden sich noch auf dem STK500. Es soll ein Platinenlayout entwickelt werden, welches den Mikrocontroller und seine Peripherie enthält.</text>
          <break/>
          <text fontsize="small">Dazu wird ein Platinenlayout in der Open Source Software KiCad entwickelt. Diese bietet fast alles, was benötigt wird um ein Platinenlayout zu entwickeln. Ein Schaltplaneditor, ein Bauteileditor und ein Layouteditor. Da die Schrittmotorkarten als 19’’-Einschübe realisiert sind, wird auch das Platinenlayout für den Mikrocontroller als 19’’-Einschub entwickelt. Dazu gehören vor allem der Steckverbinder an der Rückseite der Platine und genügend Platz für die Verschraubung der Blende an der Vorderseite, sowie die Größe der Platine. Die Schaltungen wie sie auf dem STK500 vorhanden sind, werden im Schaltplaneditor von KiCad in den eigenen Schaltplan (siehe Abbildung </text>
          <ref labelref="LABEL:fig:Schaltplan"/>
          <text fontsize="small">) übernommen.</text>
        </p>
      </para>
      <figure frefnum="Abbildung 4.6" placement="h" refnum="4.6" xml:id="Ch4.F6" labels="LABEL:fig:Schaltplan">
        <graphics graphic="Schaltplan" options="width=433.62pt" xml:id="Ch4.F6.g1" class="centering"/>
        <toccaption class="centering">
          <tag>
            <text fontsize="small">4.6 </text>
          </tag>
          <text fontsize="small">Schaltplan</text>
        </toccaption>
        <caption class="centering" fontsize="small"><tag>Abbildung 4.6: </tag>Schaltplan</caption>
      </figure>
      <para xml:id="Ch4.S7.p2">
        <p>
          <text fontsize="small">Anschließend wird das Layout im Layouteditor entwickelt. Dabei waren mehrere enge Vorgaben einzuhalten. Da in der Werkstatt des RheinAhrCampus keine Platinen mit </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">Durchkontaktierungen</text>
          <text fontsize="small"> hergestellt werden können, sollen </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">Vias</text>
          <text fontsize="small"> vermieden, IC-Sockel, Kondensatoren und Potis nur auf der Unterseite verlötet werden. Abschließend werden die benötigten Verbindungen zwischen den Bauteilen berechnet. Die Aufgabe übernimmt im allgemeinen ein </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">Autorouter</text>
          <text fontsize="small">. Dies kann nicht in der Software KiCad selbst durchgeführt werden. Diese Funktionalität wird jedoch durch die Java-Web-Anwendung </text>
          <emph>
            <text fontsize="small">Freeroute</text>
          </emph>
          <text fontsize="small">[</text>
          <ref labelref="LABEL:sec:V_Software"/>
          <text fontsize="small">] bereitgestellt. Da der Autorouter die Aufgabe nicht zufriedenstellend lösen konnte, mussten viele Verbindungen nachträglich manuell angelegt werden. Das fertige Layout (siehe Abbildung </text>
          <ref labelref="LABEL:fig:Platine"/>
          <text fontsize="small">) wurde von der Werkstatt am RheinAhrCampus gefertigt und anschließend bestückt.</text>
        </p>
      </para>
      <figure frefnum="Abbildung 4.7" placement="h" refnum="4.7" xml:id="Ch4.F7" labels="LABEL:fig:Platine">
        <!-- %**** Inhalt/Kapitel_AufbauderArbeit.tex Line 250 **** -->
        <graphics graphic="Translator_white" options="width=433.62pt" xml:id="Ch4.F7.g1" class="centering"/>
        <toccaption class="centering">
          <tag>
            <text fontsize="small">4.7 </text>
          </tag>
          <text fontsize="small">Platinenlayout</text>
        </toccaption>
        <caption class="centering" fontsize="small"><tag>Abbildung 4.7: </tag>Platinenlayout</caption>
      </figure>
      <para xml:id="Ch4.S7.p3">
        <p>
          <text fontsize="small">Über den rückwärtigen Steckverbinder wird die Platine mit der Spannungsversorgung verbunden. Zusätzlich kommen hier auch die Signale der Endschalter an. An der Vorderseite der Platine wird eine Blende verbaut. Auf dieser Blende befinden sich das LC-Display, fünf Taster, 5 LEDs und 2 serielle Schnittstellen. Alle Bauteile sind mittels Flachbandkabel, steckbar, mit der Platine verbunden.</text>
          <break/>
          <text fontsize="small">Dadurch sind alle im Projekt verwendeten Komponenten auf einem 19’’-Einschub (siehe Abbildung </text>
          <ref labelref="LABEL:fig:Einschub"/>
          <text fontsize="small">) vereint.</text>
        </p>
      </para>
      <figure frefnum="Abbildung 4.8" placement="h" refnum="4.8" xml:id="Ch4.F8" labels="LABEL:fig:Einschub">
        <graphics graphic="19ZollEinschub" options="width=433.62pt" xml:id="Ch4.F8.g1" class="centering"/>
        <toccaption class="centering">
          <tag>
            <text fontsize="small">4.8 </text>
          </tag>
          <text fontsize="small">19’’-Einschub</text>
        </toccaption>
        <caption class="centering" fontsize="small"><tag>Abbildung 4.8: </tag>19’’-Einschub</caption>
      </figure>
    </section>
  </chapter>
  <chapter frefnum="Kapitel 5" refnum="5" xml:id="Ch5">
    <title fontsize="small"><tag>Kapitel 5 </tag>Probleme und Lösungen</title>
    <toctitle>
      <tag>
        <text fontsize="small">5 </text>
      </tag>
      <text fontsize="small">Probleme und Lösungen</text>
    </toctitle>
    <section refnum="5.1" xml:id="Ch5.S1">
      <title fontsize="small"><tag>5.1 </tag>Entwicklungsumgebungen</title>
      <subsection refnum="5.1.1" xml:id="Ch5.S1.SS1">
        <title fontsize="small"><tag>5.1.1 </tag>AVR Studio 5</title>
        <para xml:id="Ch5.S1.SS1.p1">
          <p>
            <emph>
              <text fontsize="small">AVR Studio 5</text>
            </emph>
            <text fontsize="small">[</text>
            <ref labelref="LABEL:sec:V_Software"/>
            <text fontsize="small">] ist eine von Atmel bereitgestellte Entwicklungsumgebung. Diese scheint jedoch eine fehlerhafte Bibliothek zu enthalten. Die Kombination aus Mikrocontroller ATmega324A und AVR Studio 5 erzeugte nicht nachvollziehbare Probleme. Bei dem selbem Programm und einem anderem Mikrocontroller oder einer anderen Entwicklungsumgebung tauchten keine Fehler auf.
In der Entwicklungsumgebung </text>
            <emph>
              <text fontsize="small">Eclipse</text>
            </emph>
            <text fontsize="small">[</text>
            <ref labelref="LABEL:sec:V_Software"/>
            <text fontsize="small">] lies sich der Fehler reproduzieren wenn der Pfad der von Atmel bereitgestellten Bibliotheken eingestellt wurde. Eine von </text>
            <emph>
              <text fontsize="small">WinAVR</text>
            </emph>
            <text fontsize="small"> bereitgestellte Bibliothek und eine selbst kompilierte </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Toolchain</text>
            <text fontsize="small"> unter </text>
            <emph>
              <text fontsize="small">Linux</text>
            </emph>
            <text fontsize="small"> zeigten diese Probleme nicht.</text>
            <break/>
            <text fontsize="small">Daher wurde zur </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Open Source</text>
            <text fontsize="small"> Entwicklungsumgebung Eclipse mit freien Bibliotheken von WinAVR gewechselt. Dadurch wurde das Problem umgangen und das Projekt plattformunabhänig. Bis auf RapidForm2004 wurde somit nur noch freie Open Source Software verwendet.</text>
            <break/>
          </p>
        </para>
      </subsection>
      <subsection refnum="5.1.2" xml:id="Ch5.S1.SS2">
        <title fontsize="small"><tag>5.1.2 </tag>Eclipse</title>
        <para xml:id="Ch5.S1.SS2.p1">
          <p>
            <text fontsize="small">Eclipse ist eine in Java programmierte freie open source Entwicklungsumgebung für Java. Sie lässt sich durch </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Plugins</text>
            <text fontsize="small"> leicht für viele Programmiersprachen erweitern.</text>
            <break/>
            <text fontsize="small">Mit dem </text>
            <emph>
              <text fontsize="small">CDT-Plugin</text>
            </emph>
            <text fontsize="small">, dem </text>
            <emph>
              <text fontsize="small">AVR-Plugin</text>
            </emph>
            <text fontsize="small">, der Bibliothek von </text>
            <emph>
              <text fontsize="small">WinAVR</text>
            </emph>
            <text fontsize="small"> und der Programmiersoftware </text>
            <emph>
              <text fontsize="small">AVRDude</text>
            </emph>
            <text fontsize="small"> ist Eclipse eine vollwertige Entwicklungsumgebung für Mikrocontroller von Atmel.</text>
          </p>
        </para>
      </subsection>
    </section>
    <section refnum="5.2" xml:id="Ch5.S2" labels="LABEL:sec:Interrupts">
      <title fontsize="small"><tag>5.2 </tag>Interrupts</title>
      <!-- %**** Inhalt/Kapitel_AufbauderArbeit.tex Line 275 **** -->
      <para xml:id="Ch5.S2.p1">
        <p>
          <text fontsize="small">Viele Mikrocontroller bieten die Möglichkeit </text>
          <emph>
            <text fontsize="small">eventbasierte</text>
          </emph>
          <text fontsize="small"> </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">Subroutinen</text>
          <text fontsize="small"> auszuführen. Wenn ein sogenannter </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">Interrupt</text>
          <text fontsize="small"> ausgelöst wird, wird das Hauptprogramm unterbrochen und eine entsprechende </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">Interrupt-Service-Routine</text>
          <text fontsize="small">, kurz ISR, ausgeführt. Nach Beendigung der ISR wird das Hauptprogramm an der Stelle wieder aufgenommen, an der es unterbrochen wurde. ISR dürfen nur sehr wenige Befehle enthalten und sollten innerhalb weniger </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">Taktzyklen</text>
          <text fontsize="small"> abgeschlossen sein.</text>
          <break/>
          <text fontsize="small">Interrupts können z.B. der Überlauf eines internen Timer, oder ein externens Signal an einem Pin sein. Im Projekt werden Externe-Interrupts für die Endschalter, Timer-Überlauf-Interrupts für das Entprellen der Taster und der Watchdog-Interrupt zum erkennen von Fehlern genutzt.</text>
        </p>
      </para>
      <subsection refnum="5.2.1" xml:id="Ch5.S2.SS1" labels="LABEL:sec:Endschalter_SW">
        <title fontsize="small"><tag>5.2.1 </tag>Endschalter</title>
        <para xml:id="Ch5.S2.SS1.p1">
          <p>
            <text fontsize="small">Die Endschalter sind über die Schrittmotorkarten und eine Brücke auf der Rückseite der Einschubsteckplätze mit der Mikrocontrollerplatine verbunden. Dort sind sie an 2 Interrupt Pins angeschlossen. Bei einem Flankenwechsel an den Pins wird ein Interrupt ausgelöst. </text>
            <break/>
            <text fontsize="small">Mit den Zeilen 1–2 des Codelistings </text>
            <ref labelref="LABEL:lst:ISR_ES"/>
            <text fontsize="small"> werden Pin-Change-Interrupts für bestimmte Pins zugelassen. Die Zeilen 3–7 und 8–12 zeigen die Interrupt-Service-Routinen für die beiden Interrupts.</text>
          </p>
        </para>
        <listing class="ltx_lstlisting ltx_lst_language_C" refnum="19" xml:id="LST19" labels="LABEL:lst:ISR_ES">
          <toccaption>
            <tag>
              <text fontsize="small">19 </text>
            </tag>
            <text fontsize="small">ISR: Endschalter</text>
          </toccaption>
          <caption fontsize="small"><tag>Listing 19: </tag>ISR: Endschalter</caption>
          <tabular>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">1</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">PCMSK3<text class="ltx_lst_space">   </text>|=<text class="ltx_lst_space"> </text>(<text class="ltx_lst_space"> </text>1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>PCINT28<text class="ltx_lst_space"> </text>);<text class="ltx_lst_space">  </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Interrupts<text class="ltx_lst_space"> </text>definierenPD4<text class="ltx_lst_space"> </text>als<text class="ltx_lst_space"> </text>Interrupt<text class="ltx_lst_space"> </text>zulassen</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">2</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">PCICR<text class="ltx_lst_space">    </text>|=<text class="ltx_lst_space"> </text>(<text class="ltx_lst_space"> </text>1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>PCIE3<text class="ltx_lst_space">   </text>);<text class="ltx_lst_space">   </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Pin<text class="ltx_lst_space"> </text>Change<text class="ltx_lst_space"> </text>Interrupt<text class="ltx_lst_space"> </text>ControlR<text class="ltx_lst_space"> </text>PCIE3<text class="ltx_lst_space"> </text>setzen<text class="ltx_lst_space"> </text>fuer<text class="ltx_lst_space"> </text>PCINT30</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">3</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">ISR(PCINT3_vect){<text class="ltx_lst_space">   </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">+<text class="ltx_lst_space"> </text>Endschalter<text class="ltx_lst_space"> </text>Position<text class="ltx_lst_space"> </text>erreicht</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">4</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">  </text>lcd_clrscr();</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">5</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">  </text>lcd_puts("<text color="#000000">Obere\nEndposition\nErreicht!</text>");</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">6</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">  </text>LED_PORT<text class="ltx_lst_space"> </text>^=<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>LED3);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">7</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">8</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">ISR(PCINT2_vect){<text class="ltx_lst_space">   </text>//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">-<text class="ltx_lst_space"> </text>Endschalter<text class="ltx_lst_space"> </text>Position<text class="ltx_lst_space"> </text>erreicht</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">9</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">  </text>lcd_clrscr();</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">10</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">  </text>lcd_puts("<text color="#000000">Untere\nEndposition\nErreicht!</text>");</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">11</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">  </text>LED_PORT<text class="ltx_lst_space"> </text>^=<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>LED3);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">12</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
          </tabular>
        </listing>
      </subsection>
      <subsection refnum="5.2.2" xml:id="Ch5.S2.SS2">
        <title fontsize="small"><tag>5.2.2 </tag>Watchdog</title>
        <para xml:id="Ch5.S2.SS2.p1">
          <p>
            <text fontsize="small">Der </text>
            <text backgroundcolor="#D9D9FF" fontsize="small">Watchdog</text>
            <text fontsize="small"> ist eine Sicherungseinrichtung des Mikrocontroller. In regelmäßigen Abständen wird überprüft ob das Watchdog-Bit gesetzt ist und anschließend zurück gesetzt. Das Bit muss innerhalb der voreingestellten Zeit immer wieder neu gesetzt werden. Dies kann mit der Funktion </text>
            <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">wdt_reset()</text>
            <text fontsize="small"> realisiert werden. Ist das Bit nicht gesetzt, wird der Mikrocontroller zurückgesetzt. Dies geschieht z.B. bei ungewollten Endlosschleifen.</text>
            <break/>
            <text fontsize="small">Mit den Zeilen 3–10 des Codelisting </text>
            <ref labelref="LABEL:lst:Watchdog"/>
            <text fontsize="small"> wird der Watchdog initialisiert und festgelegt in welchen Zeitintervallen das Watchdog-Bit überprüft werden soll. Der Ablauf zum einstellen des Zeitinveralls muss genau wie im Datenblatt des Mikrocontroller beschrieben eingehalten werden. Dies verhindert ein versehentliches Ändern der Einstellung.
Ist das Fusebit </text>
            <emph>
              <text fontsize="small">WDTON</text>
            </emph>
            <text fontsize="small"> gesetzt kann der Watchdog nicht abgeschaltet werden (siehe Kapitel </text>
            <ref labelref="LABEL:sec:Fuses"/>
            <text fontsize="small">).</text>
            <break/>
            <text fontsize="small">Wahlweise kann kurz vor dem zurücksetzen des Mikrocontroller noch die Watchdog-ISR durchlaufen werden. Im Projekt wird in der ISR die </text>
            <emph>
              <text fontsize="small">Fehler-LED</text>
            </emph>
            <text fontsize="small"> eingeschaltet und eine Meldung auf dem LC-Display ausgegeben (siehe Codelisting </text>
            <ref labelref="LABEL:lst:Watchdog"/>
            <text fontsize="small"> Zeilen 12-16).</text>
          </p>
        </para>
        <listing class="ltx_lstlisting ltx_lst_language_C" refnum="20" xml:id="LST20" labels="LABEL:lst:Watchdog">
          <toccaption>
            <tag>
              <text fontsize="small">20 </text>
            </tag>
            <text fontsize="small">Watchdog</text>
          </toccaption>
          <caption fontsize="small"><tag>Listing 20: </tag>Watchdog</caption>
          <tabular>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">1</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">keywordstyle <text class="ltx_lst_directive">include</text><text class="ltx_lst_space"> </text>&lt;avr/wdt.h&gt;</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">2</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Initialisierung<text class="ltx_lst_space"> </text>des<text class="ltx_lst_space"> </text>Watchdog</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">3</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_keyword" color="#FF0000">void</text><text class="ltx_lst_space"> </text>init_WDT(<text class="ltx_lst_keyword" color="#FF0000">void</text>)<text class="ltx_lst_space"> </text>{</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">4</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>cli();</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">5</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>wdt_reset();</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">6</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>WDTCSR<text class="ltx_lst_space"> </text>|=<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>WDCE)<text class="ltx_lst_space"> </text>|<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>WDE);</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">7</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>WDTCSR<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>WDE)<text class="ltx_lst_space"> </text>|<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>WDIE)<text class="ltx_lst_space"> </text>|<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>WDP3)<text class="ltx_lst_space"> </text>|<text class="ltx_lst_space"> </text>(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>WDP0);<text class="ltx_lst_space"> </text>//<text color="#008000">Watchdog<text class="ltx_lst_space"> </text>8s</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">8</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>//<text color="#008000">WDTCSR<text class="ltx_lst_space"> </text>=<text class="ltx_lst_space"> </text>0x0F;<text class="ltx_lst_space"> </text>//Watchdog<text class="ltx_lst_space"> </text>Off</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">9</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">    </text>sei();</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">10</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">11</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">Watchdog<text class="ltx_lst_space"> </text>ISR</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">12</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">ISR(WDT_vect){</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">13</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>LED_PORT<text class="ltx_lst_space"> </text>&amp;=~(1<text class="ltx_lst_space"> </text>&lt;&lt;<text class="ltx_lst_space"> </text>LED4);//<text class="ltx_lst_space" color="#008000"> </text><text color="#008000">LED5<text class="ltx_lst_space"> </text>einschalten</text></text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">14</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>lcd_clrscr();</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">15</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote"><text class="ltx_lst_space">        </text>lcd_puts("<text color="#000000">Something<text class="ltx_lst_space"> </text>went<text class="ltx_lst_space"> </text>\nterribly<text class="ltx_lst_space"> </text>wrong!\nRebooting!</text>");</text>
              </td>
            </tr>
            <tr>
              <td class="ltx_lst_linenum">
                <text fontsize="tiny">16</text>
              </td>
              <td>
                <text class="ltx_lst_line" fontsize="footnote">}</text>
              </td>
            </tr>
          </tabular>
        </listing>
      </subsection>
    </section>
    <section refnum="5.3" xml:id="Ch5.S3" labels="LABEL:sec:Fuses">
      <title fontsize="small"><tag>5.3 </tag>Fuses</title>
      <para xml:id="Ch5.S3.p1">
        <p>
          <text fontsize="small">Als </text>
          <text backgroundcolor="#D9D9FF" fontsize="small">Fuses</text>
          <text fontsize="small"> werden Register bezeichnet mit denen sich, auf Hardwareebene, das Verhalten des Mikrocontrollers verändern lässt. Im Projekt wurden folgende Fuses problematisch.</text>
        </p>
        <itemize xml:id="Ch5.I1">
          <item xml:id="Ch5.I1.i1">
            <para xml:id="Ch5.I1.i1.p1">
              <p>
                <text fontsize="small" font="bold">JTAGEN</text>
                <text fontsize="small"> - Ist dieses Bit gesetzt, kann an 4 Pins des </text>
                <emph>
                  <text fontsize="small">PortB</text>
                </emph>
                <text fontsize="small"> ein </text>
                <text backgroundcolor="#D9D9FF" fontsize="small">JTAG-Debugger</text>
                <text fontsize="small"> angeschlossen werden. Debuggen auf Hardwareebene bietet viele Vorteile. Diese wurden im Projekt jedoch nicht genutzt, da kein JTAG-Debugger zur Verfügung stand und PortB für die LEDs genutzt wurde.</text>
              </p>
            </para>
          </item>
          <item xml:id="Ch5.I1.i2">
            <para xml:id="Ch5.I1.i2.p1">
              <p>
                <text fontsize="small" font="bold">WDTON</text>
                <text fontsize="small"> - Ist dieses Bit gesetzt, läuft der Watchdog-Timer immer mit. Wird der Watchdog dann nicht regelmäßig mit der Funktion </text>
                <text backgroundcolor="#FFFFE6" color="#0000FF" fontsize="small" font="typewriter">wdt_reset()</text>
                <text fontsize="small"> zurückgesetzt, startet der Mikrocontroller ständig neu.</text>
              </p>
            </para>
          </item>
          <item xml:id="Ch5.I1.i3">
            <para xml:id="Ch5.I1.i3.p1">
              <p>
                <text fontsize="small" font="bold">CKDIV8</text>
                <text fontsize="small"> - Teilt den Systemtakt des Mikrocontroller durch 8. Dies ist Energiesparender. Der geringere Takt muss in F_CPU angepasst werden da sonst zeitkritische Prozesse mit der falschen Geschwindigkeit ablaufen. Das Bit wurde jedoch im Projekt nicht gesetzt.</text>
              </p>
            </para>
          </item>
          <item xml:id="Ch5.I1.i4">
            <para xml:id="Ch5.I1.i4.p1">
              <p>
                <text fontsize="small" font="bold">CKOUT</text>
                <text fontsize="small"> - An einem Pin an </text>
                <emph>
                  <text fontsize="small">PortB</text>
                </emph>
                <text fontsize="small"> wird der Systemtakt ausgegeben. Dieser kann dann leicht mit einem Frequenz-Messgerät überprüft werden. Der Pin kann dann jedoch nicht anderweitig genutzt werden.</text>
              </p>
            </para>
          </item>
          <item xml:id="Ch5.I1.i5">
            <para xml:id="Ch5.I1.i5.p1">
              <p>
                <text fontsize="small" font="bold">CKSELX</text>
                <text fontsize="small"> - Über diese 4 Bits kann der Systemtakt eingestellt werden.
</text>
                <!-- %**** Inhalt/Kapitel_AufbauderArbeit.tex Line 300 **** -->
              </p>
            </para>
          </item>
        </itemize>
      </para>
      <table frefnum="Tabelle 5.1" refnum="5.1" xml:id="Ch5.T1a" labels="LABEL:tab:Fuses">
        <caption fontsize="small"><tag>Tabelle 5.1: </tag>Fuses</caption>
        <toccaption>
          <tag>
            <text fontsize="small">5.1 </text>
          </tag>
          <text fontsize="small">Fuses</text>
        </toccaption>
        <tabular>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">OCDEN</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">On Chip Debugging</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">JTAGEN</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Hardware Debugging</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">SPIEN</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Serial Program and Data Downloading</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">WDTON</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Watchdog Timer always on</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">EESAVE</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">EEPROM memory is preserved through the Chip Erase</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">BOOTSZ1</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Select Boot Size</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">BOOTSZ0</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Select Boot Size</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">BOOTRST</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Select Reset Vector</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">CKDIV8</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Divide clock by 8</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">CKOUT</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Clock output</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">SUT1</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Select start-up time</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">SUT0</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Select start-up time</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">CKSEL3</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Select Clock source</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">CKSEL2</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Select Clock source</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="l r t">
              <text fontsize="small">CKSEL1</text>
            </td>
            <td align="left" border="r t">
              <text fontsize="small">Select Clock source</text>
            </td>
          </tr>
          <tr>
            <td align="left" border="b l r t">
              <text fontsize="small">CKSEL0</text>
            </td>
            <td align="left" border="b r t">
              <text fontsize="small">Select Clock source</text>
            </td>
          </tr>
        </tabular>
      </table>
      <!-- %Aufbau -->
    </section>
  </chapter>
  <chapter frefnum="Kapitel 6" refnum="6" xml:id="Ch6" labels="LABEL:cha:Fazit">
    <title fontsize="small"><tag>Kapitel 6 </tag>Fazit und weitere Möglichkeiten</title>
    <toctitle>
      <tag>
        <text fontsize="small">6 </text>
      </tag>
      <text fontsize="small">Fazit und weitere Möglichkeiten</text>
    </toctitle>
    <section refnum="6.1" xml:id="Ch6.S1">
      <title fontsize="small"><tag>6.1 </tag>Fazit</title>
      <para xml:id="Ch6.S1.p1">
        <p>
          <text fontsize="small">Das vorgegeben Ziel den Aufbau in Betrieb zu nehmen und mit einem Mikrocontroller so zu erweitern, dass die Erfassungssoftware RapidForm2004 kompatibel mit dem vorhandenen Drehtisch ist, wurde erreicht. Die Software kann vollständig genutzt werden und alle wesentlichen Funktionen der Schrittmotorsteuerungen werden von der Mikrocontroller Programmierung unterstützt. Im Anhang </text>
          <ref labelref="LABEL:sec:StepbyStep"/>
          <text fontsize="small"> befindet sich eine Schritt-für-Schritt Anleitung mit der auch Laien das System nutzen können.</text>
        </p>
      </para>
    </section>
    <section refnum="6.2" xml:id="Ch6.S2">
      <title fontsize="small"><tag>6.2 </tag>Bekannte Probleme</title>
      <para xml:id="Ch6.S2.p1">
        <p>
          <text fontsize="small">Bei einem abschließenden Test funktionierte das Anzeigen einer Meldung beim erreichen der Endschalter, auf dem Display nicht. Alle Verbindungen sind vorhanden und die Programmierung des Mikrocontrollers vollständig. Das Problem ist nicht bekannt und das Auffinden würde weitere Zeit in Anspruch nehmen.</text>
          <break/>
          <text fontsize="small">Das Display zeigt während der Rotation </text>
          <emph>
            <text fontsize="small">0</text>
          </emph>
          <text fontsize="small"> anstatt dem Winkel an, um den rotiert wird. Für die Anzahl der Schritte funktionierte diese Anzeige. Vermutlich liegt hier ein Fehler in der Berechnung des Winkels vor.</text>
        </p>
      </para>
    </section>
    <section refnum="6.3" xml:id="Ch6.S3">
      <title fontsize="small"><tag>6.3 </tag>Weitere Möglichkeiten</title>
      <para xml:id="Ch6.S3.p1">
        <p>
          <text fontsize="small">Eine elegantere Lösung als die Befehle der Befehlssätze in einem Array zu speichern wäre es diese in verketteten Pointer Structs zu speichern. Diese Idee kam leider erst gegen Ende des Projektes und konnte daher aus Zeitmangel nicht mehr umgesetzt werden.</text>
          <break/>
          <text fontsize="small">Im Menü lassen sich zur Zeit nur voreingestellte Winkel bzw. Schrittzahlen auswählen. Hier könnte noch eine Funktion geschrieben werden die es dem Benutzer erlaubt Winkel frei einzustellen.
    </text>
          <!-- %Fazit und Zukunft -->
        </p>
      </para>
      <!-- %Literaturverzeichnis __ 
     %Das Literaturverzeichnis wird aus der Datenbank Bibliographie.bib
     %erstellt. Die genaue Verwendung von bibtex wird hier jedoch nicht erklärt.
     %Link: http://de.wikipedia.org/wiki/BibTeX
     %__-->
    </section>
  </chapter>
  <bibliography files="Bibliographie" xml:id="bib">
    <title fontsize="small">Literatur</title>
  </bibliography>
  <!-- %Aufruf: bibtex FHWTVorlage 
     %\bibliographystyle{natdin}			% DIN-Stil des
     %DIN-Stil des Literaturverzeichnisses
     %**** Praxisbericht.tex Line 125 ****
     %\chapter*{Erklärung des Autors}
     %\addcontentsline{toc}{chapter}{Erklärung des Autors}-->
  <chapter frefnum="Kapitel 7" refnum="7" xml:id="Ch7">
    <title fontsize="small"><tag>Kapitel 7 </tag>Eidesstattliche Erklärung</title>
    <toctitle>
      <tag>
        <text fontsize="small">7 </text>
      </tag>
      <text fontsize="small">Eidesstattliche Erklärung</text>
    </toctitle>
    <para xml:id="Ch7.p1">
      <p>
        <text fontsize="small">Hiermit versichere ich, dass ich den vorliegenden Bericht:</text>
      </p>
      <quote>
        <p>
          <text fontsize="small" font="italic">Übersetzen von Schrittmotorbefehlen</text>
          <text fontsize="small"> </text>
          <break/>
          <text fontsize="small">
</text>
          <text fontsize="small" font="italic">Entwurf eines Hardwareübersetzers</text>
          <text fontsize="small"> </text>
          <break/>
          <text fontsize="small"></text>
        </p>
      </quote>
      <p>
        <text fontsize="small">selbständig und nur unter Verwendung der angegebenen Quellen und Hilfsmittel verfasst habe.</text>
        <break/>
        <text fontsize="small">Remagen, den 1. Juli 2012</text>
      </p>
    </para>
    <figure placement="hp" xml:id="Ch7.fig1">
      <graphics candidates="../!Multimedia/!Dokumente/!!Briefverkehr/!Bilder/Unterschrift.png" graphic="/home/joe/!Multimedia/!Dokumente/!!Briefverkehr/!Bilder/Unterschrift.png" options="height=28.452756pt" xml:id="Ch7.g1"/>
    </figure>
    <para xml:id="Ch7.p2">
      <p>
        <text fontsize="small" font="smallcaps">Johannes Dielmann</text>
        <text fontsize="small">
   </text>
        <!-- %Selbständigkeitserklärung -->
      </p>
    </para>
    <!-- %Anhang __ 
     %Die Inhalte des Anhangs werden analog zu den Kapiteln inkludiert.
     %Dies geschieht in der Datei Anhang.tex
     %__
     %\clearpage
     %\pagenumbering{roman}-->
  </chapter>
  <appendix frefnum="Anhang A" refnum="A" xml:id="A1" labels="LABEL:sec:Anhang">
    <title fontsize="small"><tag>Anhang A </tag>Anhang</title>
    <toctitle>
      <tag>
        <text fontsize="small">A </text>
      </tag>
      <text fontsize="small">Anhang</text>
    </toctitle>
    <!-- %Rand der Aufzählungen in Tabellen anpassen 
     %\appendixtoc
     %\include{Inhalt/StepByStep}-->
    <section refnum="A.1" xml:id="A1.S1" labels="LABEL:sec:A_ASCII_Befehle">
      <title fontsize="small"><tag>A.1 </tag>Befehlssatz der vorhandene Schrittmotorkarte</title>
      <para xml:id="A1.S1.p1">
        <p>
          <text fontsize="small">Tabelle </text>
          <ref labelref="LABEL:tbl:ASCII_RS"/>
          <text fontsize="small"> zeigt den ASCII Befehlssatz der Schrittmotorkarte.</text>
        </p>
      </para>
      <table frefnum="Tabelle A.1" placement="htb" refnum="A.1" xml:id="A1.T1" labels="LABEL:tbl:ASCII_RS">
        <tabular>
          <thead>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _A</text>
              </td>
              <td align="left" border="r t" thead="true">
                <text fontsize="small">Motorstatus liefern</text>
              </td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _C n</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">konstante Geschwindigkeit einstellen</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _D n</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Bezugswert definieren</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _E n</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Motorstrom einstellen</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _F</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Standardeinstellungen aktivieren</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _H</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Sanfter stop</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _I</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">4-Bit-Eingang lesen</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _J jdss</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Joystickparameter einstellen</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _L n</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">lokalen Modus aktivieren/beenden</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _M n</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">n Schritte ausführen</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _MA n</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">zu n bewegen</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _MC n</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">mit konstanter Geschwindigkeit bewegen</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _MCA n</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">MA mit konstanter Geschwindigkeit</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _MCL n</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">MC zu Endschalterposition</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _ML n</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">zur Endschalterposition bewegen</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _N n</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Zeilenvorschub (LF, hex. 0A) einfügen/löschen</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _O n</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">n an 4-Bit-Ausgang senden</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _P nnnn</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Motorparameter einstellen</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _Q</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Parameter in EEROM speichern</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _R n</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Mikroschritteilung einstellen</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _RL</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Endschalterwerte lesen</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _RS</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">verbleibende Schritte lesen</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _S</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Nothalt</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _T n</text>
              </td>
              <td align="left" border="r t">
                <text fontsize="small">Eingang n auslösen</text>
              </td>
            </tr>
            <tr>
              <td align="left" border="b l r t" thead="true">
                <rule height="10.75pt" width="0.0pt" yoffset="-4.3pt"/>
                <text fontsize="small"> _W</text>
              </td>
              <td align="left" border="b r t">
                <text fontsize="small">Position anfordern</text>
              </td>
            </tr>
          </tbody>
        </tabular>
        <toccaption>
          <tag>
            <text fontsize="small">A.1 </text>
          </tag>
          <text fontsize="small">ASCII Befehlssatz R+S Schrittmotorsteuerung</text>
        </toccaption>
        <caption fontsize="small"><tag>Tabelle A.1: </tag>ASCII Befehlssatz R+S Schrittmotorsteuerung</caption>
        <p>
          <cite>
            <text fontsize="small">[</text>
            <bibref bibrefs="rs:ug_stepper" separator="," show="Number" yyseparator=","/>
            <text fontsize="small">]</text>
          </cite>
          <text fontsize="small">
Der ’’_’’  wird mit der anzusteuernden Kartennummer ersetzt. Dabei wird von 1 aufwärts gezählt. Bei der ersten Karte kann die Nummer weggelassen werden.</text>
        </p>
      </table>
    </section>
    <section refnum="A.2" xml:id="A1.S2" labels="LABEL:sec:Protokolle_RF">
      <title fontsize="small"><tag>A.2 </tag>Befehlssätze aus RapidForm2004</title>
      <listing class="ltx_lstlisting ltx_lst_language_Java" refnum="21" xml:id="LST21" labels="LABEL:lst:Protokolle_RF">
        <toccaption>
          <tag>
            <text fontsize="small">21 </text>
          </tag>
          <text fontsize="small">Befehlssätze aus RapidForm2004</text>
        </toccaption>
        <caption fontsize="small"><tag>Listing 21: </tag>Befehlssätze aus RapidForm2004</caption>
        <tabular>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">1</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">model<text class="ltx_lst_space"> </text>"<text color="#000000">CSG-602R(Ver.2.0)</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">2</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">port<text class="ltx_lst_space"> </text>"<text color="#000000">9600</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">n81h</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">3</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">init<text class="ltx_lst_space"> </text>"<text color="#000000">D:2S500F5000R200S500F5000R200\r\nH:1-\r\n</text>"<text class="ltx_lst_space"> </text>""</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">4</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">finish<text class="ltx_lst_space"> </text>"<text color="#000000">L:1\r\nH:1-\r\n</text>"<text class="ltx_lst_space"> </text>""</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">5</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">arot<text class="ltx_lst_space"> </text>"<text color="#000000">M:1+P%d\r\nG:\r\n</text>"<text class="ltx_lst_space"> </text>""</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">6</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">stop<text class="ltx_lst_space"> </text>"<text color="#000000">L:E\r\n</text>"<text class="ltx_lst_space"> </text>""</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">7</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">home<text class="ltx_lst_space"> </text>"<text color="#000000">L:1\r\nH:1-\r\n</text>"<text class="ltx_lst_space"> </text>""</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">8</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">step<text class="ltx_lst_space"> </text>"<text color="#000000">-0.0025</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">-99999999</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">99999999</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">9</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">timeout<text class="ltx_lst_space"> </text>"<text color="#000000">60</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">10</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">firsttimeout<text class="ltx_lst_space"> </text>"<text color="#000000">10</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">11</text>
            </td>
            <td>
              <text class="ltx_lst_line"/>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">12</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">model<text class="ltx_lst_space"> </text>"<text color="#000000">CSG-602R(Ver.1.0)</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">13</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">port<text class="ltx_lst_space"> </text>"<text color="#000000">9600</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">n81h</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">14</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">init<text class="ltx_lst_space"> </text>"<text color="#000000">D:2S500F5000R200S500F5000R200\r\nH:1-\r\n</text>"<text class="ltx_lst_space"> </text>""</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">15</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">finish<text class="ltx_lst_space"> </text>"<text color="#000000">L:1\r\nH:1-\r\n</text>"<text class="ltx_lst_space"> </text>""</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">16</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">arot<text class="ltx_lst_space"> </text>"<text color="#000000">M:1+P%d\r\nG:\r\n</text>"<text class="ltx_lst_space"> </text>""</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">17</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">stop<text class="ltx_lst_space"> </text>"<text color="#000000">L:E\r\n</text>"<text class="ltx_lst_space"> </text>""<text class="ltx_lst_space"> </text>home<text class="ltx_lst_space"> </text>"<text color="#000000">L:1\r\nH:1-\r\n</text>"<text class="ltx_lst_space"> </text>""</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">18</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">step<text class="ltx_lst_space"> </text>"<text color="#000000">-0.005</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">-99999999</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">99999999</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">19</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">timeout<text class="ltx_lst_space"> </text>"<text color="#000000">60</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">20</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">firsttimeout<text class="ltx_lst_space"> </text>"<text color="#000000">10</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">21</text>
            </td>
            <td>
              <text class="ltx_lst_line"/>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">22</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">model<text class="ltx_lst_space"> </text>"<text color="#000000">Mark-202</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">23</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">port<text class="ltx_lst_space"> </text>"<text color="#000000">9600</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">n81h</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">24</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">init<text class="ltx_lst_space"> </text>"<text color="#000000">S:180\r\nD:1S20000F200000R200\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">OK\r\nOK\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">25</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">finish<text class="ltx_lst_space"> </text>"<text color="#000000">L:1\r\nH:1\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">OK\r\nOK\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">26</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">arot<text class="ltx_lst_space"> </text>"<text color="#000000">M:1+P%d\r\nG:\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">OK\r\nOK\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">27</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">stop<text class="ltx_lst_space"> </text>"<text color="#000000">L:E\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">OK\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">28</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">home<text class="ltx_lst_space"> </text>"<text color="#000000">L:1\r\nH:1\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">OK\r\nOK\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">29</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">step<text class="ltx_lst_space"> </text>"<text color="#000000">-0.0000625</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">-99999999</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">99999999</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">30</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">timeout<text class="ltx_lst_space"> </text>"<text color="#000000">60</text>"<text class="ltx_lst_space"> </text>firsttimeout<text class="ltx_lst_space"> </text>"<text color="#000000">10</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">31</text>
            </td>
            <td>
              <text class="ltx_lst_line"/>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">32</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">model<text class="ltx_lst_space"> </text>"<text color="#000000">Mark-102</text>"<text class="ltx_lst_space"> </text>port<text class="ltx_lst_space"> </text>"<text color="#000000">9600</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">n81h</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">33</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">init<text class="ltx_lst_space"> </text>"<text color="#000000">D:WS500F5000R200S500F5000R200\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">OK\r\nOK\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">34</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">finish<text class="ltx_lst_space"> </text>"<text color="#000000">H:1-\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">OK\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">35</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">arot<text class="ltx_lst_space"> </text>"<text color="#000000">M:1+P%d\r\nG:\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">OK\r\nOK\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">36</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">stop<text class="ltx_lst_space"> </text>"<text color="#000000">L:E\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">OK\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">37</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">home<text class="ltx_lst_space"> </text>"<text color="#000000">H:1-\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">OK\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">38</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">step<text class="ltx_lst_space"> </text>"<text color="#000000">-0.0025</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">-99999999</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">99999999</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">39</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">timeout<text class="ltx_lst_space"> </text>"<text color="#000000">60</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">40</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">firsttimeout<text class="ltx_lst_space"> </text>"<text color="#000000">10</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">41</text>
            </td>
            <td>
              <text class="ltx_lst_line"/>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">42</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">model<text class="ltx_lst_space"> </text>"<text color="#000000">isel(RF-1)</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">43</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">port<text class="ltx_lst_space"> </text>"<text color="#000000">9600</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">n81h</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">44</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">init<text class="ltx_lst_space"> </text>"<text color="#000000">@01\r</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">45</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">finish<text class="ltx_lst_space"> </text>"<text color="#000000">@0M0\054+600\r</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">46</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">arot<text class="ltx_lst_space"> </text>"<text color="#000000">@0M%d\054+600\r</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">47</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">stop<text class="ltx_lst_space"> </text>""<text class="ltx_lst_space"> </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">48</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">home<text class="ltx_lst_space"> </text>"<text color="#000000">@0M0\054+600\r</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">49</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">step<text class="ltx_lst_space"> </text>"<text color="#000000">-0.0173076</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">-8000000</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">8000000</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">50</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">timeout<text class="ltx_lst_space"> </text>"<text color="#000000">60</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">51</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">firsttimeout<text class="ltx_lst_space"> </text>"<text color="#000000">10</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">52</text>
            </td>
            <td>
              <text class="ltx_lst_line"/>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">53</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">model<text class="ltx_lst_space"> </text>"<text color="#000000">isel(R-1)</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">54</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">port<text class="ltx_lst_space"> </text>"<text color="#000000">9600</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">n81h</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">55</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">init<text class="ltx_lst_space"> </text>"<text color="#000000">@01\r</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">56</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">finish<text class="ltx_lst_space"> </text>"<text color="#000000">@0M0\054+300\r</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">57</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">arot<text class="ltx_lst_space"> </text>"<text color="#000000">@0M%d\054+300\r</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">58</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">stop<text class="ltx_lst_space"> </text>""<text class="ltx_lst_space"> </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">59</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">home<text class="ltx_lst_space"> </text>"<text color="#000000">@0M0\054+300\r</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">0</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">60</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">step<text class="ltx_lst_space"> </text>"<text color="#000000">-0.05</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">-8000000</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">8000000</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">61</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">timeout<text class="ltx_lst_space"> </text>"<text color="#000000">60</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">62</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">firsttimeout<text class="ltx_lst_space"> </text>"<text color="#000000">10</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">63</text>
            </td>
            <td>
              <text class="ltx_lst_line"/>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">64</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">model<text class="ltx_lst_space"> </text>"<text color="#000000">ZETA6104</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">65</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">port<text class="ltx_lst_space"> </text>"<text color="#000000">9600</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">n81n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">66</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">init<text class="ltx_lst_space"> </text>"<text color="#000000">ECHO0\rCOMEXC0\PSET0\rA8\rV8\r</text>"<text class="ltx_lst_space"> </text>""</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">67</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">finish<text class="ltx_lst_space"> </text>"<text class="ltx_lst_space" color="#000000">  </text><text color="#000000">D0<text class="ltx_lst_space"> </text>\rGO1\rWAIT(1PE&lt;&gt;1)\rRESET\r</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">\r\n&gt;\040\r\n&gt;\040\r\n&gt;\040\r\n&gt;\040</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">68</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">arot<text class="ltx_lst_space"> </text>"<text color="#000000">MA1<text class="ltx_lst_space"> </text>D%d\rGO1\rWAIT(1PE&lt;&gt;1)\r</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">\r\n&gt;\040\r\n&gt;\040\r\n&gt;\040\r\n&gt;\040</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">69</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">home<text class="ltx_lst_space"> </text>"<text color="#000000">MA1<text class="ltx_lst_space"> </text>D0<text class="ltx_lst_space"> </text>\rGO1\rWAIT(1PE&lt;&gt;1)\r</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">\r\n&gt;\040\r\n&gt;\040\r\n&gt;\040\r\n&gt;\040</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">70</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">stop<text class="ltx_lst_space"> </text>"<text color="#000000">!S\r</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">\r\n&gt;\040</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">71</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">step<text class="ltx_lst_space"> </text>"<text color="#000000">0.00008</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">-4500000</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">4500000</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">72</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">timeout<text class="ltx_lst_space"> </text>"<text color="#000000">60</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">73</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">firsttimeout<text class="ltx_lst_space"> </text>"<text color="#000000">10</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">74</text>
            </td>
            <td>
              <text class="ltx_lst_line"/>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">75</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">model<text class="ltx_lst_space"> </text>"<text color="#000000">MMC-2(15kg)</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">76</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">port<text class="ltx_lst_space"> </text>"<text color="#000000">9600</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">n81h</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">77</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">init<text class="ltx_lst_space"> </text>"<text color="#000000">F:XP3\r\nS:X1\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">\r\n\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">78</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">finish<text class="ltx_lst_space"> </text>"<text color="#000000">L:X\r\nA:XP0\r\nW:\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">\r\n\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">79</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">arot<text class="ltx_lst_space"> </text>"<text color="#000000">A:XP%d\r\nW:\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">\r\n\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">80</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">stop<text class="ltx_lst_space"> </text>"<text color="#000000">E:\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">81</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">home<text class="ltx_lst_space"> </text>"<text color="#000000">A:XP0\r\nW:\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">82</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">step<text class="ltx_lst_space"> </text>"<text color="#000000">0.002</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">-99999999</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">99999999</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">83</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">timeout<text class="ltx_lst_space"> </text>"<text color="#000000">60</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">84</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">firsttimeout<text class="ltx_lst_space"> </text>"<text color="#000000">10</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">85</text>
            </td>
            <td>
              <text class="ltx_lst_line"/>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">86</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">model<text class="ltx_lst_space"> </text>"<text color="#000000">MMC-2</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">87</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">port<text class="ltx_lst_space"> </text>"<text color="#000000">9600</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">n81h</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">88</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">init<text class="ltx_lst_space"> </text>"<text color="#000000">F:XP3\r\nS:X1\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">\r\n\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">89</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">finish<text class="ltx_lst_space"> </text>"<text color="#000000">L:X\r\nA:XP0\r\nW:\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">\r\n\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">90</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">arot<text class="ltx_lst_space"> </text>"<text color="#000000">A:XP%d\r\nW:\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">\r\n\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">91</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">stop<text class="ltx_lst_space"> </text>"<text color="#000000">E:\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">92</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">home<text class="ltx_lst_space"> </text>"<text color="#000000">A:XP0\r\nW:\r\n</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">\r\n</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">93</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">step<text class="ltx_lst_space"> </text>"<text color="#000000">0.005</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">-99999999</text>"<text class="ltx_lst_space"> </text>"<text color="#000000">99999999</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">94</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">timeout<text class="ltx_lst_space"> </text>"<text color="#000000">60</text>"</text>
            </td>
          </tr>
          <tr>
            <td class="ltx_lst_linenum">
              <text fontsize="tiny">95</text>
            </td>
            <td>
              <text class="ltx_lst_line" fontsize="footnote">firsttimeout<text class="ltx_lst_space"> </text>"<text color="#000000">10</text>"</text>
            </td>
          </tr>
        </tabular>
      </listing>
      <!-- %\include{Inhalt/Tabelle_TD_VI900} 
     %\include{Inhalt/uCGrundlagen}
     %\include{Inhalt/RS232Grundlagen}-->
    </section>
    <section refnum="A.3" xml:id="A1.S3" labels="LABEL:sec:V_Hardware">
      <title fontsize="small"><tag>A.3 </tag>Verwendete Hardware</title>
      <para xml:id="A1.S3.p1">
        <itemize xml:id="A1.I1">
          <item xml:id="A1.I1.i1">
            <para xml:id="A1.I1.i1.p1">
              <p>
                <text fontsize="small" font="bold">VI-900<break/></text>
                <text fontsize="small">Konica Minolta Sensing Europe, B.V.</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.konicaminolta.eu/de/messinstrumente/produkte/3d-messtechnik/beruehrungsloser-3d-scanner/vi-910/einfuehrung.html">
                  <text fontsize="small" font="typewriter">http://www.konicaminolta.eu/de/messinstrumente/produkte/3d-messtechnik/beruehrungsloser-3d-scanner/vi-910/einfuehrung.html</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I1.i2">
            <para xml:id="A1.I1.i2.p1">
              <p>
                <text fontsize="small" font="bold">ATMega 324A<break/></text>
                <text fontsize="small">Atmel Corporation</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.atmel.com/devices/ATMEGA324A.aspx">
                  <text fontsize="small" font="typewriter">http://www.atmel.com/devices/ATMEGA324A.aspx</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I1.i3">
            <para xml:id="A1.I1.i3.p1">
              <p>
                <text fontsize="small" font="bold">STK500<break/></text>
                <text fontsize="small">Atmel Corporation</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.atmel.com/tools/STK500.aspx">
                  <text fontsize="small" font="typewriter">http://www.atmel.com/tools/STK500.aspx</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I1.i4">
            <para xml:id="A1.I1.i4.p1">
              <p>
                <text fontsize="small" font="bold">AVRISP mkII<break/></text>
                <text fontsize="small">Atmel Corporation</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.atmel.com/tools/AVRISPMKII.aspx">
                  <text fontsize="small" font="typewriter">http://www.atmel.com/tools/AVRISPMKII.aspx</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I1.i5">
            <para xml:id="A1.I1.i5.p1">
              <p>
                <text fontsize="small" font="bold">Induktiver Endschalter<break/></text>
                <text fontsize="small">Pepperl+Fuchs</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.pepperl-fuchs.de/germany/de/classid_143.htm?view=productdetails&amp;prodid=3012">
                  <text fontsize="small" font="typewriter">http://www.pepperl-fuchs.de/germany/de/classid_143.htm?view=productdetails&amp;prodid=3012</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I1.i6">
            <para xml:id="A1.I1.i6.p1">
              <p>
                <text fontsize="small" font="bold">MAX232<break/></text>
                <text fontsize="small">Texas Instruments Incorporated</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.ti.com/product/max232">
                  <text fontsize="small" font="typewriter">http://www.ti.com/product/max232</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
        </itemize>
      </para>
    </section>
    <section refnum="A.4" xml:id="A1.S4" labels="LABEL:sec:V_Software">
      <title fontsize="small"><tag>A.4 </tag>Verwendete Software</title>
      <!-- %**** Inhalt/Werkzeuge.tex Line 25 **** -->
      <para xml:id="A1.S4.p1">
        <p>
          <text fontsize="small">Hier ist die verwendete Software aufgelistet. Soweit es möglich war, wurden Open-Source-Programme eingesetzt.</text>
        </p>
        <itemize xml:id="A1.I2">
          <item xml:id="A1.I2.i1">
            <para xml:id="A1.I2.i1.p1">
              <p>
                <text fontsize="small" font="bold">RapidForm2004</text>
                <text fontsize="small"> (Closed Source)</text>
                <break/>
                <text fontsize="small">INUS Technology, Inc.</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.rapidform.com">
                  <text fontsize="small" font="typewriter">http://www.rapidform.com</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I2.i2">
            <para xml:id="A1.I2.i2.p1">
              <p>
                <text fontsize="small" font="bold">AVRStudio 5</text>
                <text fontsize="small">  (Closed Source)</text>
                <break/>
                <text fontsize="small">Atmel Corporation </text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.atmel.com/">
                  <text fontsize="small" font="typewriter">http://www.atmel.com/</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I2.i3">
            <para xml:id="A1.I2.i3.p1">
              <p>
                <text fontsize="small" font="bold">Eclipse</text>
                <text fontsize="small"> mit CDT und AVRPlugin</text>
                <break/>
                <text fontsize="small">The Eclipse Foundation</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.eclipse.org/">
                  <text fontsize="small" font="typewriter">http://www.eclipse.org/</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I2.i4">
            <para xml:id="A1.I2.i4.p1">
              <p>
                <text fontsize="small" font="bold">AVRDude - AVR Downloader/UploaDEr</text>
                <text fontsize="small"> </text>
                <break/>
                <text fontsize="small">Brian S. Dean</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.nongnu.org/avrdude/">
                  <text fontsize="small" font="typewriter">http://www.nongnu.org/avrdude/</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I2.i5">
            <para xml:id="A1.I2.i5.p1">
              <p>
                <text fontsize="small" font="bold">Blender<break/></text>
                <text fontsize="small">Blender Foundation</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.blender.org/">
                  <text fontsize="small" font="typewriter">http://www.blender.org/</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I2.i6">
            <para xml:id="A1.I2.i6.p1">
              <p>
                <text fontsize="small" font="bold">Texmaker<break/></text>
                <text fontsize="small">Pascal Brachet</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.xm1math.net/texmaker/">
                  <text fontsize="small" font="typewriter">http://www.xm1math.net/texmaker/</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I2.i7">
            <para xml:id="A1.I2.i7.p1">
              <p>
                <text fontsize="small" font="bold">LaTeX<break/></text>
                <text fontsize="small">LaTeX</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.latex-project.org/">
                  <text fontsize="small" font="typewriter">http://www.latex-project.org/</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I2.i8">
            <para xml:id="A1.I2.i8.p1">
              <p>
                <text fontsize="small" font="bold">GIT<break/><!-- %**** Inhalt/Werkzeuge.tex Line 50 **** --></text>
                <text fontsize="small">Scott Chacon</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://git-scm.com/">
                  <text fontsize="small" font="typewriter">http://git-scm.com/</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I2.i9">
            <para xml:id="A1.I2.i9.p1">
              <p>
                <text fontsize="small" font="bold">Inkscape<break/></text>
                <text fontsize="small">Inkscape</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://inkscape.org/">
                  <text fontsize="small" font="typewriter">http://inkscape.org/</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I2.i10">
            <para xml:id="A1.I2.i10.p1">
              <p>
                <text fontsize="small" font="bold">Hyperterminal</text>
                <text fontsize="small"> (Closed Source)</text>
                <break/>
                <text fontsize="small">Microsoft</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.microsoft.com">
                  <text fontsize="small" font="typewriter">http://www.microsoft.com</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I2.i11">
            <para xml:id="A1.I2.i11.p1">
              <p>
                <text fontsize="small" font="bold">Putty<break/></text>
                <text fontsize="small">Simon Tatham</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.chiark.greenend.org.uk/~sgtatham/putty/">
                  <text fontsize="small" font="typewriter">http://www.chiark.greenend.org.uk/~sgtatham/putty/</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
          <item xml:id="A1.I2.i12">
            <para xml:id="A1.I2.i12.p1">
              <p>
                <text fontsize="small" font="bold">Freeroute<break/></text>
                <text fontsize="small">Alfons Wirtz</text>
                <break/>
                <text fontsize="small">Website: </text>
                <ref class="url" href="http://www.freerouting.net/">
                  <text fontsize="small" font="typewriter">http://www.freerouting.net/</text>
                </ref>
                <text fontsize="small"></text>
              </p>
            </para>
          </item>
        </itemize>
        <!-- %\section{Codelistings} 
     %Die ungekürzten Sourcecodes.-->
      </para>
    </section>
    <section refnum="A.5" xml:id="A1.S5" labels="LABEL:sec:main.c">
      <title fontsize="small"><tag>A.5 </tag>main.c</title>
      <para xml:id="A1.S5.p1">
        <p>
          <text fontsize="small">Alle Codelistings können auf </text>
          <ref class="url" href="https://github.com/JoeD84/Praxisprojekt">
            <text fontsize="small" font="typewriter">https://github.com/JoeD84/Praxisprojekt</text>
          </ref>
          <text fontsize="small"> angesehen werden.
</text>
          <!-- %\lstset{language=C, basicstyle=\footnotesize, showstringspaces=false, tabsize=4, inputencoding={utf8}} 
     %\lstinputlisting[label=lst:main,caption=main.c]{../../main.c}
     %\subsection{lcd.h}
     %\lstset{language=Java, basicstyle=\footnotesize, showstringspaces=C, tabsize=4}
     %\lstinputlisting[label=lst:lcd.h,caption=lcd.h]{../../lcd.h}
     %\subsection{Debounce.h}
     %\lstset{language=C, basicstyle=\footnotesize, showstringspaces=false, tabsize=4}
     %\lstinputlisting[label=lst:Debounce.h,caption=Debounce.h]{../../lcd.h}
     %\subsection{tinymenu.h}
     %\subsection{mymenu.h}
     %\subsection{mystuff.h}-->
          <text fontsize="small"></text>
        </p>
      </para>
    </section>
    <section refnum="A.6" xml:id="A1.S6">
      <title fontsize="small"><tag>A.6 </tag>Credits</title>
      <!-- %Ich möchte mich bei den folgenden Personen recht Herzlich bedanken. Herr Prof. Dr. Carstens-Behrens der mir dieses Projekt anbot und mich während dessen zu meiner vollsten Zufriedenheit betreute. Herr Bildhauer der mir bei Fragen immer freundlich zur Verfügung stand. Herr Steimers der mir bei Problemen immer weiterhelfen konnte und der mir mit seiner hervorragenden Ausstattung weiterhelfen konnte wenn die Werkstatt bereits geschlossen hatte und den Praxisbericht korrekturgelesen hat. -->
      <para xml:id="A1.S6.p1">
        <p>
          <text fontsize="small">Den folgenden Personen gebührt mein Dank:</text>
        </p>
      </para>
      <table placement="h" xml:id="A1.S6.tab1">
        <tabular vattach="top">
          <tbody>
            <tr>
              <td align="right" thead="true">
                <tabular vattach="top">
                  <tr>
                    <td align="right">
                      <text fontsize="small" font="bold">Betreuer</text>
                    </td>
                  </tr>
                </tabular>
              </td>
              <td align="left">
                <tabular vattach="top">
                  <tr>
                    <td align="left">
                      <text fontsize="small">Prof. Dr. Carstens-Behrens</text>
                    </td>
                  </tr>
                </tabular>
              </td>
            </tr>
            <tr>
              <td align="right" thead="true">
                <tabular vattach="top">
                  <tr>
                    <td align="right">
                      <text fontsize="small" font="bold">Hilfestellung bei Problemen aller Art</text>
                    </td>
                  </tr>
                </tabular>
              </td>
              <td align="left">
                <tabular vattach="top">
                  <tr>
                    <td align="left">
                      <text fontsize="small">Prof. Dr. Carstens-Behrens</text>
                    </td>
                  </tr>
                  <tr>
                    <td align="left">
                      <text fontsize="small">Herr Bildhauer</text>
                    </td>
                  </tr>
                  <tr>
                    <td align="left">
                      <text fontsize="small">André Steimers</text>
                    </td>
                  </tr>
                  <tr>
                    <td align="left">
                      <text fontsize="small">sowie allen weiteren Personen</text>
                    </td>
                  </tr>
                  <tr>
                    <td align="left">
                      <text fontsize="small">aus dem Labor bei Herrn Steimers</text>
                    </td>
                  </tr>
                </tabular>
              </td>
            </tr>
            <tr>
              <td align="right" thead="true">
                <tabular vattach="top">
                  <tr>
                    <td align="right">
                      <text fontsize="small" font="bold">Lektoren</text>
                    </td>
                  </tr>
                </tabular>
              </td>
              <td align="left">
                <tabular vattach="top">
                  <tr>
                    <td align="left">
                      <text fontsize="small">André Steimers</text>
                    </td>
                  </tr>
                  <tr>
                    <td align="left">
                      <text fontsize="small">Daniel Frank</text>
                    </td>
                  </tr>
                  <tr>
                    <td align="left">
                      <text fontsize="small">Sarina Steinke</text>
                    </td>
                  </tr>
                </tabular>
              </td>
            </tr>
            <tr>
              <td align="right" thead="true">
                <tabular vattach="top">
                  <tr>
                    <td align="right">
                      <text fontsize="small" font="bold">3D Grafiken</text>
                    </td>
                  </tr>
                </tabular>
              </td>
              <td align="left">
                <tabular vattach="top">
                  <tr>
                    <td align="left">
                      <text fontsize="small">Benjamin Dielmann</text>
                    </td>
                  </tr>
                </tabular>
                <text fontsize="small"></text>
              </td>
            </tr>
          </tbody>
        </tabular>
      </table>
      <para xml:id="A1.S6.p2">
        <p align="center">
          <text fontsize="tiny">Congratulations! You’ve reached the end.
<!-- %**** Inhalt/Anhang_Danksagung.tex Line 50 **** --></text>
          <text fontsize="small"></text>
        </p>
        <!-- %Vorlage, C-B, Bildh, Werkstatt, Steimers und Co. -->
      </para>
      <!-- %Index __ 
     %Zum Erstellen eines Index, die folgende Zeile auskommentieren.
     %__
     %\printindex		% Index hier einfügen-->
    </section>
  </appendix>
</document>
